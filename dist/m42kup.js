var m42kup=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=2)}([function(t,e,r){"use strict";function n(){}function o(t){t.prototype=Object.create(n.prototype),Object.defineProperty(t.prototype,"constructor",{value:t,enumerable:!1,writable:!0})}function i(t){if("string"!=typeof t)throw TypeError("text not string");this.text=t}function a({html:t,display:e}){if("string"!=typeof t)throw TypeError("html not string");if(!["inline","leaf-block","container-block"].includes(e))throw TypeError('arg0.display should be one of "inline", "leaf-block", or "container-block".');this.html=t,this.display=e}function s({message:t,code:e}){if("string"!=typeof t)throw TypeError("message not string");if("string"!=typeof e)throw TypeError("code not string");this.message=t,this.code=e}function l({name:t,display:e,render:r,split:n}){if(!t)throw TypeError("You give arg0 a bad name");if(!["inline","leaf-block","container-block"].includes(e))throw TypeError('arg0.display should be one of "inline", "leaf-block", or "container-block".');if(!(r instanceof Function))throw TypeError("arg0.render should be a function");if([this.name,this.display]=[t,e],this.render=(t,e)=>{if(!(t instanceof c))throw TypeError("arg0 should be an instance of m42kup.renderer.Element");return r(t,e)},void 0!==n){if("string"==typeof n&&(n=[n]),!(n instanceof Array))throw TypeError("arg0.split should be either undefined, a string, or an array");if(!n.length)throw TypeError("arg0.split.length == 0");this.split=n}}function c({name:t,display:e,render:r,code:n,children:o,split:l,options:u}){if(!t)throw TypeError("You give arg0 a bad name");if(!["inline","leaf-block","container-block"].includes(e))throw TypeError('arg0.display should be one of "inline", "leaf-block", or "container-block".');if(!(r instanceof Function))throw TypeError("arg0.render should be a function");if("string"!=typeof n)throw TypeError("You give arg0 a bad code");if((()=>{var t=e=>e instanceof c||e instanceof i||e instanceof s||e instanceof Array&&e.every(t);if(!o.every(t))throw TypeError("All arg0.children should either be an Element, a TextNode, or an ErrorNode")})(),void 0!==l){if("string"==typeof l&&(l=[l]),!(l instanceof Array))throw TypeError("arg0.split should be either undefined, a string, or an array");if(!l.length)throw TypeError("arg0.split.length == 0");this.split=l}var h,p;[this.name,this.display,this.code,this.children]=[t,e,n,o],this.innerIsText=(h=l?l.length:0,(p=(t,e)=>e>0?t.map(t=>p(t,e-1)):t.map(t=>t instanceof i||!(t instanceof s)&&t.outerIsText).every(t=>t))(o,h)),this.innerText=(()=>{var t=l?l.length:0,e=(t,r,n)=>r>0?t.map((t,o)=>e(t,r-1,n[o])):n?t.map(t=>t instanceof i?t.text:t.outerText).join(""):null;return e(o,t,this.innerIsText)})(),this.innerHtml=(()=>{var t=l?l.length:0,e=(t,r,n,o)=>{if(r>0)return t.map((t,i)=>e(t,r-1,n[i],o[i]));if(n)return o.trim()&&"container-block"==this.display?o.split(/(?:\r\n[ \t]*){2,}|(?:\r[ \t]*){2,}|(?:\n[ \t]*){2,}/).filter(t=>!!t.trim()).map(this.escapeHtml).map(t=>`<p>${t}</p>`).join(""):this.escapeHtml(o);if("container-block"!=this.display)return t.map(t=>t instanceof i?this.escapeHtml(t.text):t instanceof s?'<code class="m42kup-error">'+this.escapeHtml(t.code)+"</code>":t.outerHtml).join("");var a=[],l=[],c=()=>{l.length&&(a.push(l),l=[])},u=t=>l.push(t);return t.forEach(t=>{if(t instanceof i){var e=t.text.split(/(?:\r\n[ \t]*){2,}|(?:\r[ \t]*){2,}|(?:\n[ \t]*){2,}/);if(e.length<2)return u(t);e.forEach((t,r)=>{t.trim()&&u(this.text(t)),r<e.length-1&&c()})}else t instanceof s?u(t):"inline"!=t.display?(c(),a.push(t),c()):u(t)}),c(),a.map(t=>t instanceof Array?"<p>"+t.map(t=>t instanceof i?this.escapeHtml(t.text):t instanceof s?'<code class="m42kup-error">'+this.escapeHtml(t.code)+"</code>":t.outerHtml).join("")+"</p>":t.outerHtml).join("")};return e(o,t,this.innerIsText,this.innerText)})();var f=r(this,u);if(this.outerIsText=f instanceof i,this.outerText=this.outerIsText?f.text:null,this.isError=f instanceof s,this.errorMessage=f instanceof s?f.message:null,this.outerIsText)this.outerHtml=this.escapeHtml(this.outerText);else if(f instanceof a)this.outerHtml=f.html;else{if(!(f instanceof s))throw TypeError("Render output should be one of TextNode, HtmlNode, or ErrorNode");this.outerHtml='<code class="m42kup-error">'+this.escapeHtml(f.code)+"</code>"}}o(i),i.prototype.toString=function(){return this.toIndentedString(0)},i.prototype.toIndentedString=function(t){return"\t".repeat(t)+`Text {${JSON.stringify(this.text)}}`},o(a),a.prototype.toString=function(){return this.toIndentedString(0)},a.prototype.toIndentedString=function(t){var e=["display"].map(t=>t+"="+JSON.stringify(this[t])).join(" ");return"\t".repeat(t)+`Html(${e}) {${JSON.stringify(this.html)}}`},o(s),s.prototype.toString=function(){return this.toIndentedString(0)},s.prototype.toIndentedString=function(t){var e=["message","code"].map(t=>t+"="+JSON.stringify(this[t])).join(" ");return"\t".repeat(t)+`Error(${e})`},l.prototype.instantiate=function({code:t,children:e,options:r}){if(!(this instanceof l))throw Error("ElementClass.prototype.instantiate should be called as a method of an ElementClass instance");return new c({name:this.name,display:this.display,render:this.render,code:t,children:e,split:this.split,options:r})},o(c),c.prototype.text=function(t){return new i(t)},c.prototype.html=function(t){return new a({html:t,display:this.display})},c.prototype.error=function(t){return new s({message:t,code:this.code})},c.prototype.toString=function(){return this.toIndentedString(0)},c.prototype.toIndentedString=function(t){var e,r=["display","code","split","isError","errorMessage","innerIsText","innerText","innerHtml","outerIsText","outerText","outerHtml"].map(t=>t+"="+("string"==typeof this[t]||this[t]instanceof Array?JSON.stringify(this[t]):this[t]+"")).join("\n"+"\t".repeat(t+1));return(()=>{var r=(e,n)=>e instanceof Array?e.map(r).join(",\n"):e.toIndentedString(t+1);e=this.children.map(r).join(",\n")})(),"\t".repeat(t)+`Element[${JSON.stringify(this.name)}](\n${"\t".repeat(t+1)}${r}\n${"\t".repeat(t)}) {\n${e}\n${"\t".repeat(t)}}`},c.prototype.escapeHtml=t=>(t+"").replace(/[&<>"']/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[t]),t.exports={Node:n,TextNode:i,HtmlNode:a,ErrorNode:s,ElementClass:l,Element:c}},function(t,e){function r(t){var e={};for(var r in t)e[r]=t[r];return e}function n(t){var e={};return t.tags&&(e.tags=r(t.tags)),t.hljs&&(e.hljs=t.hljs),t.katex&&(e.katex=t.katex),e}function o(t,e){for(var n in t=r(t),e)t[n]=e[n];return t}t.exports={copyOptions:n,tags:o,options:function(t,e){if("object"!=typeof t||"object"!=typeof e)throw TypeError("One of the options provided is not an object");return t=n(t),e.tags&&(t.tags||(t.tags={}),t.tags=o(t.tags,e.tags)),e.hljs&&(t.hljs=e.hljs),e.katex&&(t.katex=e.katex),t}}},function(t,e,r){var n=r(3),o=r(5),i=r(7),a=r(1),s={};var l={parser:n,renderer:o,highlighter:i,ast2nt:function(t,e){return e||(e={}),e.tags||(e.tags={}),e=a.options(s,e),o.ast2nt(t,e)},render:function(t,e){t+="",e||(e={}),e.tags||(e.tags={}),e=a.options(s,e);var r=n.input2pt(t),i=n.pt2ast(r);return o.ast2nt(i,e).outerHtml},highlight:function(t){t+="";var e=n.input2pt(t);return i.pt2hl(e)},cascade:function(t){if("object"!=typeof t)throw TypeError("typeof options != 'object'");s=a.options(s,t)},set:function(t){if("object"!=typeof t)throw TypeError("typeof options != 'object'");s=t}};t.exports=l},function(t,e,r){var n=r(4);t.exports={input2pt:function(t){var e=n.parse(t);return e.input=t,e},pt2ast:function(t){var e=t.input,r=function t(r){return r.map(r=>{switch(r.type){case"text":return{type:"text",text:r.text};case"verbatim":return{type:"text",text:r.child.text};case"element":return{type:"element",name:r.name,code:e.substring(r.location.start.offset,r.location.end.offset),children:t(r.children)};default:throw new TypeError(`Unknown type: ${r.type}`)}}).reduce((t,e,r)=>{if("text"==e.type){if(!e.text)return t;if(r>0&&"text"==t[t.length-1].type)return t[t.length-1].text+=e.text,t}return t.push(e),t},[])}(t.root.children);return{input:t.input,root:{type:"root",children:r,code:e.substring(t.root.location.start.offset,t.root.location.end.offset),location:t.root.location}}}}},function(t,e,r){"use strict";function n(t,e,r,o){this.message=t,this.expected=e,this.found=r,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,n)}!function(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}(n,Error),n.buildMessage=function(t,e){var r={literal:function(t){return'"'+o(t.text)+'"'},class:function(t){var e,r="";for(e=0;e<t.parts.length;e++)r+=t.parts[e]instanceof Array?i(t.parts[e][0])+"-"+i(t.parts[e][1]):i(t.parts[e]);return"["+(t.inverted?"^":"")+r+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function o(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}function i(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}return"Expected "+function(t){var e,n,o,i=new Array(t.length);for(e=0;e<t.length;e++)i[e]=(o=t[e],r[o.type](o));if(i.sort(),i.length>0){for(e=1,n=1;e<i.length;e++)i[e-1]!==i[e]&&(i[n]=i[e],n++);i.length=n}switch(i.length){case 1:return i[0];case 2:return i[0]+" or "+i[1];default:return i.slice(0,-1).join(", ")+", or "+i[i.length-1]}}(t)+" but "+function(t){return t?'"'+o(t)+'"':"end of input"}(e)+" found."},t.exports={SyntaxError:n,parse:function(t,e){e=void 0!==e?e:{};var r,o={},i={start:Xt},a=Xt,s=function(t){return{root:{type:"root",children:t,location:Bt()}}},l=function(t,e,r,n,o){return{type:"element",lbm:t,name:e,separator:r,children:n,rbm:o,location:Bt()}},c="[",u=Dt("[",!1),h="<",p=Dt("<",!1),f=function(t,e){return(se[se.length-1]||0)<=e.length+1},d=function(t,e){return t+e.join("")},m=function(t){return se.push(t.length),t},y="!",g=Dt("!",!1),x='"',v=Dt('"',!1),b="#",A=Dt("#",!1),C="$",w=Dt("$",!1),E="%",T=Dt("%",!1),k="&",$=Dt("&",!1),j="'",H=Dt("'",!1),N=")",S=Dt(")",!1),I="*",O=Dt("*",!1),M="+",q=Dt("+",!1),F=",",z=Dt(",",!1),R="-",_=Dt("-",!1),J="/",P=Dt("/",!1),U=";",Y=Dt(";",!1),L="=",B=Dt("=",!1),D=">",G=Dt(">",!1),K="?",Q=Dt("?",!1),V="@",W=Dt("@",!1),X="\\",Z=Dt("\\",!1),tt="^",et=Dt("^",!1),rt="_",nt=Dt("_",!1),ot="{",it=Dt("{",!1),at="|",st=Dt("|",!1),lt="}",ct=Dt("}",!1),ut="~",ht=Dt("~",!1),pt=function(t){return t.join("")},ft=/^[a-z]/,dt=Gt([["a","z"]],!1,!1),mt=/^[a-z0-9]/,yt=Gt([["a","z"],["0","9"]],!1,!1),gt=":",xt=Dt(":",!1),vt=function(t,e,r,n){return":"+r+n.join("")},bt=function(t,e,r){return t+e.join("")+r.join("")},At="",Ct=".",wt=Dt(".",!1),Et="]",Tt=Dt("]",!1),kt=function(t,e){return(se[se.length-1]||0)==t.length+1},$t=function(t,e){return t.join("")+e},jt=function(){return""},Ht=function(t){return se.pop(),t},Nt={type:"any"},St="`",It=Dt("`",!1),Ot=function(t){return t},Mt=function(t){return{type:"text",text:t.join(""),location:Bt()}},qt=function(t,e,r,n){return{type:"verbatim",lvm:t,separator:e,child:r,rvm:n,location:Bt()}},Ft=function(t,e){return ae=e.length+1,t+e.join("")},zt=function(t,e){return ae==t.length+1},Rt=function(t){return{type:"text",text:t.join(""),location:Bt()}},_t=0,Jt=0,Pt=[{line:1,column:1}],Ut=0,Yt=[],Lt=0;if("startRule"in e){if(!(e.startRule in i))throw new Error("Can't start parsing from rule \""+e.startRule+'".');a=i[e.startRule]}function Bt(){return Qt(Jt,_t)}function Dt(t,e){return{type:"literal",text:t,ignoreCase:e}}function Gt(t,e,r){return{type:"class",parts:t,inverted:e,ignoreCase:r}}function Kt(e){var r,n=Pt[e];if(n)return n;for(r=e-1;!Pt[r];)r--;for(n={line:(n=Pt[r]).line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return Pt[e]=n,n}function Qt(t,e){var r=Kt(t),n=Kt(e);return{start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function Vt(t){_t<Ut||(_t>Ut&&(Ut=_t,Yt=[]),Yt.push(t))}function Wt(t,e,r){return new n(n.buildMessage(t,e),t,e,r)}function Xt(){var t,e;return t=_t,(e=Zt())!==o&&(Jt=t,e=s(e)),t=e}function Zt(){var t,e;for(t=[],e=te();e!==o;)t.push(e),e=te();return t}function te(){var e;return(e=function(){var e,r,n,i,a,s;e=_t,(r=function(){var t,e;t=_t,(e=ee())!==o&&(Jt=t,e=m(e));return t=e}())!==o&&(n=function(){var e,r,n,i,a,s,l,c,u;e=_t,r=[],33===t.charCodeAt(_t)?(n=y,_t++):(n=o,0===Lt&&Vt(g));if(n!==o)for(;n!==o;)r.push(n),33===t.charCodeAt(_t)?(n=y,_t++):(n=o,0===Lt&&Vt(g));else r=o;if(r===o){if(r=[],34===t.charCodeAt(_t)?(n=x,_t++):(n=o,0===Lt&&Vt(v)),n!==o)for(;n!==o;)r.push(n),34===t.charCodeAt(_t)?(n=x,_t++):(n=o,0===Lt&&Vt(v));else r=o;if(r===o){if(r=[],35===t.charCodeAt(_t)?(n=b,_t++):(n=o,0===Lt&&Vt(A)),n!==o)for(;n!==o;)r.push(n),35===t.charCodeAt(_t)?(n=b,_t++):(n=o,0===Lt&&Vt(A));else r=o;if(r===o){if(r=[],36===t.charCodeAt(_t)?(n=C,_t++):(n=o,0===Lt&&Vt(w)),n!==o)for(;n!==o;)r.push(n),36===t.charCodeAt(_t)?(n=C,_t++):(n=o,0===Lt&&Vt(w));else r=o;if(r===o){if(r=[],37===t.charCodeAt(_t)?(n=E,_t++):(n=o,0===Lt&&Vt(T)),n!==o)for(;n!==o;)r.push(n),37===t.charCodeAt(_t)?(n=E,_t++):(n=o,0===Lt&&Vt(T));else r=o;if(r===o){if(r=[],38===t.charCodeAt(_t)?(n=k,_t++):(n=o,0===Lt&&Vt($)),n!==o)for(;n!==o;)r.push(n),38===t.charCodeAt(_t)?(n=k,_t++):(n=o,0===Lt&&Vt($));else r=o;if(r===o){if(r=[],39===t.charCodeAt(_t)?(n=j,_t++):(n=o,0===Lt&&Vt(H)),n!==o)for(;n!==o;)r.push(n),39===t.charCodeAt(_t)?(n=j,_t++):(n=o,0===Lt&&Vt(H));else r=o;if(r===o){if(r=[],41===t.charCodeAt(_t)?(n=N,_t++):(n=o,0===Lt&&Vt(S)),n!==o)for(;n!==o;)r.push(n),41===t.charCodeAt(_t)?(n=N,_t++):(n=o,0===Lt&&Vt(S));else r=o;if(r===o){if(r=[],42===t.charCodeAt(_t)?(n=I,_t++):(n=o,0===Lt&&Vt(O)),n!==o)for(;n!==o;)r.push(n),42===t.charCodeAt(_t)?(n=I,_t++):(n=o,0===Lt&&Vt(O));else r=o;if(r===o){if(r=[],43===t.charCodeAt(_t)?(n=M,_t++):(n=o,0===Lt&&Vt(q)),n!==o)for(;n!==o;)r.push(n),43===t.charCodeAt(_t)?(n=M,_t++):(n=o,0===Lt&&Vt(q));else r=o;if(r===o){if(r=[],44===t.charCodeAt(_t)?(n=F,_t++):(n=o,0===Lt&&Vt(z)),n!==o)for(;n!==o;)r.push(n),44===t.charCodeAt(_t)?(n=F,_t++):(n=o,0===Lt&&Vt(z));else r=o;if(r===o){if(r=[],45===t.charCodeAt(_t)?(n=R,_t++):(n=o,0===Lt&&Vt(_)),n!==o)for(;n!==o;)r.push(n),45===t.charCodeAt(_t)?(n=R,_t++):(n=o,0===Lt&&Vt(_));else r=o;if(r===o){if(r=[],47===t.charCodeAt(_t)?(n=J,_t++):(n=o,0===Lt&&Vt(P)),n!==o)for(;n!==o;)r.push(n),47===t.charCodeAt(_t)?(n=J,_t++):(n=o,0===Lt&&Vt(P));else r=o;if(r===o){if(r=[],59===t.charCodeAt(_t)?(n=U,_t++):(n=o,0===Lt&&Vt(Y)),n!==o)for(;n!==o;)r.push(n),59===t.charCodeAt(_t)?(n=U,_t++):(n=o,0===Lt&&Vt(Y));else r=o;if(r===o){if(r=[],61===t.charCodeAt(_t)?(n=L,_t++):(n=o,0===Lt&&Vt(B)),n!==o)for(;n!==o;)r.push(n),61===t.charCodeAt(_t)?(n=L,_t++):(n=o,0===Lt&&Vt(B));else r=o;if(r===o){if(r=[],62===t.charCodeAt(_t)?(n=D,_t++):(n=o,0===Lt&&Vt(G)),n!==o)for(;n!==o;)r.push(n),62===t.charCodeAt(_t)?(n=D,_t++):(n=o,0===Lt&&Vt(G));else r=o;if(r===o){if(r=[],63===t.charCodeAt(_t)?(n=K,_t++):(n=o,0===Lt&&Vt(Q)),n!==o)for(;n!==o;)r.push(n),63===t.charCodeAt(_t)?(n=K,_t++):(n=o,0===Lt&&Vt(Q));else r=o;if(r===o){if(r=[],64===t.charCodeAt(_t)?(n=V,_t++):(n=o,0===Lt&&Vt(W)),n!==o)for(;n!==o;)r.push(n),64===t.charCodeAt(_t)?(n=V,_t++):(n=o,0===Lt&&Vt(W));else r=o;if(r===o){if(r=[],92===t.charCodeAt(_t)?(n=X,_t++):(n=o,0===Lt&&Vt(Z)),n!==o)for(;n!==o;)r.push(n),92===t.charCodeAt(_t)?(n=X,_t++):(n=o,0===Lt&&Vt(Z));else r=o;if(r===o){if(r=[],94===t.charCodeAt(_t)?(n=tt,_t++):(n=o,0===Lt&&Vt(et)),n!==o)for(;n!==o;)r.push(n),94===t.charCodeAt(_t)?(n=tt,_t++):(n=o,0===Lt&&Vt(et));else r=o;if(r===o){if(r=[],95===t.charCodeAt(_t)?(n=rt,_t++):(n=o,0===Lt&&Vt(nt)),n!==o)for(;n!==o;)r.push(n),95===t.charCodeAt(_t)?(n=rt,_t++):(n=o,0===Lt&&Vt(nt));else r=o;if(r===o){if(r=[],123===t.charCodeAt(_t)?(n=ot,_t++):(n=o,0===Lt&&Vt(it)),n!==o)for(;n!==o;)r.push(n),123===t.charCodeAt(_t)?(n=ot,_t++):(n=o,0===Lt&&Vt(it));else r=o;if(r===o){if(r=[],124===t.charCodeAt(_t)?(n=at,_t++):(n=o,0===Lt&&Vt(st)),n!==o)for(;n!==o;)r.push(n),124===t.charCodeAt(_t)?(n=at,_t++):(n=o,0===Lt&&Vt(st));else r=o;if(r===o){if(r=[],125===t.charCodeAt(_t)?(n=lt,_t++):(n=o,0===Lt&&Vt(ct)),n!==o)for(;n!==o;)r.push(n),125===t.charCodeAt(_t)?(n=lt,_t++):(n=o,0===Lt&&Vt(ct));else r=o;if(r===o)if(r=[],126===t.charCodeAt(_t)?(n=ut,_t++):(n=o,0===Lt&&Vt(ht)),n!==o)for(;n!==o;)r.push(n),126===t.charCodeAt(_t)?(n=ut,_t++):(n=o,0===Lt&&Vt(ht));else r=o}}}}}}}}}}}}}}}}}}}}}}}r!==o&&(Jt=e,r=pt(r));if((e=r)===o){if(e=_t,ft.test(t.charAt(_t))?(r=t.charAt(_t),_t++):(r=o,0===Lt&&Vt(dt)),r!==o){for(n=[],mt.test(t.charAt(_t))?(i=t.charAt(_t),_t++):(i=o,0===Lt&&Vt(yt));i!==o;)n.push(i),mt.test(t.charAt(_t))?(i=t.charAt(_t),_t++):(i=o,0===Lt&&Vt(yt));if(n!==o){if(i=[],a=_t,58===t.charCodeAt(_t)?(s=gt,_t++):(s=o,0===Lt&&Vt(xt)),s!==o)if(ft.test(t.charAt(_t))?(l=t.charAt(_t),_t++):(l=o,0===Lt&&Vt(dt)),l!==o){for(c=[],mt.test(t.charAt(_t))?(u=t.charAt(_t),_t++):(u=o,0===Lt&&Vt(yt));u!==o;)c.push(u),mt.test(t.charAt(_t))?(u=t.charAt(_t),_t++):(u=o,0===Lt&&Vt(yt));c!==o?(Jt=a,s=vt(r,n,l,c),a=s):(_t=a,a=o)}else _t=a,a=o;else _t=a,a=o;for(;a!==o;)if(i.push(a),a=_t,58===t.charCodeAt(_t)?(s=gt,_t++):(s=o,0===Lt&&Vt(xt)),s!==o)if(ft.test(t.charAt(_t))?(l=t.charAt(_t),_t++):(l=o,0===Lt&&Vt(dt)),l!==o){for(c=[],mt.test(t.charAt(_t))?(u=t.charAt(_t),_t++):(u=o,0===Lt&&Vt(yt));u!==o;)c.push(u),mt.test(t.charAt(_t))?(u=t.charAt(_t),_t++):(u=o,0===Lt&&Vt(yt));c!==o?(Jt=a,s=vt(r,n,l,c),a=s):(_t=a,a=o)}else _t=a,a=o;else _t=a,a=o;i!==o?(Jt=e,r=bt(r,n,i),e=r):(_t=e,e=o)}else _t=e,e=o}else _t=e,e=o;e===o&&(e=At)}return e}())!==o&&(i=re())!==o&&(a=Zt())!==o&&(s=function(){var t,e;t=_t,(e=ne())!==o&&(Jt=t,e=Ht(e));return t=e}())!==o?(Jt=e,r=l(r,n,i,a,s),e=r):(_t=e,e=o);return e}())===o&&(e=function(){var e,r,n,i,a;e=_t,(r=function(){var e,r,n,i;e=_t,96===t.charCodeAt(_t)?(r=St,_t++):(r=o,0===Lt&&Vt(It));if(r!==o){for(n=[],60===t.charCodeAt(_t)?(i=h,_t++):(i=o,0===Lt&&Vt(p));i!==o;)n.push(i),60===t.charCodeAt(_t)?(i=h,_t++):(i=o,0===Lt&&Vt(p));n!==o?(Jt=e,r=Ft(r,n),e=r):(_t=e,e=o)}else _t=e,e=o;return e}())!==o&&(n=re())!==o&&(i=function(){var e,r,n,i,a;e=_t,r=[],n=_t,i=_t,Lt++,a=ie(),Lt--,a===o?i=void 0:(_t=i,i=o);i!==o?(t.length>_t?(a=t.charAt(_t),_t++):(a=o,0===Lt&&Vt(Nt)),a!==o?(Jt=n,i=Ot(a),n=i):(_t=n,n=o)):(_t=n,n=o);for(;n!==o;)r.push(n),n=_t,i=_t,Lt++,a=ie(),Lt--,a===o?i=void 0:(_t=i,i=o),i!==o?(t.length>_t?(a=t.charAt(_t),_t++):(a=o,0===Lt&&Vt(Nt)),a!==o?(Jt=n,i=Ot(a),n=i):(_t=n,n=o)):(_t=n,n=o);r!==o&&(Jt=e,r=Rt(r));return e=r}())!==o&&(a=ie())!==o?(Jt=e,r=qt(r,n,i,a),e=r):(_t=e,e=o);return e}())===o&&(e=function(){var e,r,n,i,a,s,l;e=_t,r=[],n=_t,i=_t,Lt++,a=ee(),Lt--,a===o?i=void 0:(_t=i,i=o);i!==o?(a=_t,Lt++,s=ne(),Lt--,s===o?a=void 0:(_t=a,a=o),a!==o?(s=_t,Lt++,96===t.charCodeAt(_t)?(l=St,_t++):(l=o,0===Lt&&Vt(It)),Lt--,l===o?s=void 0:(_t=s,s=o),s!==o?(t.length>_t?(l=t.charAt(_t),_t++):(l=o,0===Lt&&Vt(Nt)),l!==o?(Jt=n,i=Ot(l),n=i):(_t=n,n=o)):(_t=n,n=o)):(_t=n,n=o)):(_t=n,n=o);if(n!==o)for(;n!==o;)r.push(n),n=_t,i=_t,Lt++,a=ee(),Lt--,a===o?i=void 0:(_t=i,i=o),i!==o?(a=_t,Lt++,s=ne(),Lt--,s===o?a=void 0:(_t=a,a=o),a!==o?(s=_t,Lt++,96===t.charCodeAt(_t)?(l=St,_t++):(l=o,0===Lt&&Vt(It)),Lt--,l===o?s=void 0:(_t=s,s=o),s!==o?(t.length>_t?(l=t.charAt(_t),_t++):(l=o,0===Lt&&Vt(Nt)),l!==o?(Jt=n,i=Ot(l),n=i):(_t=n,n=o)):(_t=n,n=o)):(_t=n,n=o)):(_t=n,n=o);else r=o;r!==o&&(Jt=e,r=Mt(r));return e=r}()),e}function ee(){var e,r,n,i;if(e=_t,91===t.charCodeAt(_t)?(r=c,_t++):(r=o,0===Lt&&Vt(u)),r!==o){for(n=[],60===t.charCodeAt(_t)?(i=h,_t++):(i=o,0===Lt&&Vt(p));i!==o;)n.push(i),60===t.charCodeAt(_t)?(i=h,_t++):(i=o,0===Lt&&Vt(p));n!==o?(Jt=_t,(i=(i=f(r,n))?void 0:o)!==o?(Jt=e,e=r=d(r,n)):(_t=e,e=o)):(_t=e,e=o)}else _t=e,e=o;return e}function re(){var e;return 46===t.charCodeAt(_t)?(e=Ct,_t++):(e=o,0===Lt&&Vt(wt)),e===o&&(e=At),e}function ne(){var e,r,n;for(e=_t,r=[],62===t.charCodeAt(_t)?(n=D,_t++):(n=o,0===Lt&&Vt(G));n!==o;)r.push(n),62===t.charCodeAt(_t)?(n=D,_t++):(n=o,0===Lt&&Vt(G));return r!==o?(93===t.charCodeAt(_t)?(n=Et,_t++):(n=o,0===Lt&&Vt(Tt)),n!==o?(Jt=_t,(kt(r,n)?void 0:o)!==o?(Jt=e,e=r=$t(r,n)):(_t=e,e=o)):(_t=e,e=o)):(_t=e,e=o),e===o&&(e=_t,(r=oe())!==o&&(Jt=e,r=jt()),e=r),e}function oe(){var e,r;return e=_t,Lt++,t.length>_t?(r=t.charAt(_t),_t++):(r=o,0===Lt&&Vt(Nt)),Lt--,r===o?e=void 0:(_t=e,e=o),e}function ie(){var e,r,n;for(e=_t,r=[],62===t.charCodeAt(_t)?(n=D,_t++):(n=o,0===Lt&&Vt(G));n!==o;)r.push(n),62===t.charCodeAt(_t)?(n=D,_t++):(n=o,0===Lt&&Vt(G));return r!==o?(96===t.charCodeAt(_t)?(n=St,_t++):(n=o,0===Lt&&Vt(It)),n!==o?(Jt=_t,(zt(r,n)?void 0:o)!==o?(Jt=e,e=r=$t(r,n)):(_t=e,e=o)):(_t=e,e=o)):(_t=e,e=o),e===o&&(e=_t,(r=oe())!==o&&(Jt=e,r=jt()),e=r),e}var ae,se=[];if((r=a())!==o&&_t===t.length)return r;throw r!==o&&_t<t.length&&Vt({type:"end"}),Wt(Yt,Ut<t.length?t.charAt(Ut):null,Ut<t.length?Qt(Ut,Ut+1):Qt(Ut,Ut))}}},function(t,e,r){var{Node:n,TextNode:o,HtmlNode:i,ErrorNode:a,ElementClass:s,Element:l}=r(0),{Root:c,classMap:u}=r(6),h=r(1);t.exports={ast2nt:function(t,e){e||(e={}),e.tags||(e.tags={});var r=h.tags(u,e.tags);for(var n in r)!1===r[n]&&delete r[n];var i=(t,n)=>{if("root"==t.type)return c.instantiate({code:t.code,children:t.children.map(t=>i(t,!1)),options:e});if("text"==t.type)return new o(t.text);if("error"==t.type)return new a({message:"[error]",code:t.text});if("element"==t.type){if(t.name in r){if(r[t.name].split){var s=(t,e)=>{if(0==e.length)return t.map(t=>i(t,!1));var r,n=e[e.length-1],o=[];(t=t.map(t=>"element"!=t.type||t.name!=n||t.children.length?t:{type:"delimiter"})).length&&"text"==t[0].type&&!t[0].text.trim()&&(t=t.slice(1)),t.length&&"delimiter"==t[0].type||t.unshift({type:"delimiter"});for(var a=0;a<t.length;a++)"delimiter"==t[a].type?(r&&o.push(r),r=[]):r.push(t[a]);return o.push(r),o.map(t=>s(t,e.slice(0,-1)))};return r[t.name].instantiate({code:t.code,children:s(t.children,r[t.name].split),options:e})}return r[t.name].instantiate({code:t.code,children:t.children.map(t=>i(t,!1)),options:e})}return new a({message:t.name?"Undefined tag name":"No tag name",code:t.code})}throw TypeError(t.type)};return i(t.root,!0)},Node:n,TextNode:o,HtmlNode:i,ErrorNode:a,ElementClass:s,Element:l}},function(t,e,r){var{TextNode:n,HtmlNode:o,ErrorNode:i,ElementClass:a,Element:s}=r(0),l=new a({name:"[root]",display:"container-block",render:t=>t.html(t.innerHtml)}),c={};function u(t){return t=t.trim(),/^\#/.test(t)?!!/^\#[^\s]*$/.test(t)&&t:/^(\/|\.\/|\.\.\/)/.test(t)?!!/^(\/|\.\/|\.\.\/)[^\s]*$/.test(t)&&t:(/^(http:\/\/|https:\/\/|ftp:\/\/)/.test(t)||(t="http://"+t),!!/^(http:\/\/|https:\/\/|ftp:\/\/)[a-z0-9]+(-+[a-z0-9]+)*(\.[a-z0-9]+(-+[a-z0-9]+)*)+\.?(:[0-9]{1,5})?(\/[^\s]*)?$/.test(t)&&t)}c.comment=new a({name:"comment",display:"inline",render:t=>t.text("")}),c.entity=new a({name:"entity",display:"inline",render:t=>t.innerIsText?/^([a-z]{1,50}|#[0-9]{1,10}|#x[0-9a-f]{1,10})$/i.test(t.innerText)?t.html(`&${t.innerText};`):t.error("Invalid value"):t.error("Non-text input")}),["b","code","i","u","sup","sub"].forEach(t=>c[t]=new a({name:t,display:"inline",render:e=>e.html(`<${t}>${e.innerHtml}</${t}>`)})),["h1","h2","h3","h4","h5","h6","p"].forEach(t=>c[t]=new a({name:t,display:"leaf-block",render:e=>e.html(`<${t}>${e.innerHtml}</${t}>`)})),["blockquote"].forEach(t=>c[t]=new a({name:t,display:"container-block",render:e=>e.html(`<${t}>${e.innerHtml}</${t}>`)})),["br"].forEach(t=>c[t]=new a({name:t,display:"inline",render:e=>e.html(`<${t}>${e.innerHtml}`)})),["hr"].forEach(t=>c[t]=new a({name:t,display:"leaf-block",render:e=>e.html(`<${t}>${e.innerHtml}`)})),["ul","ol"].forEach(t=>{c[t]=new a({name:t,display:"container-block",split:"*",render:e=>e.html(`<${t}>`+e.innerHtml.map(t=>`<li>${t}</li>`).join("")+`</${t}>`)})}),c.table=new a({name:"table",display:"container-block",split:["*","**"],render:t=>t.html("<table>"+t.innerHtml.map(t=>"<tr>"+t.map(t=>`<td>${t}</td>`).join("")+"</tr>").join("")+"</table>")}),c.blockcode=new a({name:"blockcode",display:"leaf-block",render:t=>{var e=t.innerHtml.replace(/(^[ \t]*(\r\n|\r|\n))|((\r\n|\r|\n)[ \t]*$)/g,"");return t.html(`<pre><code>${e}\n</code></pre>`)}}),c.bi=new a({name:"bi",display:"inline",render:t=>t.html(`<i><b>${t.innerHtml}</b></i>`)}),c.link=new a({name:"link",display:"inline",render:t=>{if(!t.innerIsText)return t.error("Non-text input");var e=u(t.innerText);if(!e)return t.error("Invalid URL");var r=t.escapeHtml(e);return t.html(`<a href="${r}">${r}</a>`)}}),c.img=new a({name:"img",display:"leaf-block",render:t=>{if(!t.innerIsText)return t.error("Non-text input");var e=u(t.innerText);if(!e)return t.error("Invalid URL");var r=t.escapeHtml(e);return t.html(`<div class="m42kup-img-block"><img src="${r}"></div>`)}}),["squote","dquote"].forEach(t=>c[t]=new a({name:t,display:"inline",render:e=>{var r={squote:["‘","’"],dquote:["“","”"]};return e.html(`${r[t][0]}${e.innerHtml}${r[t][1]}`)}})),c.highlight=new a({name:"highlight",display:"leaf-block",render:(t,e)=>{if(!e.hljs)return t.error("Element not implemented (options.highlight not given)");if(!t.innerIsText)return t.error("Non-text input");var r=t.innerText.replace(/(^[ \t]*(\r\n|\r|\n))|((\r\n|\r|\n)[ \t]*$)/g,""),n=e.hljs.highlightAuto(r,["apache","bash","coffeescript","cpp","cs","css","diff","http","ini","java","javascript","json","makefile","xml","markdown","nginx","objectivec","perl","php","python","ruby","sql"]).value;return t.html(`<pre class="hljs"><code>${n}\n</code></pre>`)}}),c.math=new a({name:"math",display:"inline",render:(t,e)=>{if(!e.katex)return t.error("Element not implemented (options.katex not given)");if(!t.innerIsText)return t.error("Non-text input");var r=e.katex.renderToString(t.innerText,{throwOnError:!1,displayMode:!1,strict:"error"});return t.html(r)}}),c.displaymath=new a({name:"displaymath",display:"leaf-block",render:(t,e)=>{if(!e.katex)return t.error("Element not implemented (options.katex not given)");if(!t.innerIsText)return t.error("Non-text input");var r=e.katex.renderToString(t.innerText,{throwOnError:!1,displayMode:!0,strict:"error"});return t.html(r)}});var h={'"':"dquote",$:"math",$$:"displaymath","%":"comment","&":"entity","'":"squote","*":"i","**":"b","***":"bi",";":"code",";;":"blockcode",";;;":"highlight","=":"h1","==":"h2","===":"h3","====":"h4","=====":"h5","======":"h6",">":"blockquote","\\":"br","^":"sup",_:"sub","~":"link","~~":"img"};for(var p in h){if(!c[h[p]])throw TypeError("aliasing failed");c[p]=c[h[p]]}t.exports={Root:l,classMap:c}},function(t,e){var r=t=>(t+"").replace(/[&<>"']/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[t]);function n(t){return`<span class="m42kup-hl-${t.type}">${t.html||r(t.text)}</span>`}t.exports={pt2hl:function(t){return function t(e){for(var r="",o=0;o<e.length;o++)switch(e[o].type){case"text":r+=n({type:"tx",text:e[o].text});break;case"element":var i=n({type:"lbm",text:e[o].lbm})+n({type:"tn",text:e[o].name})+n({type:"sp",text:e[o].separator})+t(e[o].children)+n({type:"rbm",text:e[o].rbm});r+=n({type:"elem",html:i});break;case"verbatim":i=n({type:"lvm",text:e[o].lvm+e[o].separator})+n({type:"text",text:e[o].child.text})+n({type:"rvm",text:e[o].rvm});r+=n({type:"verb",html:i});break;default:throw new TypeError(`Unknown type: ${e[o].type}`)}return r}(t.root.children)}}}]);