{"version":3,"sources":["webpack://m42kup/webpack/universalModuleDefinition","webpack://m42kup/webpack/bootstrap","webpack://m42kup/./src/renderer/nodes/Node.ts","webpack://m42kup/./src/renderer/nodes/Element.ts","webpack://m42kup/./src/renderer/nodes/ElementClass.ts","webpack://m42kup/./src/renderer/nodes/ErrorNode.ts","webpack://m42kup/./src/renderer/nodes/escapeHtml.ts","webpack://m42kup/./src/renderer/nodes/HtmlNode.ts","webpack://m42kup/./src/renderer/nodes/TextNode.ts","webpack://m42kup/./src/cascade.ts","webpack://m42kup/./src/entry.ts","webpack://m42kup/./src/parser.ts","webpack://m42kup/./dist/peg.js","webpack://m42kup/./src/renderer/index.ts","webpack://m42kup/./src/renderer/elements/default.ts","webpack://m42kup/./src/highlighter.ts","webpack://m42kup/./src/codemirror.ts"],"names":["webpackUniversalModuleDefinition","root","factory","exports","module","define","amd","self","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","Node","toIndentedString","isElementDisplayType","obj","includes","Element","display","renderer","split","code","attributes","children","options","super","innerIsRendered","outerIsRendered","TypeError","Function","Array","foo","every","len","length","recurse","forEach","grandchildren","child","render","li","le","map","outerIsText","Error","e","iit","text","outerText","join","it","trim","filter","toHtml","outerHtml","paragraphs","commit","push","add","renderInner","message","html","level","a","k","JSON","stringify","repeat","b","ElementClass","el","ErrorNode","escapeHtml","replace","'","HtmlNode","TextNode","shallow","o2","copyOptions","tags","hljs","katex","o1","globalOptions","m42kup","parser","highlighter","ast2nt","ast","input","pt","input2pt","pt2ast","highlight","pt2hl","cascade","cascadeOptions","set","setOptions","addCodeMirrorMode","parse","type","_type","content","attribute","substring","location","start","offset","end","reduce","peg$SyntaxError","expected","found","captureStackTrace","peg$subclass","parent","ctor","constructor","buildMessage","DESCRIBE_EXPECTATION_FNS","literal","expectation","literalEscape","escapedParts","parts","classEscape","inverted","any","other","description","hex","ch","charCodeAt","toString","toUpperCase","describeExpected","j","descriptions","sort","slice","describeFound","SyntaxError","peg$parse","peg$result","peg$FAILED","peg$startRuleFunctions","peg$parsestart","peg$startRuleFunction","peg$c3","peg$literalExpectation","peg$c4","peg$c5","peg$c9","peg$c10","peg$c11","peg$c12","peg$c13","peg$c14","peg$c15","peg$c16","peg$c17","peg$c18","peg$c19","peg$c20","peg$c21","peg$c22","peg$c23","peg$c24","peg$c25","peg$c26","peg$c27","peg$c28","peg$c29","peg$c30","peg$c31","peg$c32","peg$c33","peg$c34","peg$c35","peg$c36","peg$c37","peg$c38","peg$c39","peg$c40","peg$c41","peg$c42","peg$c43","peg$c44","peg$c45","peg$c46","peg$c47","peg$c48","peg$c49","peg$c50","peg$c51","peg$c52","peg$c53","peg$c54","peg$c55","peg$c56","peg$c57","peg$c58","peg$c59","peg$c60","peg$classExpectation","peg$c61","peg$c62","peg$c63","peg$c64","peg$c65","peg$c67","peg$c69","peg$c70","peg$c71","peg$c72","peg$c74","left","peg$c75","peg$c76","peg$c77","peg$c79","concat","peg$c80","whitespace","peg$c81","error","peg$c84","peg$c85","peg$c88","peg$c93","peg$c94","peg$c96","peg$c101","peg$c102","peg$currPos","peg$savedPos","peg$posDetailsCache","line","column","peg$maxFailPos","peg$maxFailExpected","peg$silentFails","startRule","peg$computeLocation","ignoreCase","peg$computePosDetails","pos","details","startPos","endPos","startPosDetails","endPosDetails","peg$fail","peg$buildStructuredError","s0","s1","peg$parsethings","peg$parsething","peg$parseelement","s2","s3","s4","s5","peg$parselbm_push","peg$parselbm","bstack","peg$parsetag_name","s6","s7","s8","s9","test","charAt","peg$parseattributes","s10","s11","s12","peg$parseEOF","peg$parse__","peg$parserbm","right","separator","peg$parserbm_pop","pop","lbm","rbm","peg$parseverbatim","peg$parselvm","vlevel","peg$parseverbatim_separator","peg$parseverbatim_text","peg$parservm","lvm","rvm","peg$parsetext","peg$c7","peg$c90","peg$c100","rootClass","innerHtml","tagNameMap","default","tree","instantiate","recurseSplit","list","unshift","normalizeUrl","url","comment","entity","innerIsText","innerText","getAttribute","h","table","hh","fill","blockcode","trimmed","bi","link","href","htmlUrl","img","quotes","squote","normal","angle","corner","dquote","highlighted","commonLangs","lang","highlightAuto","math","rendered","renderToString","throwOnError","displayMode","strict","displaymath","aliases","makeHtml","fragment","ret","tmp","q","tmp2","STATE_ATTRIBUTE_DQUOTE","STATE_ATTRIBUTE_SQUOTE","CodeMirror","token","stream","state","levels","lvmLevel","rvmString","skipTo","match","skipToEnd","peek","status","lbmLevel","rbmString","next","backUp","defineMode","config","parserConfig","startState","baseColumn"],"mappings":"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","file":"m42kup.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"m42kup\"] = factory();\n\telse\n\t\troot[\"m42kup\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n","export default abstract class Node {\n\n\tpublic toString() {\n\t\treturn this.toIndentedString(0);\n\t};\n\n\tpublic abstract toIndentedString(level: number): string;\n}","import { ElementClassArgumentType, ElementClassInstantiateArgumentType } from \"./ElementClass\";\nimport ErrorNode from \"./ErrorNode\";\nimport escapeHtml from \"./escapeHtml\";\nimport HtmlNode from \"./HtmlNode\";\nimport Node from \"./Node\";\nimport TextNode from \"./TextNode\";\n\ninterface ElementArgumentType\n\textends ElementClassArgumentType, ElementClassInstantiateArgumentType {\n}\n\nexport type Nested<T> = T | Nested<T>[];\n\nexport type ElementDisplayType = 'inline' | 'leaf-block' | 'container-block';\n\nexport function isElementDisplayType(obj: string): obj is ElementDisplayType {\n\treturn ['inline', 'leaf-block', 'container-block'].includes(obj);\n}\n\nexport default class Element extends Node {\n\n\tpublic readonly name: NonNullable<string>;\n\tpublic readonly display: ElementDisplayType;\n\tprivate readonly renderer: (el: Element, options) => Node;\n\tpublic readonly split: string[];\n\n\tpublic readonly code: string;\n\tpublic readonly attributes: any[];\n\tpublic readonly children: Nested<Node>[];\n\tpublic readonly options: any;\n\n\tprivate innerIsRendered = false;\n\t#innerIsText: Nested<boolean>;\n\t#innerText: Nested<string>;\n\t#innerHtml: Nested<string>;\n\n\tprivate outerIsRendered = false;\n\t#rendered: Node;\n\t#outerIsText: boolean;\n\t#outerText: string;\n\t#isError: boolean;\n\t#errorMessage: string;\n\t#outerHtml: string;\n\n\tconstructor ({name, display, renderer, split, code, attributes, children, options}: ElementArgumentType) {\n\t\tsuper();\n\n\t\tif (!name) throw TypeError('You give arg0 a bad name');\n\t\tif (!isElementDisplayType(display))\n\t\t\tthrow TypeError('arg0.display should be one of \"inline\", \"leaf-block\", or \"container-block\".');\n\t\tif (!(renderer instanceof Function))\n\t\t\tthrow TypeError('arg0.render should be a function');\n\t\tif (typeof code != 'string') throw TypeError('You give arg0 a bad code');\n\t\tif (!(attributes instanceof Array)) throw TypeError('attributes should be an array');\n\t\n\t\t(() => {\n\t\t\tvar foo = c => c instanceof Element\n\t\t\t\t|| c instanceof TextNode\n\t\t\t\t|| c instanceof ErrorNode\n\t\t\t\t|| ((c instanceof Array) && c.every(foo));\n\t\n\t\t\tif (!children.every(foo))\n\t\t\t\tthrow TypeError('All arg0.children should either be an Element, a TextNode, or an ErrorNode');\n\t\t})();\n\t\n\t\tif (!split) split = [];\n\t\tif (typeof split == 'string') split = [split];\n\n\t\tif (!(split instanceof Array))\n\t\t\tthrow TypeError('arg0.split should be either undefined, a string, or an array');\n\n\t\tthis.name = name;\n\t\tthis.display = display;\n\t\tthis.renderer = renderer;\n\t\tthis.split = split;\n\t\tthis.code = code;\n\t\tthis.attributes = attributes;\n\t\tthis.children = children;\n\t\tthis.options = options;\n\t}\n\n\tprivate renderInner() {\n\t\tif (this.innerIsRendered) return;\n\n\t\t// Render children first\n\t\t(() => {\n\t\t\tvar len = this.split ? this.split.length : 0;\n\n\t\t\t(function recurse(children: Nested<Node>, len: number) {\n\t\t\t\tif (len > 0) {\n\t\t\t\t\treturn (children as Nested<Node>[]).forEach(grandchildren => {\n\t\t\t\t\t\trecurse(grandchildren, len - 1);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t(children as Node[]).forEach(child => {\n\t\t\t\t\tif (child instanceof Element) {\n\t\t\t\t\t\tchild.render();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})(this.children, len);\n\t\t})();\n\n\t\tthis.#innerIsText = (() => {\n\t\t\tvar len = this.split ? this.split.length : 0;\n\t\n\t\t\tvar foo = (li: Nested<Node>, le: number) => {\n\t\t\t\tif (le > 0)\n\t\t\t\t\treturn (li as Nested<Node>[]).map(l => foo(l, le - 1));\n\t\t\t\t\n\t\t\t\treturn (li as Node[]).map(c => {\n\t\t\t\t\tif (c instanceof TextNode) return true;\n\t\t\t\t\tif (c instanceof ErrorNode) return false;\n\t\t\t\t\tif (c instanceof Element) return c.outerIsText;\n\t\t\t\t\tthrow Error('wut');\n\t\t\t\t}).every(e => e);\n\t\t\t};\n\t\n\t\t\treturn foo(this.children, len);\n\t\t})();\n\t\n\t\tthis.#innerText = (() => {\n\t\t\tvar len = this.split ? this.split.length : 0;\n\t\n\t\t\tvar foo = (li, le, iit) => {\n\t\t\t\tif (le > 0)\n\t\t\t\t\treturn li.map((l, i) => foo(l, le - 1, iit[i]));\n\t\t\t\t\n\t\t\t\treturn iit\n\t\t\t\t\t? li.map((c: any) => {\n\t\t\t\t\t\tif (c instanceof TextNode) return c.text;\n\t\t\t\t\t\treturn c.outerText;\n\t\t\t\t\t}).join('')\n\t\t\t\t\t: null;\n\t\t\t};\n\t\n\t\t\treturn foo(this.children, len, this.#innerIsText);\n\t\t})();\n\t\n\t\tthis.#innerHtml = (() => {\n\t\t\tvar len = this.split ? this.split.length : 0;\n\t\n\t\t\tvar foo = (li, le, iit, it) => {\n\t\t\t\tif (le > 0)\n\t\t\t\t\treturn li.map((l, i) => foo(l, le - 1, iit[i], it[i]));\n\t\n\t\t\t\tif (iit) {\n\t\t\t\t\tif (it.trim() && this.display == 'container-block') {\n\t\t\t\t\t\treturn it\n\t\t\t\t\t\t\t// ?: is important\n\t\t\t\t\t\t\t.split(/(?:\\r\\n[ \\t]*){2,}|(?:\\r[ \\t]*){2,}|(?:\\n[ \\t]*){2,}/)\n\t\t\t\t\t\t\t.filter(text => !!text.trim())\n\t\t\t\t\t\t\t.map(escapeHtml)\n\t\t\t\t\t\t\t.map(s => `<p>${s}</p>`).join('');\n\t\t\t\t\t}\n\t\n\t\t\t\t\treturn escapeHtml(it);\n\t\t\t\t}\n\t\n\t\t\t\tif (this.display != 'container-block') {\n\t\t\t\t\t// join as HTML\n\t\t\t\t\treturn li.map(c => {\n\t\t\t\t\t\tif (c instanceof TextNode)\n\t\t\t\t\t\t\treturn escapeHtml(c.text);\n\t\t\t\t\t\tif (c instanceof ErrorNode)\n\t\t\t\t\t\t\treturn c.toHtml();\n\t\t\t\t\t\treturn c.outerHtml;\n\t\t\t\t\t}).join('');\n\t\t\t\t}\n\t\n\t\t\t\tvar paragraphs = [], p = [];\n\t\n\t\t\t\tvar commit = () => {\n\t\t\t\t\tif (p.length) {\n\t\t\t\t\t\tparagraphs.push(p);\n\t\t\t\t\t\tp = [];\n\t\t\t\t\t}\n\t\t\t\t};\n\t\n\t\t\t\tvar add = e => p.push(e);\n\t\n\t\t\t\tli.forEach(c => {\n\t\t\t\t\tif (c instanceof TextNode) {\n\t\t\t\t\t\t// ?: is important\n\t\t\t\t\t\tvar split = c.text.split(/(?:\\r\\n[ \\t]*){2,}|(?:\\r[ \\t]*){2,}|(?:\\n[ \\t]*){2,}/);\n\t\t\t\t\t\tif (split.length < 2) {\n\t\t\t\t\t\t\treturn add(c);\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\tsplit.forEach((s, i) => {\n\t\t\t\t\t\t\tif (s.trim()) add(this.text(s));\n\t\n\t\t\t\t\t\t\tif (i < split.length - 1) commit();\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (c instanceof ErrorNode) {\n\t\t\t\t\t\t// treat errors like inlines\n\t\t\t\t\t\tadd(c);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// blocks interrupt paragraphs\n\t\t\t\t\t\tif (c.display != 'inline') {\n\t\t\t\t\t\t\tcommit();\n\t\t\t\t\t\t\t// direct push to list differentiates non-paragraphs\n\t\t\t\t\t\t\tparagraphs.push(c);\n\t\t\t\t\t\t\tcommit();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// inlines do not interrupt paragraphs\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tadd(c);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\n\t\t\t\tcommit();\n\t\n\t\t\t\treturn paragraphs.map(p => {\n\t\t\t\t\tif (p instanceof Array) {\n\t\t\t\t\t\treturn '<p>' + p.map(n => {\n\t\t\t\t\t\t\tif (n instanceof TextNode)\n\t\t\t\t\t\t\t\treturn escapeHtml(n.text);\n\t\t\t\t\t\t\tif (n instanceof ErrorNode)\n\t\t\t\t\t\t\t\treturn n.toHtml();\n\t\t\t\t\t\t\treturn n.outerHtml;\n\t\t\t\t\t\t}).join('') + '</p>';\n\t\t\t\t\t}\n\t\t\t\t\t// non-paragraphs\n\t\t\t\t\treturn p.outerHtml;\n\t\t\t\t}).join('');\n\t\t\t};\n\t\n\t\t\treturn foo(this.children, len, this.#innerIsText, this.#innerText);\n\t\t})();\n\n\t\tthis.innerIsRendered = true;\n\t}\n\n\tpublic get innerIsText() {\n\t\tif (!this.innerIsRendered) {\n\t\t\tthrow Error('Cannot access Element#innerIsText before it is initialized');\n\t\t}\n\n\t\treturn this.#innerIsText;\n\t}\n\n\tpublic get innerText() {\n\t\tif (!this.innerIsRendered) {\n\t\t\tthrow Error('Cannot access Element#innerText before it is initialized');\n\t\t}\n\n\t\treturn this.#innerText;\n\t}\n\n\tpublic get innerHtml() {\n\t\tif (!this.innerIsRendered) {\n\t\t\tthrow Error('Cannot access Element#innerHtml before it is initialized');\n\t\t}\n\n\t\treturn this.#innerHtml;\n\t}\n\n\tpublic render(): Node {\n\t\tif (this.outerIsRendered) return this.#rendered;\n\n\t\tthis.renderInner();\n\t\tvar r = this.renderer(this, this.options);\n\n\t\tthis.#rendered = r;\n\t\tthis.#outerIsText = r instanceof TextNode;\n\t\tthis.#outerText = r instanceof TextNode ? r.text : null;\n\t\tthis.#isError = r instanceof ErrorNode;\n\t\tthis.#errorMessage = r instanceof ErrorNode ? r.message : null;\n\t\n\t\tif (this.#outerIsText) {\n\t\t\tthis.#outerHtml = escapeHtml(this.#outerText);\n\t\t} else if (r instanceof HtmlNode) {\n\t\t\tthis.#outerHtml = r.html;\n\t\t} else if (r instanceof ErrorNode) {\n\t\t\tthis.#outerHtml = r.toHtml();\n\t\t} else {\n\t\t\tthrow TypeError('Render output should be one of TextNode, HtmlNode, or ErrorNode');\n\t\t}\n\n\t\tthis.outerIsRendered = true;\n\t}\n\n\tpublic get outerIsText() {\n\t\tif (!this.outerIsRendered) {\n\t\t\tthrow Error('Cannot access Element#outerIsText before it is initialized');\n\t\t}\n\n\t\treturn this.#outerIsText;\n\t}\n\n\tpublic get outerText() {\n\t\tif (!this.outerIsRendered) {\n\t\t\tthrow Error('Cannot access Element#outerText before it is initialized');\n\t\t}\n\n\t\treturn this.#outerText;\n\t}\n\n\tpublic get outerHtml() {\n\t\tif (!this.outerIsRendered) {\n\t\t\tthrow Error('Cannot access Element#outerHtml before it is initialized');\n\t\t}\n\n\t\treturn this.#outerHtml;\n\t}\n\n\tpublic get isError() {\n\t\tif (!this.outerIsRendered) {\n\t\t\tthrow Error('Cannot access Element#isError before it is initialized');\n\t\t}\n\n\t\treturn this.#isError;\n\t}\n\n\tpublic get errorMessage() {\n\t\tif (!this.outerIsRendered) {\n\t\t\tthrow Error('Cannot access Element#errorMessage before it is initialized');\n\t\t}\n\n\t\treturn this.#errorMessage;\n\t}\n\n\tpublic text(text: string) {\n\t\treturn new TextNode(text);\n\t};\n\t\n\tpublic html(html: string) {\n\t\treturn new HtmlNode({html, display: this.display});\n\t};\n\t\n\tpublic error(message: string) {\n\t\treturn new ErrorNode({\n\t\t\tmessage: `[${this.name}]: ${message}`,\n\t\t\tcode: this.code\n\t\t});\n\t};\n\t\n\tpublic getAttribute(name: string) {\n\t\tfor (var i = 0; i < this.attributes.length; i++) {\n\t\t\tif (this.attributes[i].name == name)\n\t\t\t\treturn this.attributes[i].value;\n\t\t}\n\t\n\t\treturn null;\n\t};\n\n\tpublic readonly code: string;\n\tpublic readonly attributes: any[];\n\tpublic readonly children: Nested<Node>[];\n\tpublic readonly options: any;\n\n\tprivate innerIsRendered = false;\n\t#innerIsText: Nested<boolean>;\n\t#innerText: Nested<string>;\n\t#innerHtml: Nested<string>;\n\n\tprivate outerIsRendered = false;\n\t#rendered: Node;\n\t#outerIsText: boolean;\n\t#outerText: string;\n\t#isError: boolean;\n\t#errorMessage: string;\n\t#outerHtml: string;\n\t\n\tpublic toIndentedString(level: number) {\n\t\tvar a = [\n\t\t\t'display', 'split',\n\t\t\t'code', 'attributes',\n\t\t\t// inner\n\t\t\t'innerIsText', 'innerText', 'innerHtml',\n\t\t\t// outer\n\t\t\t'outerIsText', 'outerText', 'outerHtml',\n\t\t\t'isError', 'errorMessage'\n\t\t].map(k => k + '='\n\t\t\t+ (typeof this[k] == 'string' || this[k] instanceof Array\n\t\t\t\t? JSON.stringify(this[k])\n\t\t\t\t: this[k] + '')\n\t\t).join('\\n' + '\\t'.repeat(level + 1));\n\t\n\t\tvar b = (function recurse(children, level) {\n\t\t\treturn children.map(c => {\n\t\t\t\tif (c instanceof Array) {\n\t\t\t\t\treturn [\n\t\t\t\t\t\t'[',\n\t\t\t\t\t\t'\\t' + recurse(c, level + 1),\n\t\t\t\t\t\t']'\n\t\t\t\t\t].join('\\n' + '\\t'.repeat(level));\n\t\t\t\t}\n\n\t\t\t\treturn c.toIndentedString(level);\n\t\t\t}).join(',\\n' + '\\t'.repeat(level));\n\t\t})(this.children, level + 1);\n\t\n\t\treturn `Element[${JSON.stringify(this.name)}](\\n`\n\t\t\t\t+ `${'\\t'.repeat(level + 1)}${a}\\n`\n\t\t\t+ `${'\\t'.repeat(level)}) {\\n`\n\t\t\t+ '\\t'.repeat(level + 1) + `${b}\\n`\n\t\t\t+ `${'\\t'.repeat(level)}}`;\n\t};\n\n\tpublic escapeHtml(s: string) {\n\t\treturn escapeHtml(s);\n\t}\n}","import Element, { ElementDisplayType, isElementDisplayType, Nested } from \"./Element\";\nimport Node from \"./Node\";\n\nexport interface ElementClassArgumentType {\n\tname: NonNullable<string>;\n\tdisplay: ElementDisplayType;\n\trenderer: (el: Element, options) => Node;\n\tsplit?: string | any[];\n}\n\nexport interface ElementClassInstantiateArgumentType {\n\tcode: string;\n\tattributes: any[];\n\tchildren: Nested<Node>[];\n\toptions: any;\n}\n\nexport default class ElementClass {\n\n\tpublic readonly name: NonNullable<string>;\n\tpublic readonly display: ElementDisplayType;\n\tpublic readonly renderer: (el: Element, options) => Node;\n\tpublic readonly split: string[];\n\n\tconstructor ({name, display, renderer, split}: ElementClassArgumentType) {\n\t\tif (!name) throw TypeError('You give arg0 a bad name');\n\t\tif (!isElementDisplayType(display))\n\t\t\tthrow TypeError('arg0.display should be one of \"inline\", \"leaf-block\", or \"container-block\".');\n\t\tif (!(renderer instanceof Function))\n\t\t\tthrow TypeError('arg0.render should be a function');\n\n\t\t[this.name, this.display] = [name, display];\n\n\t\tthis.renderer = (el, options) => {\n\t\t\tif (!(el instanceof Element))\n\t\t\t\tthrow TypeError('arg0 should be an instance of m42kup.renderer.Element');\n\t\t\treturn renderer(el, options);\n\t\t};\n\n\t\tif (!split) split = [];\n\t\tif (typeof split == 'string') split = [split];\n\n\t\tif (!(split instanceof Array))\n\t\t\tthrow TypeError('arg0.split should be either undefined, a string, or an array');\n\n\t\tthis.split = split;\n\t}\n\n\tpublic instantiate({code, attributes, children, options}: ElementClassInstantiateArgumentType) {\n\t\treturn new Element({\n\t\t\tname: this.name,\n\t\t\tdisplay: this.display,\n\t\t\trenderer: this.renderer,\n\t\t\tsplit: this.split,\n\t\t\tcode,\n\t\t\tattributes,\n\t\t\tchildren,\n\t\t\toptions\n\t\t});\n\t};\n}","import escapeHtml from \"./escapeHtml\";\nimport Node from \"./Node\";\n\nexport default class ErrorNode extends Node {\n\n\tpublic readonly message: string;\n\tpublic readonly code: string;\n\n\tconstructor ({message, code}) {\n\t\tsuper();\n\n\t\tif (typeof message != 'string')\n\t\t\tthrow TypeError('message not string');\n\n\t\tif (typeof code != 'string')\n\t\t\tthrow TypeError('code not string');\n\n\t\tthis.message = message;\n\t\tthis.code = code;\n\t}\n\n\tpublic toHtml() {\n\t\treturn `<code class=\"m42kup-error\" title=\"Error: ${escapeHtml(this.message)}\">${escapeHtml(this.code)}</code>`;\n\t};\n\t\n\tpublic toIndentedString(level: number) {\n\t\tvar a = ['message', 'code'].map(k =>\n\t\t\tk + '=' + JSON.stringify(this[k])).join(' ');\n\t\treturn `Error(${a})`;\n\t};\n}","export default function escapeHtml(s: string) {\n\treturn (s + '').replace(/[&<>\"']/g, m => ({\n\t\t'&': '&amp;', '<': '&lt;', '>': '&gt;',\n\t\t'\"': '&quot;', '\\'': '&#39;'\n\t})[m]);\n}","import { ElementDisplayType, isElementDisplayType } from \"./Element\";\nimport Node from \"./Node\";\n\n/**\n * the data part of TextNode and HtmlNode instances are intentionally\n * labeled differently, in order to prevent mistakenly\n * using unescaped text data as HTML data, which is an XSS\n * vulnerability.\n */\nexport default class HtmlNode extends Node {\n\n\tpublic readonly html: string;\n\tpublic readonly display: ElementDisplayType;\n\n\tconstructor ({html, display}) {\n\t\tsuper();\n\n\t\tif (typeof html != 'string')\n\t\t\tthrow TypeError('html not string');\n\n\t\tif (!isElementDisplayType(display))\n\t\t\tthrow TypeError('arg0.display should be one of \"inline\", \"leaf-block\", or \"container-block\".');\n\n\t\tthis.html = html;\n\t\tthis.display = display;\n\t}\n\t\n\tpublic toIndentedString(level: number) {\n\t\tvar a = ['display'].map(k =>\n\t\t\tk + '=' + JSON.stringify(this[k])).join(' ');\n\t\treturn `Html(${a}) {${JSON.stringify(this.html)}}`;\n\t};\n}","import Node from \"./Node\";\n\n/**\n * the data part of TextNode and HtmlNode instances are intentionally\n * labeled differently, in order to prevent mistakenly\n * using unescaped text data as HTML data, which is an XSS\n * vulnerability.\n */\nexport default class TextNode extends Node {\n\tpublic readonly text: string;\n\n\tconstructor (text: string) {\n\t\tsuper();\n\n\t\tif (typeof text != 'string')\n\t\t\tthrow TypeError('text not string');\n\n\t\tthis.text = text;\n\t}\n\n\tpublic toIndentedString(level: number) {\n\t\treturn `Text {${JSON.stringify(this.text)}}`;\n\t}\n}","function shallow(o) {\n\tvar o2 = {};\n\n\tfor (var k in o) o2[k] = o[k];\n\n\treturn o2;\n}\n\nfunction copyOptions(o) {\n\tvar o2: any = {};\n\tif (o.tags) o2.tags = shallow(o.tags);\n\tif (o.hljs) o2.hljs = o.hljs;\n\tif (o.katex) o2.katex = o.katex;\n\treturn o2;\n}\n\nfunction tags(o1, o2) {\n\to1 = shallow(o1);\n\t\n\tfor (var k in o2) {\n\t\to1[k] = o2[k];\n\t}\n\n\treturn o1;\n}\n\nfunction options(o1, o2) {\n\tif (typeof o1 != 'object'\n\t\t\t|| typeof o2 != 'object') {\n\t\tthrow TypeError('One of the options provided is not an object');\n\t}\n\n\to1 = copyOptions(o1);\n\t\n\tif (o2.tags) {\n\t\tif (!o1.tags) {\n\t\t\to1.tags = {};\n\t\t}\n\t\t\n\t\to1.tags = tags(o1.tags, o2.tags);\n\t}\n\n\tif (o2.hljs) o1.hljs = o2.hljs;\n\tif (o2.katex) o1.katex = o2.katex;\n\n\treturn o1;\n}\n\nexport default {\n\tcopyOptions,\n\ttags,\n\toptions\n};\n","import parser, { AstRootType } from './parser';\nimport renderer from './renderer';\nimport highlighter from './highlighter';\nimport cascade from './cascade';\nimport addCodeMirrorMode from './codemirror';\n\nvar globalOptions = {};\n\nfunction cascadeOptions(options) {\n\tif (typeof options != 'object')\n\t\tthrow TypeError('typeof options != \\'object\\'');\n\tglobalOptions = cascade.options(globalOptions, options);\n}\n\nfunction setOptions(options) {\n\tif (typeof options != 'object')\n\t\tthrow TypeError('typeof options != \\'object\\'');\n\tglobalOptions = options;\n}\n\nfunction ast2nt(ast: AstRootType, options) {\n\tif (!options) options = {};\n\tif (!options.tags) options.tags = {};\n\n\toptions = cascade.options(globalOptions, options);\n\n\tvar nt = renderer.ast2nt(ast, options);\n\n\treturn nt;\n}\n\nfunction render(input, options) {\n\tinput += '';\n\tif (!options) options = {};\n\tif (!options.tags) options.tags = {};\n\t\n\toptions = cascade.options(globalOptions, options);\n\n\tvar pt = parser.input2pt(input);\n\tvar ast = parser.pt2ast(pt);\n\tvar html = renderer.ast2nt(ast, options).outerHtml;\n\t\n\treturn html;\n}\n\nfunction highlight(input) {\n\tinput += '';\n\n\tvar pt = parser.input2pt(input);\n\tvar hl = highlighter.pt2hl(pt);\n\n\treturn hl;\n}\n\nvar m42kup = {\n\tparser,\n\trenderer,\n\thighlighter,\n\tast2nt,\n\trender,\n\thighlight,\n\tcascade: cascadeOptions,\n\tset: setOptions,\n\taddCodeMirrorMode\n};\n\nmodule.exports = m42kup;\n","import peg from '../dist/peg';\n\nexport interface AstRootType {\n\tinput: string;\n\troot: AstRootTypeInner;\n}\n\nexport interface AstRootTypeInner {\n\ttype: 'root';\n\tchildren: (AstElementType | AstTextType)[];\n\tcode: string;\n}\n\ninterface AstElementType {\n\ttype: 'element';\n\tname: string;\n\tattributes: ({\n\t\tname: string;\n\t\tvalue: string;\n\t})[];\n\tchildren: (AstElementType | AstTextType)[];\n\tcode: string;\n}\n\ninterface AstTextType {\n\ttype: 'text';\n\ttext: string;\n}\n\nexport type AstType = AstRootTypeInner | AstElementType | AstTextType;\n\nfunction input2pt(input) {\n\tvar pt = peg.parse(input);\n\tpt.input = input;\n\t\n\treturn pt;\n}\n\nfunction pt2ast(pt): AstRootType {\n\tvar input = pt.input;\n\n\tvar r = (function recurse(pt) {\n\t\tvar ast = pt.map(e => {\n\t\t\tswitch (e.type) {\n\t\t\t\tcase 'text':\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\ttext: e.text\n\t\t\t\t\t};\n\t\t\t\tcase 'verbatim':\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\ttext: e.child.text\n\t\t\t\t\t};\n\t\t\t\tcase 'element':\n\t\t\t\t\tvar attributes = e.attributes._type != 'parenthesis'\n\t\t\t\t\t\t? []\n\t\t\t\t\t\t: e.attributes.content.filter(({_type}) => _type == 'attribute')\n\t\t\t\t\t\t\t.map(({attribute}) => ({\n\t\t\t\t\t\t\t\tname: attribute[0],\n\t\t\t\t\t\t\t\tvalue: attribute[3]\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: 'element',\n\t\t\t\t\t\tname: e.name,\n\t\t\t\t\t\tattributes,\n\t\t\t\t\t\tcode: input.substring(e.location.start.offset, e.location.end.offset),\n\t\t\t\t\t\tchildren: recurse(e.children)\n\t\t\t\t\t};\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new TypeError(`Unknown type: ${e.type}`);\n\t\t\t}\n\t\t});\n\n\t\t// join text nodes & remove empty\n\t\tast = ast.reduce((l, r) => {\n\t\t\tif (r.type == 'text') {\n\t\t\t\tif (!r.text) return l;\n\t\t\t\tif (l.length && l[l.length - 1].type == 'text') {\n\t\t\t\t\tl[l.length - 1].text += r.text;\n\t\t\t\t\treturn l;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn l.push(r), l;\n\t\t}, []);\n\n\t\treturn ast;\n\t})(pt.root.children);\n\n\treturn {\n\t\tinput: pt.input,\n\t\troot: {\n\t\t\ttype: 'root',\n\t\t\tchildren: r,\n\t\t\tcode: input\n\t\t}\n\t};\n}\n\nexport default {\n\tinput2pt,\n\tpt2ast\n};","/*\n * Generated by PEG.js 0.10.0.\n *\n * http://pegjs.org/\n */\n\n\"use strict\";\n\nfunction peg$subclass(child, parent) {\n  function ctor() { this.constructor = child; }\n  ctor.prototype = parent.prototype;\n  child.prototype = new ctor();\n}\n\nfunction peg$SyntaxError(message, expected, found, location) {\n  this.message  = message;\n  this.expected = expected;\n  this.found    = found;\n  this.location = location;\n  this.name     = \"SyntaxError\";\n\n  if (typeof Error.captureStackTrace === \"function\") {\n    Error.captureStackTrace(this, peg$SyntaxError);\n  }\n}\n\npeg$subclass(peg$SyntaxError, Error);\n\npeg$SyntaxError.buildMessage = function(expected, found) {\n  var DESCRIBE_EXPECTATION_FNS = {\n        literal: function(expectation) {\n          return \"\\\"\" + literalEscape(expectation.text) + \"\\\"\";\n        },\n\n        \"class\": function(expectation) {\n          var escapedParts = \"\",\n              i;\n\n          for (i = 0; i < expectation.parts.length; i++) {\n            escapedParts += expectation.parts[i] instanceof Array\n              ? classEscape(expectation.parts[i][0]) + \"-\" + classEscape(expectation.parts[i][1])\n              : classEscape(expectation.parts[i]);\n          }\n\n          return \"[\" + (expectation.inverted ? \"^\" : \"\") + escapedParts + \"]\";\n        },\n\n        any: function(expectation) {\n          return \"any character\";\n        },\n\n        end: function(expectation) {\n          return \"end of input\";\n        },\n\n        other: function(expectation) {\n          return expectation.description;\n        }\n      };\n\n  function hex(ch) {\n    return ch.charCodeAt(0).toString(16).toUpperCase();\n  }\n\n  function literalEscape(s) {\n    return s\n      .replace(/\\\\/g, '\\\\\\\\')\n      .replace(/\"/g,  '\\\\\"')\n      .replace(/\\0/g, '\\\\0')\n      .replace(/\\t/g, '\\\\t')\n      .replace(/\\n/g, '\\\\n')\n      .replace(/\\r/g, '\\\\r')\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });\n  }\n\n  function classEscape(s) {\n    return s\n      .replace(/\\\\/g, '\\\\\\\\')\n      .replace(/\\]/g, '\\\\]')\n      .replace(/\\^/g, '\\\\^')\n      .replace(/-/g,  '\\\\-')\n      .replace(/\\0/g, '\\\\0')\n      .replace(/\\t/g, '\\\\t')\n      .replace(/\\n/g, '\\\\n')\n      .replace(/\\r/g, '\\\\r')\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });\n  }\n\n  function describeExpectation(expectation) {\n    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);\n  }\n\n  function describeExpected(expected) {\n    var descriptions = new Array(expected.length),\n        i, j;\n\n    for (i = 0; i < expected.length; i++) {\n      descriptions[i] = describeExpectation(expected[i]);\n    }\n\n    descriptions.sort();\n\n    if (descriptions.length > 0) {\n      for (i = 1, j = 1; i < descriptions.length; i++) {\n        if (descriptions[i - 1] !== descriptions[i]) {\n          descriptions[j] = descriptions[i];\n          j++;\n        }\n      }\n      descriptions.length = j;\n    }\n\n    switch (descriptions.length) {\n      case 1:\n        return descriptions[0];\n\n      case 2:\n        return descriptions[0] + \" or \" + descriptions[1];\n\n      default:\n        return descriptions.slice(0, -1).join(\", \")\n          + \", or \"\n          + descriptions[descriptions.length - 1];\n    }\n  }\n\n  function describeFound(found) {\n    return found ? \"\\\"\" + literalEscape(found) + \"\\\"\" : \"end of input\";\n  }\n\n  return \"Expected \" + describeExpected(expected) + \" but \" + describeFound(found) + \" found.\";\n};\n\nfunction peg$parse(input, options) {\n  options = options !== void 0 ? options : {};\n\n  var peg$FAILED = {},\n\n      peg$startRuleFunctions = { start: peg$parsestart },\n      peg$startRuleFunction  = peg$parsestart,\n\n      peg$c0 = function(children) {\n      \t\treturn {\n      \t\t\troot: {\n      \t\t\t\ttype: 'root',\n      \t\t\t\tchildren,\n      \t\t\t\tlocation: location()\n      \t\t\t}\n      \t\t}\n      \t},\n      peg$c1 = function(lbm, name, attributes, children, rbm) {\n      \t\treturn {\n      \t\t\ttype: 'element',\n      \t\t\tlbm,\n      \t\t\tname,\n      \t\t\tattributes,\n      \t\t\tchildren,\n      \t\t\trbm,\n      \t\t\tlocation: location()\n      \t\t}\n      \t},\n      peg$c2 = \"[\",\n      peg$c3 = peg$literalExpectation(\"[\", false),\n      peg$c4 = \"<\",\n      peg$c5 = peg$literalExpectation(\"<\", false),\n      peg$c6 = function(a, b) {return (bstack[bstack.length - 1] || 0) <= b.length + 1},\n      peg$c7 = function(a, b) {\n      \t\treturn a + b;\n      \t},\n      peg$c8 = function(a) {\n      \t\tbstack.push(a.length);\n      \t\treturn a;\n      \t},\n      peg$c9 = \"!\",\n      peg$c10 = peg$literalExpectation(\"!\", false),\n      peg$c11 = \"\\\"\",\n      peg$c12 = peg$literalExpectation(\"\\\"\", false),\n      peg$c13 = \"#\",\n      peg$c14 = peg$literalExpectation(\"#\", false),\n      peg$c15 = \"$\",\n      peg$c16 = peg$literalExpectation(\"$\", false),\n      peg$c17 = \"%\",\n      peg$c18 = peg$literalExpectation(\"%\", false),\n      peg$c19 = \"&\",\n      peg$c20 = peg$literalExpectation(\"&\", false),\n      peg$c21 = \"'\",\n      peg$c22 = peg$literalExpectation(\"'\", false),\n      peg$c23 = \")\",\n      peg$c24 = peg$literalExpectation(\")\", false),\n      peg$c25 = \"*\",\n      peg$c26 = peg$literalExpectation(\"*\", false),\n      peg$c27 = \"+\",\n      peg$c28 = peg$literalExpectation(\"+\", false),\n      peg$c29 = \",\",\n      peg$c30 = peg$literalExpectation(\",\", false),\n      peg$c31 = \"-\",\n      peg$c32 = peg$literalExpectation(\"-\", false),\n      peg$c33 = \"/\",\n      peg$c34 = peg$literalExpectation(\"/\", false),\n      peg$c35 = \";\",\n      peg$c36 = peg$literalExpectation(\";\", false),\n      peg$c37 = \"=\",\n      peg$c38 = peg$literalExpectation(\"=\", false),\n      peg$c39 = \">\",\n      peg$c40 = peg$literalExpectation(\">\", false),\n      peg$c41 = \"?\",\n      peg$c42 = peg$literalExpectation(\"?\", false),\n      peg$c43 = \"@\",\n      peg$c44 = peg$literalExpectation(\"@\", false),\n      peg$c45 = \"\\\\\",\n      peg$c46 = peg$literalExpectation(\"\\\\\", false),\n      peg$c47 = \"^\",\n      peg$c48 = peg$literalExpectation(\"^\", false),\n      peg$c49 = \"_\",\n      peg$c50 = peg$literalExpectation(\"_\", false),\n      peg$c51 = \"{\",\n      peg$c52 = peg$literalExpectation(\"{\", false),\n      peg$c53 = \"|\",\n      peg$c54 = peg$literalExpectation(\"|\", false),\n      peg$c55 = \"}\",\n      peg$c56 = peg$literalExpectation(\"}\", false),\n      peg$c57 = \"~\",\n      peg$c58 = peg$literalExpectation(\"~\", false),\n      peg$c59 = /^[a-z]/,\n      peg$c60 = peg$classExpectation([[\"a\", \"z\"]], false, false),\n      peg$c61 = /^[a-z0-9]/,\n      peg$c62 = peg$classExpectation([[\"a\", \"z\"], [\"0\", \"9\"]], false, false),\n      peg$c63 = \":\",\n      peg$c64 = peg$literalExpectation(\":\", false),\n      peg$c65 = function(a, b, d, e) {return ':' + d + e.join('')},\n      peg$c66 = function(a, b, c) {\n      \t\treturn a + b + c;\n      \t},\n      peg$c67 = \"\",\n      peg$c68 = \"(\",\n      peg$c69 = peg$literalExpectation(\"(\", false),\n      peg$c70 = /^[a-z0-9\\-]/,\n      peg$c71 = peg$classExpectation([[\"a\", \"z\"], [\"0\", \"9\"], \"-\"], false, false),\n      peg$c72 = peg$anyExpectation(),\n      peg$c73 = function(left, name, a, b, c) {return ''},\n      peg$c74 = function(left, name, a, b, c, d) {\n      \t\t\t\t\treturn [a, b, c, d];\n      \t\t\t\t},\n      peg$c75 = /^['\"()[\\] \\t\\n\\r]/,\n      peg$c76 = peg$classExpectation([\"'\", \"\\\"\", \"(\", \")\", \"[\", \"]\", \" \", \"\\t\", \"\\n\", \"\\r\"], false, false),\n      peg$c77 = function(left, name, a, c) {\n      \t\t\t\t\treturn [a, '', c, ''];\n      \t\t\t\t},\n      peg$c78 = function(left, name) {\n      \t\t\t\t\treturn ['', '', '', ''];\n      \t\t\t\t},\n      peg$c79 = function(left, name, value) {\n      \t\t\t\treturn {\n      \t\t\t\t\t_type: 'attribute',\n      \t\t\t\t\tattribute: [name].concat(value)\n      \t\t\t\t};\n      \t\t\t},\n      peg$c80 = function(left, a) {\n      \t\t\t\treturn {\n      \t\t\t\t\t_type: 'whitespace',\n      \t\t\t\t\twhitespace: a\n      \t\t\t\t}\n      \t\t\t},\n      peg$c81 = function(left, a) {\n      \t\t\t\treturn {\n      \t\t\t\t\t_type: 'error',\n      \t\t\t\t\terror: a\n      \t\t\t\t}\n      \t\t\t},\n      peg$c82 = function(left, content) {return ''},\n      peg$c83 = function(left, content, right) {\n      \t\treturn {\n      \t\t\t_type: 'parenthesis',\n      \t\t\tleft,\n      \t\t\tcontent,\n      \t\t\tright\n      \t\t}\n      \t},\n      peg$c84 = \".\",\n      peg$c85 = peg$literalExpectation(\".\", false),\n      peg$c86 = function(a) {\n      \t\treturn {\n      \t\t\t_type: 'separator',\n      \t\t\tseparator: a\n      \t\t}\n      \t},\n      peg$c87 = \"]\",\n      peg$c88 = peg$literalExpectation(\"]\", false),\n      peg$c89 = function(a, b) {return (bstack[bstack.length - 1] || 0) == a.length + 1},\n      peg$c90 = function(a, b) {return a + b},\n      peg$c91 = function() {return ''},\n      peg$c92 = function(a) {\n      \t\tbstack.pop();\n      \t\treturn a;\n      \t},\n      peg$c93 = \"`\",\n      peg$c94 = peg$literalExpectation(\"`\", false),\n      peg$c95 = function(b) {return b},\n      peg$c96 = function(a) {\n      \t\treturn {\n      \t\t\ttype: 'text',\n      \t\t\ttext: a.join(''),\n      \t\t\tlocation: location()\n      \t\t}\n      \t},\n      peg$c97 = function(lvm, separator, child, rvm) {\n      \t\treturn {\n      \t\t\ttype: 'verbatim',\n      \t\t\tlvm,\n      \t\t\tseparator,\n      \t\t\tchild,\n      \t\t\trvm,\n      \t\t\tlocation: location()\n      \t\t}\n      \t},\n      peg$c98 = function(a, b) {\n      \t\tvlevel = b.length + 1;\n      \t\treturn a + b.join('');\n      \t},\n      peg$c99 = function(a, b) {return vlevel == a.length + 1},\n      peg$c100 = function(a, b) {return a.join('') + b},\n      peg$c101 = /^[ \\t\\n\\r]/,\n      peg$c102 = peg$classExpectation([\" \", \"\\t\", \"\\n\", \"\\r\"], false, false),\n\n      peg$currPos          = 0,\n      peg$savedPos         = 0,\n      peg$posDetailsCache  = [{ line: 1, column: 1 }],\n      peg$maxFailPos       = 0,\n      peg$maxFailExpected  = [],\n      peg$silentFails      = 0,\n\n      peg$result;\n\n  if (\"startRule\" in options) {\n    if (!(options.startRule in peg$startRuleFunctions)) {\n      throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n    }\n\n    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n  }\n\n  function text() {\n    return input.substring(peg$savedPos, peg$currPos);\n  }\n\n  function location() {\n    return peg$computeLocation(peg$savedPos, peg$currPos);\n  }\n\n  function expected(description, location) {\n    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\n\n    throw peg$buildStructuredError(\n      [peg$otherExpectation(description)],\n      input.substring(peg$savedPos, peg$currPos),\n      location\n    );\n  }\n\n  function error(message, location) {\n    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\n\n    throw peg$buildSimpleError(message, location);\n  }\n\n  function peg$literalExpectation(text, ignoreCase) {\n    return { type: \"literal\", text: text, ignoreCase: ignoreCase };\n  }\n\n  function peg$classExpectation(parts, inverted, ignoreCase) {\n    return { type: \"class\", parts: parts, inverted: inverted, ignoreCase: ignoreCase };\n  }\n\n  function peg$anyExpectation() {\n    return { type: \"any\" };\n  }\n\n  function peg$endExpectation() {\n    return { type: \"end\" };\n  }\n\n  function peg$otherExpectation(description) {\n    return { type: \"other\", description: description };\n  }\n\n  function peg$computePosDetails(pos) {\n    var details = peg$posDetailsCache[pos], p;\n\n    if (details) {\n      return details;\n    } else {\n      p = pos - 1;\n      while (!peg$posDetailsCache[p]) {\n        p--;\n      }\n\n      details = peg$posDetailsCache[p];\n      details = {\n        line:   details.line,\n        column: details.column\n      };\n\n      while (p < pos) {\n        if (input.charCodeAt(p) === 10) {\n          details.line++;\n          details.column = 1;\n        } else {\n          details.column++;\n        }\n\n        p++;\n      }\n\n      peg$posDetailsCache[pos] = details;\n      return details;\n    }\n  }\n\n  function peg$computeLocation(startPos, endPos) {\n    var startPosDetails = peg$computePosDetails(startPos),\n        endPosDetails   = peg$computePosDetails(endPos);\n\n    return {\n      start: {\n        offset: startPos,\n        line:   startPosDetails.line,\n        column: startPosDetails.column\n      },\n      end: {\n        offset: endPos,\n        line:   endPosDetails.line,\n        column: endPosDetails.column\n      }\n    };\n  }\n\n  function peg$fail(expected) {\n    if (peg$currPos < peg$maxFailPos) { return; }\n\n    if (peg$currPos > peg$maxFailPos) {\n      peg$maxFailPos = peg$currPos;\n      peg$maxFailExpected = [];\n    }\n\n    peg$maxFailExpected.push(expected);\n  }\n\n  function peg$buildSimpleError(message, location) {\n    return new peg$SyntaxError(message, null, null, location);\n  }\n\n  function peg$buildStructuredError(expected, found, location) {\n    return new peg$SyntaxError(\n      peg$SyntaxError.buildMessage(expected, found),\n      expected,\n      found,\n      location\n    );\n  }\n\n  function peg$parsestart() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    s1 = peg$parsethings();\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c0(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsethings() {\n    var s0, s1;\n\n    s0 = [];\n    s1 = peg$parsething();\n    while (s1 !== peg$FAILED) {\n      s0.push(s1);\n      s1 = peg$parsething();\n    }\n\n    return s0;\n  }\n\n  function peg$parsething() {\n    var s0;\n\n    s0 = peg$parseelement();\n    if (s0 === peg$FAILED) {\n      s0 = peg$parseverbatim();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parsetext();\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parseelement() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parselbm_push();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsetag_name();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parseattributes();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parsethings();\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parserbm_pop();\n            if (s5 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c1(s1, s2, s3, s4, s5);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parselbm() {\n    var s0, s1, s2, s3, s4;\n\n    s0 = peg$currPos;\n    if (input.charCodeAt(peg$currPos) === 91) {\n      s1 = peg$c2;\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c3); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$currPos;\n      s3 = [];\n      if (input.charCodeAt(peg$currPos) === 60) {\n        s4 = peg$c4;\n        peg$currPos++;\n      } else {\n        s4 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c5); }\n      }\n      while (s4 !== peg$FAILED) {\n        s3.push(s4);\n        if (input.charCodeAt(peg$currPos) === 60) {\n          s4 = peg$c4;\n          peg$currPos++;\n        } else {\n          s4 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c5); }\n        }\n      }\n      if (s3 !== peg$FAILED) {\n        s2 = input.substring(s2, peg$currPos);\n      } else {\n        s2 = s3;\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = peg$currPos;\n        s3 = peg$c6(s1, s2);\n        if (s3) {\n          s3 = void 0;\n        } else {\n          s3 = peg$FAILED;\n        }\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c7(s1, s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parselbm_push() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    s1 = peg$parselbm();\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c8(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsetag_name() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9;\n\n    s0 = peg$currPos;\n    s1 = [];\n    if (input.charCodeAt(peg$currPos) === 33) {\n      s2 = peg$c9;\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c10); }\n    }\n    if (s2 !== peg$FAILED) {\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        if (input.charCodeAt(peg$currPos) === 33) {\n          s2 = peg$c9;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c10); }\n        }\n      }\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 === peg$FAILED) {\n      s1 = [];\n      if (input.charCodeAt(peg$currPos) === 34) {\n        s2 = peg$c11;\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c12); }\n      }\n      if (s2 !== peg$FAILED) {\n        while (s2 !== peg$FAILED) {\n          s1.push(s2);\n          if (input.charCodeAt(peg$currPos) === 34) {\n            s2 = peg$c11;\n            peg$currPos++;\n          } else {\n            s2 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c12); }\n          }\n        }\n      } else {\n        s1 = peg$FAILED;\n      }\n      if (s1 === peg$FAILED) {\n        s1 = [];\n        if (input.charCodeAt(peg$currPos) === 35) {\n          s2 = peg$c13;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c14); }\n        }\n        if (s2 !== peg$FAILED) {\n          while (s2 !== peg$FAILED) {\n            s1.push(s2);\n            if (input.charCodeAt(peg$currPos) === 35) {\n              s2 = peg$c13;\n              peg$currPos++;\n            } else {\n              s2 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c14); }\n            }\n          }\n        } else {\n          s1 = peg$FAILED;\n        }\n        if (s1 === peg$FAILED) {\n          s1 = [];\n          if (input.charCodeAt(peg$currPos) === 36) {\n            s2 = peg$c15;\n            peg$currPos++;\n          } else {\n            s2 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c16); }\n          }\n          if (s2 !== peg$FAILED) {\n            while (s2 !== peg$FAILED) {\n              s1.push(s2);\n              if (input.charCodeAt(peg$currPos) === 36) {\n                s2 = peg$c15;\n                peg$currPos++;\n              } else {\n                s2 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c16); }\n              }\n            }\n          } else {\n            s1 = peg$FAILED;\n          }\n          if (s1 === peg$FAILED) {\n            s1 = [];\n            if (input.charCodeAt(peg$currPos) === 37) {\n              s2 = peg$c17;\n              peg$currPos++;\n            } else {\n              s2 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c18); }\n            }\n            if (s2 !== peg$FAILED) {\n              while (s2 !== peg$FAILED) {\n                s1.push(s2);\n                if (input.charCodeAt(peg$currPos) === 37) {\n                  s2 = peg$c17;\n                  peg$currPos++;\n                } else {\n                  s2 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c18); }\n                }\n              }\n            } else {\n              s1 = peg$FAILED;\n            }\n            if (s1 === peg$FAILED) {\n              s1 = [];\n              if (input.charCodeAt(peg$currPos) === 38) {\n                s2 = peg$c19;\n                peg$currPos++;\n              } else {\n                s2 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c20); }\n              }\n              if (s2 !== peg$FAILED) {\n                while (s2 !== peg$FAILED) {\n                  s1.push(s2);\n                  if (input.charCodeAt(peg$currPos) === 38) {\n                    s2 = peg$c19;\n                    peg$currPos++;\n                  } else {\n                    s2 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c20); }\n                  }\n                }\n              } else {\n                s1 = peg$FAILED;\n              }\n              if (s1 === peg$FAILED) {\n                s1 = [];\n                if (input.charCodeAt(peg$currPos) === 39) {\n                  s2 = peg$c21;\n                  peg$currPos++;\n                } else {\n                  s2 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c22); }\n                }\n                if (s2 !== peg$FAILED) {\n                  while (s2 !== peg$FAILED) {\n                    s1.push(s2);\n                    if (input.charCodeAt(peg$currPos) === 39) {\n                      s2 = peg$c21;\n                      peg$currPos++;\n                    } else {\n                      s2 = peg$FAILED;\n                      if (peg$silentFails === 0) { peg$fail(peg$c22); }\n                    }\n                  }\n                } else {\n                  s1 = peg$FAILED;\n                }\n                if (s1 === peg$FAILED) {\n                  s1 = [];\n                  if (input.charCodeAt(peg$currPos) === 41) {\n                    s2 = peg$c23;\n                    peg$currPos++;\n                  } else {\n                    s2 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c24); }\n                  }\n                  if (s2 !== peg$FAILED) {\n                    while (s2 !== peg$FAILED) {\n                      s1.push(s2);\n                      if (input.charCodeAt(peg$currPos) === 41) {\n                        s2 = peg$c23;\n                        peg$currPos++;\n                      } else {\n                        s2 = peg$FAILED;\n                        if (peg$silentFails === 0) { peg$fail(peg$c24); }\n                      }\n                    }\n                  } else {\n                    s1 = peg$FAILED;\n                  }\n                  if (s1 === peg$FAILED) {\n                    s1 = [];\n                    if (input.charCodeAt(peg$currPos) === 42) {\n                      s2 = peg$c25;\n                      peg$currPos++;\n                    } else {\n                      s2 = peg$FAILED;\n                      if (peg$silentFails === 0) { peg$fail(peg$c26); }\n                    }\n                    if (s2 !== peg$FAILED) {\n                      while (s2 !== peg$FAILED) {\n                        s1.push(s2);\n                        if (input.charCodeAt(peg$currPos) === 42) {\n                          s2 = peg$c25;\n                          peg$currPos++;\n                        } else {\n                          s2 = peg$FAILED;\n                          if (peg$silentFails === 0) { peg$fail(peg$c26); }\n                        }\n                      }\n                    } else {\n                      s1 = peg$FAILED;\n                    }\n                    if (s1 === peg$FAILED) {\n                      s1 = [];\n                      if (input.charCodeAt(peg$currPos) === 43) {\n                        s2 = peg$c27;\n                        peg$currPos++;\n                      } else {\n                        s2 = peg$FAILED;\n                        if (peg$silentFails === 0) { peg$fail(peg$c28); }\n                      }\n                      if (s2 !== peg$FAILED) {\n                        while (s2 !== peg$FAILED) {\n                          s1.push(s2);\n                          if (input.charCodeAt(peg$currPos) === 43) {\n                            s2 = peg$c27;\n                            peg$currPos++;\n                          } else {\n                            s2 = peg$FAILED;\n                            if (peg$silentFails === 0) { peg$fail(peg$c28); }\n                          }\n                        }\n                      } else {\n                        s1 = peg$FAILED;\n                      }\n                      if (s1 === peg$FAILED) {\n                        s1 = [];\n                        if (input.charCodeAt(peg$currPos) === 44) {\n                          s2 = peg$c29;\n                          peg$currPos++;\n                        } else {\n                          s2 = peg$FAILED;\n                          if (peg$silentFails === 0) { peg$fail(peg$c30); }\n                        }\n                        if (s2 !== peg$FAILED) {\n                          while (s2 !== peg$FAILED) {\n                            s1.push(s2);\n                            if (input.charCodeAt(peg$currPos) === 44) {\n                              s2 = peg$c29;\n                              peg$currPos++;\n                            } else {\n                              s2 = peg$FAILED;\n                              if (peg$silentFails === 0) { peg$fail(peg$c30); }\n                            }\n                          }\n                        } else {\n                          s1 = peg$FAILED;\n                        }\n                        if (s1 === peg$FAILED) {\n                          s1 = [];\n                          if (input.charCodeAt(peg$currPos) === 45) {\n                            s2 = peg$c31;\n                            peg$currPos++;\n                          } else {\n                            s2 = peg$FAILED;\n                            if (peg$silentFails === 0) { peg$fail(peg$c32); }\n                          }\n                          if (s2 !== peg$FAILED) {\n                            while (s2 !== peg$FAILED) {\n                              s1.push(s2);\n                              if (input.charCodeAt(peg$currPos) === 45) {\n                                s2 = peg$c31;\n                                peg$currPos++;\n                              } else {\n                                s2 = peg$FAILED;\n                                if (peg$silentFails === 0) { peg$fail(peg$c32); }\n                              }\n                            }\n                          } else {\n                            s1 = peg$FAILED;\n                          }\n                          if (s1 === peg$FAILED) {\n                            s1 = [];\n                            if (input.charCodeAt(peg$currPos) === 47) {\n                              s2 = peg$c33;\n                              peg$currPos++;\n                            } else {\n                              s2 = peg$FAILED;\n                              if (peg$silentFails === 0) { peg$fail(peg$c34); }\n                            }\n                            if (s2 !== peg$FAILED) {\n                              while (s2 !== peg$FAILED) {\n                                s1.push(s2);\n                                if (input.charCodeAt(peg$currPos) === 47) {\n                                  s2 = peg$c33;\n                                  peg$currPos++;\n                                } else {\n                                  s2 = peg$FAILED;\n                                  if (peg$silentFails === 0) { peg$fail(peg$c34); }\n                                }\n                              }\n                            } else {\n                              s1 = peg$FAILED;\n                            }\n                            if (s1 === peg$FAILED) {\n                              s1 = [];\n                              if (input.charCodeAt(peg$currPos) === 59) {\n                                s2 = peg$c35;\n                                peg$currPos++;\n                              } else {\n                                s2 = peg$FAILED;\n                                if (peg$silentFails === 0) { peg$fail(peg$c36); }\n                              }\n                              if (s2 !== peg$FAILED) {\n                                while (s2 !== peg$FAILED) {\n                                  s1.push(s2);\n                                  if (input.charCodeAt(peg$currPos) === 59) {\n                                    s2 = peg$c35;\n                                    peg$currPos++;\n                                  } else {\n                                    s2 = peg$FAILED;\n                                    if (peg$silentFails === 0) { peg$fail(peg$c36); }\n                                  }\n                                }\n                              } else {\n                                s1 = peg$FAILED;\n                              }\n                              if (s1 === peg$FAILED) {\n                                s1 = [];\n                                if (input.charCodeAt(peg$currPos) === 61) {\n                                  s2 = peg$c37;\n                                  peg$currPos++;\n                                } else {\n                                  s2 = peg$FAILED;\n                                  if (peg$silentFails === 0) { peg$fail(peg$c38); }\n                                }\n                                if (s2 !== peg$FAILED) {\n                                  while (s2 !== peg$FAILED) {\n                                    s1.push(s2);\n                                    if (input.charCodeAt(peg$currPos) === 61) {\n                                      s2 = peg$c37;\n                                      peg$currPos++;\n                                    } else {\n                                      s2 = peg$FAILED;\n                                      if (peg$silentFails === 0) { peg$fail(peg$c38); }\n                                    }\n                                  }\n                                } else {\n                                  s1 = peg$FAILED;\n                                }\n                                if (s1 === peg$FAILED) {\n                                  s1 = [];\n                                  if (input.charCodeAt(peg$currPos) === 62) {\n                                    s2 = peg$c39;\n                                    peg$currPos++;\n                                  } else {\n                                    s2 = peg$FAILED;\n                                    if (peg$silentFails === 0) { peg$fail(peg$c40); }\n                                  }\n                                  if (s2 !== peg$FAILED) {\n                                    while (s2 !== peg$FAILED) {\n                                      s1.push(s2);\n                                      if (input.charCodeAt(peg$currPos) === 62) {\n                                        s2 = peg$c39;\n                                        peg$currPos++;\n                                      } else {\n                                        s2 = peg$FAILED;\n                                        if (peg$silentFails === 0) { peg$fail(peg$c40); }\n                                      }\n                                    }\n                                  } else {\n                                    s1 = peg$FAILED;\n                                  }\n                                  if (s1 === peg$FAILED) {\n                                    s1 = [];\n                                    if (input.charCodeAt(peg$currPos) === 63) {\n                                      s2 = peg$c41;\n                                      peg$currPos++;\n                                    } else {\n                                      s2 = peg$FAILED;\n                                      if (peg$silentFails === 0) { peg$fail(peg$c42); }\n                                    }\n                                    if (s2 !== peg$FAILED) {\n                                      while (s2 !== peg$FAILED) {\n                                        s1.push(s2);\n                                        if (input.charCodeAt(peg$currPos) === 63) {\n                                          s2 = peg$c41;\n                                          peg$currPos++;\n                                        } else {\n                                          s2 = peg$FAILED;\n                                          if (peg$silentFails === 0) { peg$fail(peg$c42); }\n                                        }\n                                      }\n                                    } else {\n                                      s1 = peg$FAILED;\n                                    }\n                                    if (s1 === peg$FAILED) {\n                                      s1 = [];\n                                      if (input.charCodeAt(peg$currPos) === 64) {\n                                        s2 = peg$c43;\n                                        peg$currPos++;\n                                      } else {\n                                        s2 = peg$FAILED;\n                                        if (peg$silentFails === 0) { peg$fail(peg$c44); }\n                                      }\n                                      if (s2 !== peg$FAILED) {\n                                        while (s2 !== peg$FAILED) {\n                                          s1.push(s2);\n                                          if (input.charCodeAt(peg$currPos) === 64) {\n                                            s2 = peg$c43;\n                                            peg$currPos++;\n                                          } else {\n                                            s2 = peg$FAILED;\n                                            if (peg$silentFails === 0) { peg$fail(peg$c44); }\n                                          }\n                                        }\n                                      } else {\n                                        s1 = peg$FAILED;\n                                      }\n                                      if (s1 === peg$FAILED) {\n                                        s1 = [];\n                                        if (input.charCodeAt(peg$currPos) === 92) {\n                                          s2 = peg$c45;\n                                          peg$currPos++;\n                                        } else {\n                                          s2 = peg$FAILED;\n                                          if (peg$silentFails === 0) { peg$fail(peg$c46); }\n                                        }\n                                        if (s2 !== peg$FAILED) {\n                                          while (s2 !== peg$FAILED) {\n                                            s1.push(s2);\n                                            if (input.charCodeAt(peg$currPos) === 92) {\n                                              s2 = peg$c45;\n                                              peg$currPos++;\n                                            } else {\n                                              s2 = peg$FAILED;\n                                              if (peg$silentFails === 0) { peg$fail(peg$c46); }\n                                            }\n                                          }\n                                        } else {\n                                          s1 = peg$FAILED;\n                                        }\n                                        if (s1 === peg$FAILED) {\n                                          s1 = [];\n                                          if (input.charCodeAt(peg$currPos) === 94) {\n                                            s2 = peg$c47;\n                                            peg$currPos++;\n                                          } else {\n                                            s2 = peg$FAILED;\n                                            if (peg$silentFails === 0) { peg$fail(peg$c48); }\n                                          }\n                                          if (s2 !== peg$FAILED) {\n                                            while (s2 !== peg$FAILED) {\n                                              s1.push(s2);\n                                              if (input.charCodeAt(peg$currPos) === 94) {\n                                                s2 = peg$c47;\n                                                peg$currPos++;\n                                              } else {\n                                                s2 = peg$FAILED;\n                                                if (peg$silentFails === 0) { peg$fail(peg$c48); }\n                                              }\n                                            }\n                                          } else {\n                                            s1 = peg$FAILED;\n                                          }\n                                          if (s1 === peg$FAILED) {\n                                            s1 = [];\n                                            if (input.charCodeAt(peg$currPos) === 95) {\n                                              s2 = peg$c49;\n                                              peg$currPos++;\n                                            } else {\n                                              s2 = peg$FAILED;\n                                              if (peg$silentFails === 0) { peg$fail(peg$c50); }\n                                            }\n                                            if (s2 !== peg$FAILED) {\n                                              while (s2 !== peg$FAILED) {\n                                                s1.push(s2);\n                                                if (input.charCodeAt(peg$currPos) === 95) {\n                                                  s2 = peg$c49;\n                                                  peg$currPos++;\n                                                } else {\n                                                  s2 = peg$FAILED;\n                                                  if (peg$silentFails === 0) { peg$fail(peg$c50); }\n                                                }\n                                              }\n                                            } else {\n                                              s1 = peg$FAILED;\n                                            }\n                                            if (s1 === peg$FAILED) {\n                                              s1 = [];\n                                              if (input.charCodeAt(peg$currPos) === 123) {\n                                                s2 = peg$c51;\n                                                peg$currPos++;\n                                              } else {\n                                                s2 = peg$FAILED;\n                                                if (peg$silentFails === 0) { peg$fail(peg$c52); }\n                                              }\n                                              if (s2 !== peg$FAILED) {\n                                                while (s2 !== peg$FAILED) {\n                                                  s1.push(s2);\n                                                  if (input.charCodeAt(peg$currPos) === 123) {\n                                                    s2 = peg$c51;\n                                                    peg$currPos++;\n                                                  } else {\n                                                    s2 = peg$FAILED;\n                                                    if (peg$silentFails === 0) { peg$fail(peg$c52); }\n                                                  }\n                                                }\n                                              } else {\n                                                s1 = peg$FAILED;\n                                              }\n                                              if (s1 === peg$FAILED) {\n                                                s1 = [];\n                                                if (input.charCodeAt(peg$currPos) === 124) {\n                                                  s2 = peg$c53;\n                                                  peg$currPos++;\n                                                } else {\n                                                  s2 = peg$FAILED;\n                                                  if (peg$silentFails === 0) { peg$fail(peg$c54); }\n                                                }\n                                                if (s2 !== peg$FAILED) {\n                                                  while (s2 !== peg$FAILED) {\n                                                    s1.push(s2);\n                                                    if (input.charCodeAt(peg$currPos) === 124) {\n                                                      s2 = peg$c53;\n                                                      peg$currPos++;\n                                                    } else {\n                                                      s2 = peg$FAILED;\n                                                      if (peg$silentFails === 0) { peg$fail(peg$c54); }\n                                                    }\n                                                  }\n                                                } else {\n                                                  s1 = peg$FAILED;\n                                                }\n                                                if (s1 === peg$FAILED) {\n                                                  s1 = [];\n                                                  if (input.charCodeAt(peg$currPos) === 125) {\n                                                    s2 = peg$c55;\n                                                    peg$currPos++;\n                                                  } else {\n                                                    s2 = peg$FAILED;\n                                                    if (peg$silentFails === 0) { peg$fail(peg$c56); }\n                                                  }\n                                                  if (s2 !== peg$FAILED) {\n                                                    while (s2 !== peg$FAILED) {\n                                                      s1.push(s2);\n                                                      if (input.charCodeAt(peg$currPos) === 125) {\n                                                        s2 = peg$c55;\n                                                        peg$currPos++;\n                                                      } else {\n                                                        s2 = peg$FAILED;\n                                                        if (peg$silentFails === 0) { peg$fail(peg$c56); }\n                                                      }\n                                                    }\n                                                  } else {\n                                                    s1 = peg$FAILED;\n                                                  }\n                                                  if (s1 === peg$FAILED) {\n                                                    s1 = [];\n                                                    if (input.charCodeAt(peg$currPos) === 126) {\n                                                      s2 = peg$c57;\n                                                      peg$currPos++;\n                                                    } else {\n                                                      s2 = peg$FAILED;\n                                                      if (peg$silentFails === 0) { peg$fail(peg$c58); }\n                                                    }\n                                                    if (s2 !== peg$FAILED) {\n                                                      while (s2 !== peg$FAILED) {\n                                                        s1.push(s2);\n                                                        if (input.charCodeAt(peg$currPos) === 126) {\n                                                          s2 = peg$c57;\n                                                          peg$currPos++;\n                                                        } else {\n                                                          s2 = peg$FAILED;\n                                                          if (peg$silentFails === 0) { peg$fail(peg$c58); }\n                                                        }\n                                                      }\n                                                    } else {\n                                                      s1 = peg$FAILED;\n                                                    }\n                                                  }\n                                                }\n                                              }\n                                            }\n                                          }\n                                        }\n                                      }\n                                    }\n                                  }\n                                }\n                              }\n                            }\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    if (s1 !== peg$FAILED) {\n      s0 = input.substring(s0, peg$currPos);\n    } else {\n      s0 = s1;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      if (peg$c59.test(input.charAt(peg$currPos))) {\n        s1 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c60); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$currPos;\n        s3 = [];\n        if (peg$c61.test(input.charAt(peg$currPos))) {\n          s4 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s4 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c62); }\n        }\n        while (s4 !== peg$FAILED) {\n          s3.push(s4);\n          if (peg$c61.test(input.charAt(peg$currPos))) {\n            s4 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s4 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c62); }\n          }\n        }\n        if (s3 !== peg$FAILED) {\n          s2 = input.substring(s2, peg$currPos);\n        } else {\n          s2 = s3;\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$currPos;\n          s4 = [];\n          s5 = peg$currPos;\n          if (input.charCodeAt(peg$currPos) === 58) {\n            s6 = peg$c63;\n            peg$currPos++;\n          } else {\n            s6 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c64); }\n          }\n          if (s6 !== peg$FAILED) {\n            if (peg$c59.test(input.charAt(peg$currPos))) {\n              s7 = input.charAt(peg$currPos);\n              peg$currPos++;\n            } else {\n              s7 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c60); }\n            }\n            if (s7 !== peg$FAILED) {\n              s8 = [];\n              if (peg$c61.test(input.charAt(peg$currPos))) {\n                s9 = input.charAt(peg$currPos);\n                peg$currPos++;\n              } else {\n                s9 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c62); }\n              }\n              while (s9 !== peg$FAILED) {\n                s8.push(s9);\n                if (peg$c61.test(input.charAt(peg$currPos))) {\n                  s9 = input.charAt(peg$currPos);\n                  peg$currPos++;\n                } else {\n                  s9 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c62); }\n                }\n              }\n              if (s8 !== peg$FAILED) {\n                peg$savedPos = s5;\n                s6 = peg$c65(s1, s2, s7, s8);\n                s5 = s6;\n              } else {\n                peg$currPos = s5;\n                s5 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s5;\n              s5 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s5;\n            s5 = peg$FAILED;\n          }\n          while (s5 !== peg$FAILED) {\n            s4.push(s5);\n            s5 = peg$currPos;\n            if (input.charCodeAt(peg$currPos) === 58) {\n              s6 = peg$c63;\n              peg$currPos++;\n            } else {\n              s6 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c64); }\n            }\n            if (s6 !== peg$FAILED) {\n              if (peg$c59.test(input.charAt(peg$currPos))) {\n                s7 = input.charAt(peg$currPos);\n                peg$currPos++;\n              } else {\n                s7 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c60); }\n              }\n              if (s7 !== peg$FAILED) {\n                s8 = [];\n                if (peg$c61.test(input.charAt(peg$currPos))) {\n                  s9 = input.charAt(peg$currPos);\n                  peg$currPos++;\n                } else {\n                  s9 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c62); }\n                }\n                while (s9 !== peg$FAILED) {\n                  s8.push(s9);\n                  if (peg$c61.test(input.charAt(peg$currPos))) {\n                    s9 = input.charAt(peg$currPos);\n                    peg$currPos++;\n                  } else {\n                    s9 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c62); }\n                  }\n                }\n                if (s8 !== peg$FAILED) {\n                  peg$savedPos = s5;\n                  s6 = peg$c65(s1, s2, s7, s8);\n                  s5 = s6;\n                } else {\n                  peg$currPos = s5;\n                  s5 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s5;\n                s5 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s5;\n              s5 = peg$FAILED;\n            }\n          }\n          if (s4 !== peg$FAILED) {\n            s3 = input.substring(s3, peg$currPos);\n          } else {\n            s3 = s4;\n          }\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c66(s1, s2, s3);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$c67;\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parseattributes() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9, s10, s11, s12;\n\n    s0 = peg$currPos;\n    if (input.charCodeAt(peg$currPos) === 40) {\n      s1 = peg$c68;\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c69); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$currPos;\n      s5 = [];\n      if (peg$c70.test(input.charAt(peg$currPos))) {\n        s6 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s6 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c71); }\n      }\n      if (s6 !== peg$FAILED) {\n        while (s6 !== peg$FAILED) {\n          s5.push(s6);\n          if (peg$c70.test(input.charAt(peg$currPos))) {\n            s6 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s6 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c71); }\n          }\n        }\n      } else {\n        s5 = peg$FAILED;\n      }\n      if (s5 !== peg$FAILED) {\n        s4 = input.substring(s4, peg$currPos);\n      } else {\n        s4 = s5;\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$currPos;\n        if (input.charCodeAt(peg$currPos) === 61) {\n          s6 = peg$c37;\n          peg$currPos++;\n        } else {\n          s6 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c38); }\n        }\n        if (s6 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 34) {\n            s7 = peg$c11;\n            peg$currPos++;\n          } else {\n            s7 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c12); }\n          }\n          if (s7 !== peg$FAILED) {\n            s8 = peg$currPos;\n            s9 = [];\n            s10 = peg$currPos;\n            s11 = peg$currPos;\n            peg$silentFails++;\n            if (input.charCodeAt(peg$currPos) === 34) {\n              s12 = peg$c11;\n              peg$currPos++;\n            } else {\n              s12 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c12); }\n            }\n            peg$silentFails--;\n            if (s12 === peg$FAILED) {\n              s11 = void 0;\n            } else {\n              peg$currPos = s11;\n              s11 = peg$FAILED;\n            }\n            if (s11 !== peg$FAILED) {\n              if (input.length > peg$currPos) {\n                s12 = input.charAt(peg$currPos);\n                peg$currPos++;\n              } else {\n                s12 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c72); }\n              }\n              if (s12 !== peg$FAILED) {\n                s11 = [s11, s12];\n                s10 = s11;\n              } else {\n                peg$currPos = s10;\n                s10 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s10;\n              s10 = peg$FAILED;\n            }\n            while (s10 !== peg$FAILED) {\n              s9.push(s10);\n              s10 = peg$currPos;\n              s11 = peg$currPos;\n              peg$silentFails++;\n              if (input.charCodeAt(peg$currPos) === 34) {\n                s12 = peg$c11;\n                peg$currPos++;\n              } else {\n                s12 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c12); }\n              }\n              peg$silentFails--;\n              if (s12 === peg$FAILED) {\n                s11 = void 0;\n              } else {\n                peg$currPos = s11;\n                s11 = peg$FAILED;\n              }\n              if (s11 !== peg$FAILED) {\n                if (input.length > peg$currPos) {\n                  s12 = input.charAt(peg$currPos);\n                  peg$currPos++;\n                } else {\n                  s12 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c72); }\n                }\n                if (s12 !== peg$FAILED) {\n                  s11 = [s11, s12];\n                  s10 = s11;\n                } else {\n                  peg$currPos = s10;\n                  s10 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s10;\n                s10 = peg$FAILED;\n              }\n            }\n            if (s9 !== peg$FAILED) {\n              s8 = input.substring(s8, peg$currPos);\n            } else {\n              s8 = s9;\n            }\n            if (s8 !== peg$FAILED) {\n              if (input.charCodeAt(peg$currPos) === 34) {\n                s9 = peg$c11;\n                peg$currPos++;\n              } else {\n                s9 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c12); }\n              }\n              if (s9 === peg$FAILED) {\n                s9 = peg$currPos;\n                s10 = peg$parseEOF();\n                if (s10 !== peg$FAILED) {\n                  peg$savedPos = s9;\n                  s10 = peg$c73(s1, s4, s6, s7, s8);\n                }\n                s9 = s10;\n              }\n              if (s9 !== peg$FAILED) {\n                peg$savedPos = s5;\n                s6 = peg$c74(s1, s4, s6, s7, s8, s9);\n                s5 = s6;\n              } else {\n                peg$currPos = s5;\n                s5 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s5;\n              s5 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s5;\n            s5 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s5;\n          s5 = peg$FAILED;\n        }\n        if (s5 === peg$FAILED) {\n          s5 = peg$currPos;\n          if (input.charCodeAt(peg$currPos) === 61) {\n            s6 = peg$c37;\n            peg$currPos++;\n          } else {\n            s6 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c38); }\n          }\n          if (s6 !== peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 39) {\n              s7 = peg$c21;\n              peg$currPos++;\n            } else {\n              s7 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c22); }\n            }\n            if (s7 !== peg$FAILED) {\n              s8 = peg$currPos;\n              s9 = [];\n              s10 = peg$currPos;\n              s11 = peg$currPos;\n              peg$silentFails++;\n              if (input.charCodeAt(peg$currPos) === 39) {\n                s12 = peg$c21;\n                peg$currPos++;\n              } else {\n                s12 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c22); }\n              }\n              peg$silentFails--;\n              if (s12 === peg$FAILED) {\n                s11 = void 0;\n              } else {\n                peg$currPos = s11;\n                s11 = peg$FAILED;\n              }\n              if (s11 !== peg$FAILED) {\n                if (input.length > peg$currPos) {\n                  s12 = input.charAt(peg$currPos);\n                  peg$currPos++;\n                } else {\n                  s12 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c72); }\n                }\n                if (s12 !== peg$FAILED) {\n                  s11 = [s11, s12];\n                  s10 = s11;\n                } else {\n                  peg$currPos = s10;\n                  s10 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s10;\n                s10 = peg$FAILED;\n              }\n              while (s10 !== peg$FAILED) {\n                s9.push(s10);\n                s10 = peg$currPos;\n                s11 = peg$currPos;\n                peg$silentFails++;\n                if (input.charCodeAt(peg$currPos) === 39) {\n                  s12 = peg$c21;\n                  peg$currPos++;\n                } else {\n                  s12 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c22); }\n                }\n                peg$silentFails--;\n                if (s12 === peg$FAILED) {\n                  s11 = void 0;\n                } else {\n                  peg$currPos = s11;\n                  s11 = peg$FAILED;\n                }\n                if (s11 !== peg$FAILED) {\n                  if (input.length > peg$currPos) {\n                    s12 = input.charAt(peg$currPos);\n                    peg$currPos++;\n                  } else {\n                    s12 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c72); }\n                  }\n                  if (s12 !== peg$FAILED) {\n                    s11 = [s11, s12];\n                    s10 = s11;\n                  } else {\n                    peg$currPos = s10;\n                    s10 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s10;\n                  s10 = peg$FAILED;\n                }\n              }\n              if (s9 !== peg$FAILED) {\n                s8 = input.substring(s8, peg$currPos);\n              } else {\n                s8 = s9;\n              }\n              if (s8 !== peg$FAILED) {\n                if (input.charCodeAt(peg$currPos) === 39) {\n                  s9 = peg$c21;\n                  peg$currPos++;\n                } else {\n                  s9 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c22); }\n                }\n                if (s9 === peg$FAILED) {\n                  s9 = peg$currPos;\n                  s10 = peg$parseEOF();\n                  if (s10 !== peg$FAILED) {\n                    peg$savedPos = s9;\n                    s10 = peg$c73(s1, s4, s6, s7, s8);\n                  }\n                  s9 = s10;\n                }\n                if (s9 !== peg$FAILED) {\n                  peg$savedPos = s5;\n                  s6 = peg$c74(s1, s4, s6, s7, s8, s9);\n                  s5 = s6;\n                } else {\n                  peg$currPos = s5;\n                  s5 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s5;\n                s5 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s5;\n              s5 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s5;\n            s5 = peg$FAILED;\n          }\n          if (s5 === peg$FAILED) {\n            s5 = peg$currPos;\n            if (input.charCodeAt(peg$currPos) === 61) {\n              s6 = peg$c37;\n              peg$currPos++;\n            } else {\n              s6 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c38); }\n            }\n            if (s6 !== peg$FAILED) {\n              s7 = peg$currPos;\n              s8 = [];\n              s9 = peg$currPos;\n              s10 = peg$currPos;\n              peg$silentFails++;\n              if (peg$c75.test(input.charAt(peg$currPos))) {\n                s11 = input.charAt(peg$currPos);\n                peg$currPos++;\n              } else {\n                s11 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c76); }\n              }\n              peg$silentFails--;\n              if (s11 === peg$FAILED) {\n                s10 = void 0;\n              } else {\n                peg$currPos = s10;\n                s10 = peg$FAILED;\n              }\n              if (s10 !== peg$FAILED) {\n                if (input.length > peg$currPos) {\n                  s11 = input.charAt(peg$currPos);\n                  peg$currPos++;\n                } else {\n                  s11 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c72); }\n                }\n                if (s11 !== peg$FAILED) {\n                  s10 = [s10, s11];\n                  s9 = s10;\n                } else {\n                  peg$currPos = s9;\n                  s9 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s9;\n                s9 = peg$FAILED;\n              }\n              while (s9 !== peg$FAILED) {\n                s8.push(s9);\n                s9 = peg$currPos;\n                s10 = peg$currPos;\n                peg$silentFails++;\n                if (peg$c75.test(input.charAt(peg$currPos))) {\n                  s11 = input.charAt(peg$currPos);\n                  peg$currPos++;\n                } else {\n                  s11 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c76); }\n                }\n                peg$silentFails--;\n                if (s11 === peg$FAILED) {\n                  s10 = void 0;\n                } else {\n                  peg$currPos = s10;\n                  s10 = peg$FAILED;\n                }\n                if (s10 !== peg$FAILED) {\n                  if (input.length > peg$currPos) {\n                    s11 = input.charAt(peg$currPos);\n                    peg$currPos++;\n                  } else {\n                    s11 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c72); }\n                  }\n                  if (s11 !== peg$FAILED) {\n                    s10 = [s10, s11];\n                    s9 = s10;\n                  } else {\n                    peg$currPos = s9;\n                    s9 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s9;\n                  s9 = peg$FAILED;\n                }\n              }\n              if (s8 !== peg$FAILED) {\n                s7 = input.substring(s7, peg$currPos);\n              } else {\n                s7 = s8;\n              }\n              if (s7 !== peg$FAILED) {\n                peg$savedPos = s5;\n                s6 = peg$c77(s1, s4, s6, s7);\n                s5 = s6;\n              } else {\n                peg$currPos = s5;\n                s5 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s5;\n              s5 = peg$FAILED;\n            }\n            if (s5 === peg$FAILED) {\n              s5 = peg$currPos;\n              s6 = peg$c67;\n              if (s6 !== peg$FAILED) {\n                peg$savedPos = s5;\n                s6 = peg$c78(s1, s4);\n              }\n              s5 = s6;\n            }\n          }\n        }\n        if (s5 !== peg$FAILED) {\n          peg$savedPos = s3;\n          s4 = peg$c79(s1, s4, s5);\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      if (s3 === peg$FAILED) {\n        s3 = peg$currPos;\n        s4 = peg$parse__();\n        if (s4 !== peg$FAILED) {\n          peg$savedPos = s3;\n          s4 = peg$c80(s1, s4);\n        }\n        s3 = s4;\n        if (s3 === peg$FAILED) {\n          s3 = peg$currPos;\n          s4 = peg$currPos;\n          s5 = peg$currPos;\n          s6 = peg$currPos;\n          peg$silentFails++;\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s7 = peg$c23;\n            peg$currPos++;\n          } else {\n            s7 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c24); }\n          }\n          peg$silentFails--;\n          if (s7 === peg$FAILED) {\n            s6 = void 0;\n          } else {\n            peg$currPos = s6;\n            s6 = peg$FAILED;\n          }\n          if (s6 !== peg$FAILED) {\n            s7 = peg$currPos;\n            peg$silentFails++;\n            s8 = peg$parserbm();\n            peg$silentFails--;\n            if (s8 === peg$FAILED) {\n              s7 = void 0;\n            } else {\n              peg$currPos = s7;\n              s7 = peg$FAILED;\n            }\n            if (s7 !== peg$FAILED) {\n              if (input.length > peg$currPos) {\n                s8 = input.charAt(peg$currPos);\n                peg$currPos++;\n              } else {\n                s8 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c72); }\n              }\n              if (s8 !== peg$FAILED) {\n                s6 = [s6, s7, s8];\n                s5 = s6;\n              } else {\n                peg$currPos = s5;\n                s5 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s5;\n              s5 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s5;\n            s5 = peg$FAILED;\n          }\n          if (s5 !== peg$FAILED) {\n            s4 = input.substring(s4, peg$currPos);\n          } else {\n            s4 = s5;\n          }\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = s3;\n            s4 = peg$c81(s1, s4);\n          }\n          s3 = s4;\n        }\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$currPos;\n        s5 = [];\n        if (peg$c70.test(input.charAt(peg$currPos))) {\n          s6 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s6 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c71); }\n        }\n        if (s6 !== peg$FAILED) {\n          while (s6 !== peg$FAILED) {\n            s5.push(s6);\n            if (peg$c70.test(input.charAt(peg$currPos))) {\n              s6 = input.charAt(peg$currPos);\n              peg$currPos++;\n            } else {\n              s6 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c71); }\n            }\n          }\n        } else {\n          s5 = peg$FAILED;\n        }\n        if (s5 !== peg$FAILED) {\n          s4 = input.substring(s4, peg$currPos);\n        } else {\n          s4 = s5;\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$currPos;\n          if (input.charCodeAt(peg$currPos) === 61) {\n            s6 = peg$c37;\n            peg$currPos++;\n          } else {\n            s6 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c38); }\n          }\n          if (s6 !== peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 34) {\n              s7 = peg$c11;\n              peg$currPos++;\n            } else {\n              s7 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c12); }\n            }\n            if (s7 !== peg$FAILED) {\n              s8 = peg$currPos;\n              s9 = [];\n              s10 = peg$currPos;\n              s11 = peg$currPos;\n              peg$silentFails++;\n              if (input.charCodeAt(peg$currPos) === 34) {\n                s12 = peg$c11;\n                peg$currPos++;\n              } else {\n                s12 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c12); }\n              }\n              peg$silentFails--;\n              if (s12 === peg$FAILED) {\n                s11 = void 0;\n              } else {\n                peg$currPos = s11;\n                s11 = peg$FAILED;\n              }\n              if (s11 !== peg$FAILED) {\n                if (input.length > peg$currPos) {\n                  s12 = input.charAt(peg$currPos);\n                  peg$currPos++;\n                } else {\n                  s12 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c72); }\n                }\n                if (s12 !== peg$FAILED) {\n                  s11 = [s11, s12];\n                  s10 = s11;\n                } else {\n                  peg$currPos = s10;\n                  s10 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s10;\n                s10 = peg$FAILED;\n              }\n              while (s10 !== peg$FAILED) {\n                s9.push(s10);\n                s10 = peg$currPos;\n                s11 = peg$currPos;\n                peg$silentFails++;\n                if (input.charCodeAt(peg$currPos) === 34) {\n                  s12 = peg$c11;\n                  peg$currPos++;\n                } else {\n                  s12 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c12); }\n                }\n                peg$silentFails--;\n                if (s12 === peg$FAILED) {\n                  s11 = void 0;\n                } else {\n                  peg$currPos = s11;\n                  s11 = peg$FAILED;\n                }\n                if (s11 !== peg$FAILED) {\n                  if (input.length > peg$currPos) {\n                    s12 = input.charAt(peg$currPos);\n                    peg$currPos++;\n                  } else {\n                    s12 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c72); }\n                  }\n                  if (s12 !== peg$FAILED) {\n                    s11 = [s11, s12];\n                    s10 = s11;\n                  } else {\n                    peg$currPos = s10;\n                    s10 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s10;\n                  s10 = peg$FAILED;\n                }\n              }\n              if (s9 !== peg$FAILED) {\n                s8 = input.substring(s8, peg$currPos);\n              } else {\n                s8 = s9;\n              }\n              if (s8 !== peg$FAILED) {\n                if (input.charCodeAt(peg$currPos) === 34) {\n                  s9 = peg$c11;\n                  peg$currPos++;\n                } else {\n                  s9 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c12); }\n                }\n                if (s9 === peg$FAILED) {\n                  s9 = peg$currPos;\n                  s10 = peg$parseEOF();\n                  if (s10 !== peg$FAILED) {\n                    peg$savedPos = s9;\n                    s10 = peg$c73(s1, s4, s6, s7, s8);\n                  }\n                  s9 = s10;\n                }\n                if (s9 !== peg$FAILED) {\n                  peg$savedPos = s5;\n                  s6 = peg$c74(s1, s4, s6, s7, s8, s9);\n                  s5 = s6;\n                } else {\n                  peg$currPos = s5;\n                  s5 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s5;\n                s5 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s5;\n              s5 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s5;\n            s5 = peg$FAILED;\n          }\n          if (s5 === peg$FAILED) {\n            s5 = peg$currPos;\n            if (input.charCodeAt(peg$currPos) === 61) {\n              s6 = peg$c37;\n              peg$currPos++;\n            } else {\n              s6 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c38); }\n            }\n            if (s6 !== peg$FAILED) {\n              if (input.charCodeAt(peg$currPos) === 39) {\n                s7 = peg$c21;\n                peg$currPos++;\n              } else {\n                s7 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c22); }\n              }\n              if (s7 !== peg$FAILED) {\n                s8 = peg$currPos;\n                s9 = [];\n                s10 = peg$currPos;\n                s11 = peg$currPos;\n                peg$silentFails++;\n                if (input.charCodeAt(peg$currPos) === 39) {\n                  s12 = peg$c21;\n                  peg$currPos++;\n                } else {\n                  s12 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c22); }\n                }\n                peg$silentFails--;\n                if (s12 === peg$FAILED) {\n                  s11 = void 0;\n                } else {\n                  peg$currPos = s11;\n                  s11 = peg$FAILED;\n                }\n                if (s11 !== peg$FAILED) {\n                  if (input.length > peg$currPos) {\n                    s12 = input.charAt(peg$currPos);\n                    peg$currPos++;\n                  } else {\n                    s12 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c72); }\n                  }\n                  if (s12 !== peg$FAILED) {\n                    s11 = [s11, s12];\n                    s10 = s11;\n                  } else {\n                    peg$currPos = s10;\n                    s10 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s10;\n                  s10 = peg$FAILED;\n                }\n                while (s10 !== peg$FAILED) {\n                  s9.push(s10);\n                  s10 = peg$currPos;\n                  s11 = peg$currPos;\n                  peg$silentFails++;\n                  if (input.charCodeAt(peg$currPos) === 39) {\n                    s12 = peg$c21;\n                    peg$currPos++;\n                  } else {\n                    s12 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c22); }\n                  }\n                  peg$silentFails--;\n                  if (s12 === peg$FAILED) {\n                    s11 = void 0;\n                  } else {\n                    peg$currPos = s11;\n                    s11 = peg$FAILED;\n                  }\n                  if (s11 !== peg$FAILED) {\n                    if (input.length > peg$currPos) {\n                      s12 = input.charAt(peg$currPos);\n                      peg$currPos++;\n                    } else {\n                      s12 = peg$FAILED;\n                      if (peg$silentFails === 0) { peg$fail(peg$c72); }\n                    }\n                    if (s12 !== peg$FAILED) {\n                      s11 = [s11, s12];\n                      s10 = s11;\n                    } else {\n                      peg$currPos = s10;\n                      s10 = peg$FAILED;\n                    }\n                  } else {\n                    peg$currPos = s10;\n                    s10 = peg$FAILED;\n                  }\n                }\n                if (s9 !== peg$FAILED) {\n                  s8 = input.substring(s8, peg$currPos);\n                } else {\n                  s8 = s9;\n                }\n                if (s8 !== peg$FAILED) {\n                  if (input.charCodeAt(peg$currPos) === 39) {\n                    s9 = peg$c21;\n                    peg$currPos++;\n                  } else {\n                    s9 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c22); }\n                  }\n                  if (s9 === peg$FAILED) {\n                    s9 = peg$currPos;\n                    s10 = peg$parseEOF();\n                    if (s10 !== peg$FAILED) {\n                      peg$savedPos = s9;\n                      s10 = peg$c73(s1, s4, s6, s7, s8);\n                    }\n                    s9 = s10;\n                  }\n                  if (s9 !== peg$FAILED) {\n                    peg$savedPos = s5;\n                    s6 = peg$c74(s1, s4, s6, s7, s8, s9);\n                    s5 = s6;\n                  } else {\n                    peg$currPos = s5;\n                    s5 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s5;\n                  s5 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s5;\n                s5 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s5;\n              s5 = peg$FAILED;\n            }\n            if (s5 === peg$FAILED) {\n              s5 = peg$currPos;\n              if (input.charCodeAt(peg$currPos) === 61) {\n                s6 = peg$c37;\n                peg$currPos++;\n              } else {\n                s6 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c38); }\n              }\n              if (s6 !== peg$FAILED) {\n                s7 = peg$currPos;\n                s8 = [];\n                s9 = peg$currPos;\n                s10 = peg$currPos;\n                peg$silentFails++;\n                if (peg$c75.test(input.charAt(peg$currPos))) {\n                  s11 = input.charAt(peg$currPos);\n                  peg$currPos++;\n                } else {\n                  s11 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c76); }\n                }\n                peg$silentFails--;\n                if (s11 === peg$FAILED) {\n                  s10 = void 0;\n                } else {\n                  peg$currPos = s10;\n                  s10 = peg$FAILED;\n                }\n                if (s10 !== peg$FAILED) {\n                  if (input.length > peg$currPos) {\n                    s11 = input.charAt(peg$currPos);\n                    peg$currPos++;\n                  } else {\n                    s11 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c72); }\n                  }\n                  if (s11 !== peg$FAILED) {\n                    s10 = [s10, s11];\n                    s9 = s10;\n                  } else {\n                    peg$currPos = s9;\n                    s9 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s9;\n                  s9 = peg$FAILED;\n                }\n                while (s9 !== peg$FAILED) {\n                  s8.push(s9);\n                  s9 = peg$currPos;\n                  s10 = peg$currPos;\n                  peg$silentFails++;\n                  if (peg$c75.test(input.charAt(peg$currPos))) {\n                    s11 = input.charAt(peg$currPos);\n                    peg$currPos++;\n                  } else {\n                    s11 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c76); }\n                  }\n                  peg$silentFails--;\n                  if (s11 === peg$FAILED) {\n                    s10 = void 0;\n                  } else {\n                    peg$currPos = s10;\n                    s10 = peg$FAILED;\n                  }\n                  if (s10 !== peg$FAILED) {\n                    if (input.length > peg$currPos) {\n                      s11 = input.charAt(peg$currPos);\n                      peg$currPos++;\n                    } else {\n                      s11 = peg$FAILED;\n                      if (peg$silentFails === 0) { peg$fail(peg$c72); }\n                    }\n                    if (s11 !== peg$FAILED) {\n                      s10 = [s10, s11];\n                      s9 = s10;\n                    } else {\n                      peg$currPos = s9;\n                      s9 = peg$FAILED;\n                    }\n                  } else {\n                    peg$currPos = s9;\n                    s9 = peg$FAILED;\n                  }\n                }\n                if (s8 !== peg$FAILED) {\n                  s7 = input.substring(s7, peg$currPos);\n                } else {\n                  s7 = s8;\n                }\n                if (s7 !== peg$FAILED) {\n                  peg$savedPos = s5;\n                  s6 = peg$c77(s1, s4, s6, s7);\n                  s5 = s6;\n                } else {\n                  peg$currPos = s5;\n                  s5 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s5;\n                s5 = peg$FAILED;\n              }\n              if (s5 === peg$FAILED) {\n                s5 = peg$currPos;\n                s6 = peg$c67;\n                if (s6 !== peg$FAILED) {\n                  peg$savedPos = s5;\n                  s6 = peg$c78(s1, s4);\n                }\n                s5 = s6;\n              }\n            }\n          }\n          if (s5 !== peg$FAILED) {\n            peg$savedPos = s3;\n            s4 = peg$c79(s1, s4, s5);\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n        if (s3 === peg$FAILED) {\n          s3 = peg$currPos;\n          s4 = peg$parse__();\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = s3;\n            s4 = peg$c80(s1, s4);\n          }\n          s3 = s4;\n          if (s3 === peg$FAILED) {\n            s3 = peg$currPos;\n            s4 = peg$currPos;\n            s5 = peg$currPos;\n            s6 = peg$currPos;\n            peg$silentFails++;\n            if (input.charCodeAt(peg$currPos) === 41) {\n              s7 = peg$c23;\n              peg$currPos++;\n            } else {\n              s7 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c24); }\n            }\n            peg$silentFails--;\n            if (s7 === peg$FAILED) {\n              s6 = void 0;\n            } else {\n              peg$currPos = s6;\n              s6 = peg$FAILED;\n            }\n            if (s6 !== peg$FAILED) {\n              s7 = peg$currPos;\n              peg$silentFails++;\n              s8 = peg$parserbm();\n              peg$silentFails--;\n              if (s8 === peg$FAILED) {\n                s7 = void 0;\n              } else {\n                peg$currPos = s7;\n                s7 = peg$FAILED;\n              }\n              if (s7 !== peg$FAILED) {\n                if (input.length > peg$currPos) {\n                  s8 = input.charAt(peg$currPos);\n                  peg$currPos++;\n                } else {\n                  s8 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c72); }\n                }\n                if (s8 !== peg$FAILED) {\n                  s6 = [s6, s7, s8];\n                  s5 = s6;\n                } else {\n                  peg$currPos = s5;\n                  s5 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s5;\n                s5 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s5;\n              s5 = peg$FAILED;\n            }\n            if (s5 !== peg$FAILED) {\n              s4 = input.substring(s4, peg$currPos);\n            } else {\n              s4 = s5;\n            }\n            if (s4 !== peg$FAILED) {\n              peg$savedPos = s3;\n              s4 = peg$c81(s1, s4);\n            }\n            s3 = s4;\n          }\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 41) {\n          s3 = peg$c23;\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c24); }\n        }\n        if (s3 === peg$FAILED) {\n          s3 = peg$currPos;\n          s4 = peg$currPos;\n          peg$silentFails++;\n          s5 = peg$parserbm();\n          peg$silentFails--;\n          if (s5 !== peg$FAILED) {\n            peg$currPos = s4;\n            s4 = void 0;\n          } else {\n            s4 = peg$FAILED;\n          }\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = s3;\n            s4 = peg$c82(s1, s2);\n          }\n          s3 = s4;\n        }\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c83(s1, s2, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 46) {\n        s1 = peg$c84;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c85); }\n      }\n      if (s1 === peg$FAILED) {\n        s1 = peg$c67;\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c86(s1);\n      }\n      s0 = s1;\n    }\n\n    return s0;\n  }\n\n  function peg$parserbm() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    s2 = [];\n    if (input.charCodeAt(peg$currPos) === 62) {\n      s3 = peg$c39;\n      peg$currPos++;\n    } else {\n      s3 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c40); }\n    }\n    while (s3 !== peg$FAILED) {\n      s2.push(s3);\n      if (input.charCodeAt(peg$currPos) === 62) {\n        s3 = peg$c39;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c40); }\n      }\n    }\n    if (s2 !== peg$FAILED) {\n      s1 = input.substring(s1, peg$currPos);\n    } else {\n      s1 = s2;\n    }\n    if (s1 !== peg$FAILED) {\n      if (input.charCodeAt(peg$currPos) === 93) {\n        s2 = peg$c87;\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c88); }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = peg$currPos;\n        s3 = peg$c89(s1, s2);\n        if (s3) {\n          s3 = void 0;\n        } else {\n          s3 = peg$FAILED;\n        }\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c90(s1, s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parseEOF();\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c91();\n      }\n      s0 = s1;\n    }\n\n    return s0;\n  }\n\n  function peg$parserbm_pop() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    s1 = peg$parserbm();\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c92(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parseEOF() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    peg$silentFails++;\n    if (input.length > peg$currPos) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c72); }\n    }\n    peg$silentFails--;\n    if (s1 === peg$FAILED) {\n      s0 = void 0;\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsetext() {\n    var s0, s1, s2, s3, s4, s5, s6;\n\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = peg$currPos;\n    s3 = peg$currPos;\n    peg$silentFails++;\n    s4 = peg$parselbm();\n    peg$silentFails--;\n    if (s4 === peg$FAILED) {\n      s3 = void 0;\n    } else {\n      peg$currPos = s3;\n      s3 = peg$FAILED;\n    }\n    if (s3 !== peg$FAILED) {\n      s4 = peg$currPos;\n      peg$silentFails++;\n      s5 = peg$parserbm();\n      peg$silentFails--;\n      if (s5 === peg$FAILED) {\n        s4 = void 0;\n      } else {\n        peg$currPos = s4;\n        s4 = peg$FAILED;\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$currPos;\n        peg$silentFails++;\n        if (input.charCodeAt(peg$currPos) === 96) {\n          s6 = peg$c93;\n          peg$currPos++;\n        } else {\n          s6 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c94); }\n        }\n        peg$silentFails--;\n        if (s6 === peg$FAILED) {\n          s5 = void 0;\n        } else {\n          peg$currPos = s5;\n          s5 = peg$FAILED;\n        }\n        if (s5 !== peg$FAILED) {\n          if (input.length > peg$currPos) {\n            s6 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s6 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c72); }\n          }\n          if (s6 !== peg$FAILED) {\n            peg$savedPos = s2;\n            s3 = peg$c95(s6);\n            s2 = s3;\n          } else {\n            peg$currPos = s2;\n            s2 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s2;\n          s2 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s2;\n        s2 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s2;\n      s2 = peg$FAILED;\n    }\n    if (s2 !== peg$FAILED) {\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$currPos;\n        s3 = peg$currPos;\n        peg$silentFails++;\n        s4 = peg$parselbm();\n        peg$silentFails--;\n        if (s4 === peg$FAILED) {\n          s3 = void 0;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n        if (s3 !== peg$FAILED) {\n          s4 = peg$currPos;\n          peg$silentFails++;\n          s5 = peg$parserbm();\n          peg$silentFails--;\n          if (s5 === peg$FAILED) {\n            s4 = void 0;\n          } else {\n            peg$currPos = s4;\n            s4 = peg$FAILED;\n          }\n          if (s4 !== peg$FAILED) {\n            s5 = peg$currPos;\n            peg$silentFails++;\n            if (input.charCodeAt(peg$currPos) === 96) {\n              s6 = peg$c93;\n              peg$currPos++;\n            } else {\n              s6 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c94); }\n            }\n            peg$silentFails--;\n            if (s6 === peg$FAILED) {\n              s5 = void 0;\n            } else {\n              peg$currPos = s5;\n              s5 = peg$FAILED;\n            }\n            if (s5 !== peg$FAILED) {\n              if (input.length > peg$currPos) {\n                s6 = input.charAt(peg$currPos);\n                peg$currPos++;\n              } else {\n                s6 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c72); }\n              }\n              if (s6 !== peg$FAILED) {\n                peg$savedPos = s2;\n                s3 = peg$c95(s6);\n                s2 = s3;\n              } else {\n                peg$currPos = s2;\n                s2 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s2;\n              s2 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s2;\n            s2 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s2;\n          s2 = peg$FAILED;\n        }\n      }\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c96(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parseverbatim() {\n    var s0, s1, s2, s3, s4;\n\n    s0 = peg$currPos;\n    s1 = peg$parselvm();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseverbatim_separator();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parseverbatim_text();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parservm();\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c97(s1, s2, s3, s4);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parselvm() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (input.charCodeAt(peg$currPos) === 96) {\n      s1 = peg$c93;\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c94); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      if (input.charCodeAt(peg$currPos) === 60) {\n        s3 = peg$c4;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c5); }\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        if (input.charCodeAt(peg$currPos) === 60) {\n          s3 = peg$c4;\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c5); }\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c98(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseverbatim_separator() {\n    var s0;\n\n    if (input.charCodeAt(peg$currPos) === 46) {\n      s0 = peg$c84;\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c85); }\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$c67;\n    }\n\n    return s0;\n  }\n\n  function peg$parservm() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = [];\n    if (input.charCodeAt(peg$currPos) === 62) {\n      s2 = peg$c39;\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c40); }\n    }\n    while (s2 !== peg$FAILED) {\n      s1.push(s2);\n      if (input.charCodeAt(peg$currPos) === 62) {\n        s2 = peg$c39;\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c40); }\n      }\n    }\n    if (s1 !== peg$FAILED) {\n      if (input.charCodeAt(peg$currPos) === 96) {\n        s2 = peg$c93;\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c94); }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = peg$currPos;\n        s3 = peg$c99(s1, s2);\n        if (s3) {\n          s3 = void 0;\n        } else {\n          s3 = peg$FAILED;\n        }\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c100(s1, s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parseEOF();\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c91();\n      }\n      s0 = s1;\n    }\n\n    return s0;\n  }\n\n  function peg$parseverbatim_text() {\n    var s0, s1, s2, s3, s4;\n\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = peg$currPos;\n    s3 = peg$currPos;\n    peg$silentFails++;\n    s4 = peg$parservm();\n    peg$silentFails--;\n    if (s4 === peg$FAILED) {\n      s3 = void 0;\n    } else {\n      peg$currPos = s3;\n      s3 = peg$FAILED;\n    }\n    if (s3 !== peg$FAILED) {\n      if (input.length > peg$currPos) {\n        s4 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s4 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c72); }\n      }\n      if (s4 !== peg$FAILED) {\n        peg$savedPos = s2;\n        s3 = peg$c95(s4);\n        s2 = s3;\n      } else {\n        peg$currPos = s2;\n        s2 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s2;\n      s2 = peg$FAILED;\n    }\n    while (s2 !== peg$FAILED) {\n      s1.push(s2);\n      s2 = peg$currPos;\n      s3 = peg$currPos;\n      peg$silentFails++;\n      s4 = peg$parservm();\n      peg$silentFails--;\n      if (s4 === peg$FAILED) {\n        s3 = void 0;\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        if (input.length > peg$currPos) {\n          s4 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s4 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c72); }\n        }\n        if (s4 !== peg$FAILED) {\n          peg$savedPos = s2;\n          s3 = peg$c95(s4);\n          s2 = s3;\n        } else {\n          peg$currPos = s2;\n          s2 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s2;\n        s2 = peg$FAILED;\n      }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c96(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parse_() {\n    var s0, s1, s2;\n\n    s0 = peg$currPos;\n    s1 = [];\n    if (peg$c101.test(input.charAt(peg$currPos))) {\n      s2 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c102); }\n    }\n    while (s2 !== peg$FAILED) {\n      s1.push(s2);\n      if (peg$c101.test(input.charAt(peg$currPos))) {\n        s2 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c102); }\n      }\n    }\n    if (s1 !== peg$FAILED) {\n      s0 = input.substring(s0, peg$currPos);\n    } else {\n      s0 = s1;\n    }\n\n    return s0;\n  }\n\n  function peg$parse__() {\n    var s0, s1, s2;\n\n    s0 = peg$currPos;\n    s1 = [];\n    if (peg$c101.test(input.charAt(peg$currPos))) {\n      s2 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c102); }\n    }\n    if (s2 !== peg$FAILED) {\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        if (peg$c101.test(input.charAt(peg$currPos))) {\n          s2 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c102); }\n        }\n      }\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s0 = input.substring(s0, peg$currPos);\n    } else {\n      s0 = s1;\n    }\n\n    return s0;\n  }\n\n\n  \tvar bstack = [], vlevel;\n\n\n  peg$result = peg$startRuleFunction();\n\n  if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n    return peg$result;\n  } else {\n    if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n      peg$fail(peg$endExpectation());\n    }\n\n    throw peg$buildStructuredError(\n      peg$maxFailExpected,\n      peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,\n      peg$maxFailPos < input.length\n        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)\n        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)\n    );\n  }\n}\n\nmodule.exports = {\n  SyntaxError: peg$SyntaxError,\n  parse:       peg$parse\n};\n","import defaultTagNameMap from './elements/default';\nimport cascade from '../cascade';\nimport Element from './nodes/Element';\nimport ElementClass from './nodes/ElementClass';\nimport Node from './nodes/Node';\nimport ErrorNode from './nodes/ErrorNode';\nimport TextNode from './nodes/TextNode';\nimport HtmlNode from './nodes/HtmlNode';\nimport { AstRootType, AstType } from '../parser';\n\nvar rootClass = new ElementClass({\n\tname: '[root]',\n\tdisplay: 'container-block',\n\trenderer: el => el.html(el.innerHtml as string)\n});\n\nfunction ast2nt(ast: AstRootType, options): Element {\n\tif (!options) options = {};\n\tif (!options.tags) options.tags = {};\n\n\tvar tagNameMap = cascade.tags(defaultTagNameMap, options.tags);\n\t\n\tvar root = (function recurse(tree: AstType): Node {\n\t\tif (tree.type == 'root') {\n\t\t\treturn rootClass.instantiate({\n\t\t\t\tcode: tree.code,\n\t\t\t\tattributes: [],\n\t\t\t\tchildren: tree.children.map(recurse),\n\t\t\t\toptions\n\t\t\t});\n\t\t}\n\t\tif (tree.type == 'text') {\n\t\t\treturn new TextNode(tree.text);\n\t\t}\n\t\t\n\t\t// @ts-ignore\n\t\tif (tree.type == 'error') {\n\t\t\treturn new ErrorNode({\n\t\t\t\tmessage: 'Parser error',\n\t\t\t\t// @ts-ignore\n\t\t\t\tcode: tree.text\n\t\t\t});\n\t\t}\n\t\t\n\t\tif (tree.type == 'element') {\n\t\t\tif (tree.name in tagNameMap && tagNameMap[tree.name]) {\n\t\t\t\tif (tagNameMap[tree.name].split) {\n\t\t\t\t\tvar recurseSplit = (list, split) => {\n\t\t\t\t\t\tif (split.length == 0)\n\t\t\t\t\t\t\treturn list.map(recurse);\n\n\t\t\t\t\t\tvar s = split[split.length - 1];\n\n\t\t\t\t\t\tvar a = [], b;\n\n\t\t\t\t\t\t// find delimiters\n\t\t\t\t\t\tlist = list.map(l => {\n\t\t\t\t\t\t\tif (l.type == 'element' && l.name == s\n\t\t\t\t\t\t\t\t\t&& !l.children.length) {\n\t\t\t\t\t\t\t\treturn ({\n\t\t\t\t\t\t\t\t\ttype: 'delimiter'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn l;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// trim left\n\t\t\t\t\t\tif (list.length && list[0].type == 'text'\n\t\t\t\t\t\t\t\t&& !list[0].text.trim()) {\n\t\t\t\t\t\t\tlist = list.slice(1);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// add omitted delimiter\n\t\t\t\t\t\tif (!(list.length && list[0].type == 'delimiter')) {\n\t\t\t\t\t\t\tlist.unshift({\n\t\t\t\t\t\t\t\ttype: 'delimiter'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\t\t\t\t\tif (list[i].type == 'delimiter') {\n\t\t\t\t\t\t\t\tif (b) a.push(b);\n\t\t\t\t\t\t\t\tb = [];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tb.push(list[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ta.push(b);\n\n\t\t\t\t\t\treturn a.map(e => recurseSplit(e, split.slice(0, -1)));\n\t\t\t\t\t};\n\n\t\t\t\t\treturn tagNameMap[tree.name].instantiate({\n\t\t\t\t\t\tcode: tree.code,\n\t\t\t\t\t\tattributes: tree.attributes,\n\t\t\t\t\t\tchildren: recurseSplit(\n\t\t\t\t\t\t\ttree.children,\n\t\t\t\t\t\t\ttagNameMap[tree.name].split\n\t\t\t\t\t\t),\n\t\t\t\t\t\toptions\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn tagNameMap[tree.name].instantiate({\n\t\t\t\t\tcode: tree.code,\n\t\t\t\t\tattributes: tree.attributes,\n\t\t\t\t\tchildren: tree.children.map(recurse),\n\t\t\t\t\toptions\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn new ErrorNode({\n\t\t\t\tmessage: tree.name ? `Undefined tag name [${tree.name}]` : 'No tag name',\n\t\t\t\tcode: tree.code\n\t\t\t});\n\t\t}\n\n\t\t// @ts-ignore\n\t\tthrow TypeError(tree.type);\n\t})(ast.root) as Element;\n\n\troot.render();\n\n\treturn root;\n}\n\nexport default {\n\tast2nt,\n\tNode,\n\tTextNode,\n\tHtmlNode,\n\tErrorNode,\n\tElementClass,\n\tElement\n};\n","import ElementClass from \"../nodes/ElementClass\";\n\nvar tagNameMap: any = {};\n\ntagNameMap.comment = new ElementClass({\n\tname: 'comment',\n\tdisplay: 'inline',\n\trenderer: el => el.text('')\n});\n\ntagNameMap.entity = new ElementClass({\n\tname: 'entity',\n\tdisplay: 'inline',\n\trenderer: el => {\n\t\tif (!el.innerIsText)\n\t\t\treturn el.error('Non-text input');\n\n\t\tif(!/^([a-z]{1,50}|#[0-9]{1,10}|#x[0-9a-f]{1,10})$/i.test(el.innerText as string))\n\t\t\treturn el.error('Invalid value');\n\n\t\treturn el.html(`&${el.innerText};`);\n\t}\n});\n\n[\n\t'b', 'code', 'i', 'u', 'sup', 'sub'\n].forEach(name => tagNameMap[name] = new ElementClass({\n\tname: name,\n\tdisplay: 'inline',\n\trenderer: el => {\n\t\treturn el.html(`<${name}>${el.innerHtml}</${name}>`);\n\t}\n}));\n\n[\n\t'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'p'\n].forEach(name => tagNameMap[name] = new ElementClass({\n\tname: name,\n\tdisplay: 'leaf-block',\n\trenderer: el => {\n\t\treturn el.html(`<${name}>${el.innerHtml}</${name}>`);\n\t}\n}));\n\ntagNameMap['blockquote'] = new ElementClass({\n\tname: 'blockquote',\n\tdisplay: 'container-block',\n\trenderer: el => {\n\t\tvar type = el.getAttribute('type');\n\n\t\tif (['info', 'warn'].includes(type))\n\t\t\treturn el.html(`<blockquote class=\"m42kup-bq-${type}\">${el.innerHtml}</blockquote>`);\n\n\t\treturn el.html(`<blockquote>${el.innerHtml}</blockquote>`);\n\t}\n});\n\n[\n\t'br'\n].forEach(name => tagNameMap[name] = new ElementClass({\n\tname,\n\tdisplay: 'inline',\n\trenderer: el => {\n\t\treturn el.html(`<${name}>${el.innerHtml}`);\n\t}\n}));\n\n[\n\t'hr'\n].forEach(name => tagNameMap[name] = new ElementClass({\n\tname,\n\tdisplay: 'leaf-block',\n\trenderer: el => {\n\t\treturn el.html(`<${name}>${el.innerHtml}`);\n\t}\n}));\n\n['ul', 'ol'].forEach(name => {\n\ttagNameMap[name] = new ElementClass({\n\t\tname,\n\t\tdisplay: 'container-block',\n\t\tsplit: '*',\n\t\trenderer: el => {\n\t\t\treturn el.html(`<${name}>`\n\t\t\t\t+ (el.innerHtml as string[]).map(h => `<li>${h}</li>`).join('')\n\t\t\t\t+ `</${name}>`);\n\t\t}\n\t});\n});\n\ntagNameMap.table = new ElementClass({\n\tname: 'table',\n\tdisplay: 'container-block',\n\tsplit: ['*', '**'],\n\trenderer: el => {\n\t\tvar n = (el.innerHtml as string[][]).map(e => e.length).reduce((l, r) => l < r ? r : l);\n\n\t\treturn el.html('<table>'\n\t\t\t+ (el.innerHtml as string[][]).map(hh => `<tr>${\n\t\t\t\thh.concat(Array(n - hh.length).fill(''))\n\t\t\t\t\t.map(h => `<td>${h}</td>`).join('')\n\t\t\t}</tr>`).join('')\n\t\t\t+ '</table>');\n\t}\n});\n\ntagNameMap.blockcode = new ElementClass({\n\tname: 'blockcode',\n\tdisplay: 'leaf-block',\n\trenderer: el => {\n\t\tvar trimmed = (el.innerHtml as string).replace(/(^[ \\t]*(\\r\\n|\\r|\\n))|((\\r\\n|\\r|\\n)[ \\t]*$)/g, '');\n\t\treturn el.html(`<pre><code>${trimmed}\\n</code></pre>`);\n\t}\n});\n\ntagNameMap.bi = new ElementClass({\n\tname: 'bi',\n\tdisplay: 'inline',\n\trenderer: el => {\n\t\treturn el.html(`<i><b>${el.innerHtml}</b></i>`);\n\t}\n});\n\nfunction normalizeUrl(url) {\n\turl = url.trim();\n\n\t// fragment\n\tif (/^#/.test(url)) {\n\t\tif (/^#[^\\s]*$/.test(url)) {\n\t\t\treturn url;\n\t\t} else return false;\n\t}\n\n\t// relative URL\n\tif (/^(\\/|\\.\\/|\\.\\.\\/)/.test(url)) {\n\t\tif (/^(\\/|\\.\\/|\\.\\.\\/)[^\\s]*$/.test(url)) {\n\t\t\treturn url;\n\t\t} else return false;\n\t}\n\n\tif (!/^(http:\\/\\/|https:\\/\\/|ftp:\\/\\/)/.test(url))\n\t\turl = 'http://' + url;\n\n\t// see issue #17\n\tif (/^(http:\\/\\/|https:\\/\\/|ftp:\\/\\/)[a-z0-9]+(-+[a-z0-9]+)*(\\.[a-z0-9]+(-+[a-z0-9]+)*)+\\.?(:[0-9]{1,5})?(\\/[^\\s]*)?$/.test(url)) {\n\t\treturn url;\n\t} else return false;\n}\n\ntagNameMap.link = new ElementClass({\n\tname: 'link',\n\tdisplay: 'inline',\n\trenderer: el => {\n\t\tvar href = el.getAttribute('href');\n\n\t\tif (href == null) {\n\t\t\tif (!el.innerIsText)\n\t\t\t\treturn el.error('Non-text input');\n\n\t\t\tlet url = normalizeUrl(el.innerText);\n\t\t\tif (!url) return el.error('Invalid URL');\n\n\t\t\tlet htmlUrl = el.escapeHtml(url);\n\t\t\treturn el.html(`<a href=\"${htmlUrl}\" title=\"${htmlUrl}\">${htmlUrl}</a>`);\n\t\t} else {\n\t\t\tlet url = normalizeUrl(href);\n\t\t\tif (!url) return el.error('Invalid URL');\n\n\t\t\tlet htmlUrl = el.escapeHtml(url);\n\t\t\treturn el.html(`<a href=\"${htmlUrl}\" title=\"${htmlUrl}\">${el.innerHtml}</a>`);\n\t\t}\n\t}\n});\n\ntagNameMap.img = new ElementClass({\n\tname: 'img',\n\tdisplay: 'leaf-block',\n\trenderer: el => {\n\t\tif (!el.innerIsText)\n\t\t\treturn el.error('Non-text input');\n\n\t\tvar url = normalizeUrl(el.innerText);\n\t\tif (!url) return el.error('Invalid URL');\n\n\t\tvar htmlUrl = el.escapeHtml(url);\n\t\treturn el.html(`<img src=\"${htmlUrl}\">`);\n\t}\n});\n\n[\n\t'squote', 'dquote'\n].forEach(name => tagNameMap[name] = new ElementClass({\n\tname,\n\tdisplay: 'inline',\n\trenderer: el => {\n\t\tvar quotes = {\n\t\t\tsquote: {\n\t\t\t\tnormal: ['\\u2018', '\\u2019'],\n\t\t\t\tangle: ['\\u3008', '\\u3009'],\n\t\t\t\tcorner: ['\\u300c', '\\u300d']\n\t\t\t},\n\t\t\tdquote: {\n\t\t\t\tnormal: ['\\u201c', '\\u201d'],\n\t\t\t\tangle: ['\\u300a', '\\u300b'],\n\t\t\t\tcorner: ['\\u300e', '\\u300f']\n\t\t\t}\n\t\t};\n\n\t\tvar type = el.getAttribute('type');\n\t\tif (!['angle', 'corner'].includes(type))\n\t\t\ttype = 'normal';\n\n\t\treturn el.html(`${quotes[name][type][0]}${el.innerHtml}${quotes[name][type][1]}`);\n\t}\n}));\n\ntagNameMap.highlight = new ElementClass({\n\tname: 'highlight',\n\tdisplay: 'leaf-block',\n\trenderer: (el, options) => {\n\t\tif (!options.hljs)\n\t\t\treturn el.error('Element not implemented (options.highlight not given)');\n\n\t\tif (!el.innerIsText)\n\t\t\treturn el.error('Non-text input');\n\n\t\tvar commonLangs = [\n\t\t\t'apache', 'bash', 'coffeescript', 'cpp', 'cs',\n\t\t\t'css', 'diff', 'http', 'ini', 'java',\n\t\t\t'javascript', 'json', 'makefile', 'xml', 'markdown',\n\t\t\t'nginx', 'objectivec', 'perl', 'php', 'python',\n\t\t\t'ruby', 'sql'\n\t\t];\n\n\t\tvar trimmed = (el.innerText as string).replace(/(^[ \\t]*(\\r\\n|\\r|\\n))|((\\r\\n|\\r|\\n)[ \\t]*$)/g, '');\n\n\t\tvar highlighted;\n\n\t\tif (commonLangs.includes(el.getAttribute('lang'))) {\n\t\t\tvar lang = el.getAttribute('lang');\n\t\t\thighlighted = options.hljs.highlight(lang, trimmed).value;\n\t\t} else {\n\t\t\thighlighted = options.hljs.highlightAuto(trimmed, commonLangs).value;\n\t\t}\n\n\t\treturn el.html(`<pre class=\"hljs\"><code>${highlighted}\\n</code></pre>`);\n\t}\n});\n \ntagNameMap.math = new ElementClass({\n\tname: 'math',\n\tdisplay: 'inline',\n\trenderer: (el, options) => {\n\t\tif (!options.katex)\n\t\t\treturn el.error('Element not implemented (options.katex not given)');\n\n\t\tif (!el.innerIsText)\n\t\t\treturn el.error('Non-text input');\n\n\t\tvar rendered = options.katex.renderToString(el.innerText, {\n\t\t\tthrowOnError: false,\n\t\t\tdisplayMode: false,\n\t\t\tstrict: 'error'\n\t\t});\n\n\t\treturn el.html(rendered);\n\t}\n});\n\ntagNameMap.displaymath = new ElementClass({\n\tname: 'displaymath',\n\tdisplay: 'leaf-block',\n\trenderer: (el, options) => {\n\t\tif (!options.katex)\n\t\t\treturn el.error('Element not implemented (options.katex not given)');\n\n\t\tif (!el.innerIsText)\n\t\t\treturn el.error('Non-text input');\n\n\t\tvar rendered = options.katex.renderToString(el.innerText, {\n\t\t\tthrowOnError: false,\n\t\t\tdisplayMode: true,\n\t\t\tstrict: 'error'\n\t\t});\n\n\t\treturn el.html(rendered);\n\t}\n});\n\n// tag name aliases ordered by char code\nvar aliases = {\n\t'\"': 'dquote',\n\t'$': 'math',\n\t'$$': 'displaymath',\n\t'%': 'comment',\n\t'&': 'entity',\n\t'\\'': 'squote',\n\t'*': 'i',\n\t'**': 'b',\n\t'***': 'bi',\n\t';': 'code',\n\t';;': 'blockcode',\n\t';;;': 'highlight',\n\t'=': 'h1',\n\t'==': 'h2',\n\t'===': 'h3',\n\t'====': 'h4',\n\t'=====': 'h5',\n\t'======': 'h6',\n\t'>': 'blockquote',\n\t'\\\\': 'br',\n\t'^': 'sup',\n\t'_': 'sub',\n\t'~': 'link',\n\t'~~': 'img'\n};\n\nfor (var k in aliases) {\n\tif (!tagNameMap[aliases[k]]) {\n\t\tthrow TypeError('aliasing failed');\n\t}\n\ttagNameMap[k] = tagNameMap[aliases[k]];\n}\n\nexport default tagNameMap;","var escapeHtml = s => (s + '').replace(/[&<>\"']/g, m => ({\n\t'&': '&amp;', '<': '&lt;', '>': '&gt;',\n\t'\"': '&quot;', '\\'': '&#39;'\n})[m]);\n\nfunction makeHtml(fragment) {\n\treturn `<span class=\"m42hl-${fragment.type}\">${fragment.html || escapeHtml(fragment.text)}</span>`;\n}\n\nfunction pt2hl(pt) {\n\treturn (function recurse(pt) {\n\t\tvar ret = '';\n\n\t\tfor (var i = 0; i < pt.length; i++) {\n\t\t\tswitch(pt[i].type) {\n\t\t\t\tcase 'text':\n\t\t\t\t\tret += makeHtml({\n\t\t\t\t\t\ttype: 'tx',\n\t\t\t\t\t\ttext: pt[i].text\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'element':\n\t\t\t\t\tvar tmp = makeHtml({\n\t\t\t\t\t\ttype: 'lbm',\n\t\t\t\t\t\ttext: pt[i].lbm\n\t\t\t\t\t})\n\t\t\t\t\t\t+ makeHtml({\n\t\t\t\t\t\ttype: 'tn',\n\t\t\t\t\t\ttext: pt[i].name\n\t\t\t\t\t})\n\t\t\t\t\t\t+ (p => {\n\t\t\t\t\t\tswitch (p._type) {\n\t\t\t\t\t\t\tcase 'parenthesis':\n\t\t\t\t\t\t\t\treturn makeHtml({\n\t\t\t\t\t\t\t\t\ttype: 'lpm',\n\t\t\t\t\t\t\t\t\ttext: p.left\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t+ p.content.map(q => {\n\t\t\t\t\t\t\t\t\tswitch (q._type) {\n\t\t\t\t\t\t\t\t\t\tcase 'attribute':\n\t\t\t\t\t\t\t\t\t\t\treturn makeHtml({\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'pk',\n\t\t\t\t\t\t\t\t\t\t\t\ttext: q.attribute[0]\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t+ makeHtml({\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'eq',\n\t\t\t\t\t\t\t\t\t\t\t\ttext: q.attribute[1]\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t+ makeHtml({\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'lqm',\n\t\t\t\t\t\t\t\t\t\t\t\ttext: q.attribute[2]\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t+ makeHtml({\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'pv',\n\t\t\t\t\t\t\t\t\t\t\t\ttext: q.attribute[3]\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t+ makeHtml({\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'rqm',\n\t\t\t\t\t\t\t\t\t\t\t\ttext: q.attribute[4]\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tcase 'whitespace':\n\t\t\t\t\t\t\t\t\t\t\treturn makeHtml({\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'tx',\n\t\t\t\t\t\t\t\t\t\t\t\ttext: q.whitespace\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tcase 'error':\n\t\t\t\t\t\t\t\t\t\t\treturn makeHtml({\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'err',\n\t\t\t\t\t\t\t\t\t\t\t\ttext: q.error\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\tthrow Error('Unknown type');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}).join('')\n\t\t\t\t\t\t\t\t+ makeHtml({\n\t\t\t\t\t\t\t\t\ttype: 'rpm',\n\t\t\t\t\t\t\t\t\ttext: p.right\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tcase 'separator':\n\t\t\t\t\t\t\t\treturn makeHtml({\n\t\t\t\t\t\t\t\t\ttype: 'sp',\n\t\t\t\t\t\t\t\t\ttext: p.separator\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tthrow Error('Unknown type');\n\t\t\t\t\t\t}\n\t\t\t\t\t})(pt[i].attributes)\n\t\t\t\t\t\t+ recurse(pt[i].children)\n\t\t\t\t\t\t+ makeHtml({\n\t\t\t\t\t\ttype: 'rbm',\n\t\t\t\t\t\ttext: pt[i].rbm\n\t\t\t\t\t});\n\n\t\t\t\t\tret += makeHtml({\n\t\t\t\t\t\ttype: 'elem',\n\t\t\t\t\t\thtml: tmp\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'verbatim':\n\t\t\t\t\tvar tmp2 = makeHtml({\n\t\t\t\t\t\ttype: 'lvm',\n\t\t\t\t\t\ttext: pt[i].lvm + pt[i].separator\n\t\t\t\t\t})\n\t\t\t\t\t\t+ makeHtml({\n\t\t\t\t\t\ttype: 'tx',\n\t\t\t\t\t\ttext: pt[i].child.text\n\t\t\t\t\t})\n\t\t\t\t\t\t+ makeHtml({\n\t\t\t\t\t\ttype: 'rvm',\n\t\t\t\t\t\ttext: pt[i].rvm\n\t\t\t\t\t});\n\n\t\t\t\t\tret += makeHtml({\n\t\t\t\t\t\ttype: 'verb',\n\t\t\t\t\t\thtml: tmp2\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new TypeError(`Unknown type: ${pt[i].type}`);\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\t})(pt.root.children);\n}\n\nexport default {\n\tpt2hl\n};","var STATE_NORMAL = 0,\n\tSTATE_ATTRIBUTE_NAME = 1,\n\tSTATE_ATTRIBUTE_EQ = 2,\n\tSTATE_ATTRIBUTE_VALUE = 3,\n\tSTATE_ATTRIBUTE_DQUOTE = 4,\n\tSTATE_ATTRIBUTE_SQUOTE = 5;\n\nexport default function addCodeMirrorMode(CodeMirror) {\n\tfunction token(stream, state) {\n\t\tif ((state.levels[state.levels.length - 1] || 0) < 0) {\n\t\t\tvar lvmLevel = -state.levels[state.levels.length - 1];\n\t\t\tvar rvmString = '>'.repeat(lvmLevel - 1) + '`';\n\t\t\tif (stream.skipTo(rvmString)) {\n\t\t\t\tstream.match(rvmString);\n\t\t\t\tstate.levels.pop();\n\t\t\t} else stream.skipToEnd();\n\n\t\t\treturn 'comment';\n\t\t}\n\n\t\tvar c = stream.peek();\n\n\t\tif (![STATE_ATTRIBUTE_DQUOTE, STATE_ATTRIBUTE_SQUOTE].includes(state.status)\n\t\t\t\t&& ['>', ']'].includes(c)) {\n\t\t\tvar lbmLevel = state.levels[state.levels.length - 1] || 0;\n\t\t\tif (lbmLevel > 0) {\n\t\t\t\tvar rbmString = '>'.repeat(lbmLevel - 1) + ']';\n\t\t\t\tif (stream.match(rbmString)) {\n\t\t\t\t\tstate.levels.pop();\n\t\t\t\t\tstate.status = STATE_NORMAL;\n\t\t\t\t\treturn 'tag';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (state.status != STATE_NORMAL) {\n\t\t\tif (stream.match(')')) {\n\t\t\t\tstate.status = STATE_NORMAL;\n\t\t\t\treturn 'tag';\n\t\t\t}\n\n\t\t\tif (state.status == STATE_ATTRIBUTE_NAME) {\n\t\t\t\tif (stream.match(/^[a-z0-9-]+/)) {\n\t\t\t\t\tstate.status = STATE_ATTRIBUTE_EQ;\n\t\t\t\t\treturn 'attribute';\n\t\t\t\t} else if (stream.match(/^[ \\t\\n\\r]+/)) {\n\t\t\t\t\treturn null;\n\t\t\t\t} else {\n\t\t\t\t\tstream.next();\n\t\t\t\t\treturn 'error';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (state.status == STATE_ATTRIBUTE_EQ) {\n\t\t\t\tif (stream.match('=')) {\n\t\t\t\t\tstate.status = STATE_ATTRIBUTE_VALUE;\n\t\t\t\t\treturn null;\n\t\t\t\t} else {\n\t\t\t\t\tstate.status = STATE_ATTRIBUTE_NAME;\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (state.status == STATE_ATTRIBUTE_VALUE) {\n\t\t\t\tif (stream.match('\"')) {\n\t\t\t\t\tstate.status = STATE_ATTRIBUTE_DQUOTE;\n\t\t\t\t\treturn 'string';\n\t\t\t\t}\n\n\t\t\t\tif (stream.match(\"'\")) {\n\t\t\t\t\tstate.status = STATE_ATTRIBUTE_SQUOTE;\n\t\t\t\t\treturn 'string';\n\t\t\t\t}\n\n\t\t\t\tstream.match(/^[^'\"()\\[\\] \\t\\n\\r]*/);\n\t\t\t\tstate.status = STATE_ATTRIBUTE_NAME;\n\t\t\t\treturn 'string';\n\t\t\t}\n\n\t\t\tif (state.status == STATE_ATTRIBUTE_DQUOTE) {\n\t\t\t\tif (stream.skipTo('\"')) {\n\t\t\t\t\tstream.match('\"');\n\t\t\t\t\tstate.status = STATE_ATTRIBUTE_NAME;\n\t\t\t\t} else stream.skipToEnd();\n\n\t\t\t\treturn 'string';\n\t\t\t}\n\n\t\t\tif (state.status == STATE_ATTRIBUTE_SQUOTE) {\n\t\t\t\tif (stream.skipTo(\"'\")) {\n\t\t\t\t\tstream.match(\"'\");\n\t\t\t\t\tstate.status = STATE_ATTRIBUTE_NAME;\n\t\t\t\t} else stream.skipToEnd();\n\n\t\t\t\treturn 'string';\n\t\t\t}\n\t\t}\n\n\t\tif (c == '`') {\n\t\t\tstream.next();\n\n\t\t\tvar level = 1;\n\t\t\twhile (c = stream.next()) {\n\t\t\t\tif (c != '<') {\n\t\t\t\t\tstream.backUp(1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tlevel++;\n\t\t\t}\n\n\t\t\tstate.levels.push(-level);\n\n\t\t\treturn 'comment';\n\t\t} else if (c == '[') {\n\t\t\tstream.next();\n\n\t\t\tvar level = 1;\n\t\t\twhile (c = stream.next()) {\n\t\t\t\tif (c != '<') {\n\t\t\t\t\tstream.backUp(1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tlevel++;\n\t\t\t}\n\n\t\t\tvar currentLevel = state.levels[state.levels.length - 1] || 0;\n\t\t\tif (level < currentLevel) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tvar tagNameRegex = /^(?:\\!+|\\\"+|\\#+|\\$+|\\%+|\\&+|\\'+|\\)+|\\*+|\\++|\\,+|\\-+|\\/+|\\;+|\\=+|\\>+|\\?+|\\@+|\\\\+|\\^+|\\_+|\\{+|\\|+|\\}+|\\~+|[a-z][a-z0-9]*(?:\\:[a-z][a-z0-9]*)*|)/;\n\n\t\t\tstream.match(tagNameRegex);\n\n\t\t\tif (stream.match('(')) {\n\t\t\t\tstate.status = STATE_ATTRIBUTE_NAME;\n\t\t\t} else {\n\t\t\t\tvar separatorRegex = /^(?:[.]|)/i;\n\t\t\t\tstream.match(separatorRegex);\n\t\t\t}\n\n\t\t\tstate.levels.push(level);\n\n\t\t\treturn 'tag';\n\t\t} else if (c == '>' || c == ']') {\n\t\t\tvar lbmLevel = state.levels[state.levels.length - 1] || 0;\n\t\t\tif (lbmLevel <= 0) {\n\t\t\t\tstream.next();\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tvar rbmString = '>'.repeat(lbmLevel - 1) + ']';\n\t\t\tif (stream.match(rbmString)) {\n\t\t\t\tstate.levels.pop();\n\t\t\t\treturn 'tag';\n\t\t\t} else {\n\t\t\t\tstream.next();\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}  else /* none of '[', ']', '`', '>' */ {\n\t\t\t// reduce text normalization overhead\n\t\t\tstream.match(/^[^\\[\\]`>]+/);\n\t\t}\n\t}\n\n\tCodeMirror.defineMode('m42kup', (config, parserConfig) => ({\n\t\tstartState(baseColumn) {\n\t\t\treturn {\n\t\t\t\tlevels: [],\n\t\t\t\tstatus: STATE_NORMAL\n\t\t\t}\n\t\t},\n\t\ttoken\n\t}));\n};"],"sourceRoot":""}