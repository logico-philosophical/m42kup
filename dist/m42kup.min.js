var m42kup=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=2)}([function(t,e,r){"use strict";const n=t=>(t+"").replace(/[&<>"']/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[t]);function o(){}function i(t){t.prototype=Object.create(o.prototype),Object.defineProperty(t.prototype,"constructor",{value:t,enumerable:!1,writable:!0})}function a(t){if("string"!=typeof t)throw TypeError("text not string");this.text=t}function s({html:t,display:e}){if("string"!=typeof t)throw TypeError("html not string");if(!["inline","leaf-block","container-block"].includes(e))throw TypeError('arg0.display should be one of "inline", "leaf-block", or "container-block".');this.html=t,this.display=e}function c({message:t,code:e}){if("string"!=typeof t)throw TypeError("message not string");if("string"!=typeof e)throw TypeError("code not string");this.message=t,this.code=e}function l({name:t,display:e,render:r,split:n}){if(!t)throw TypeError("You give arg0 a bad name");if(!["inline","leaf-block","container-block"].includes(e))throw TypeError('arg0.display should be one of "inline", "leaf-block", or "container-block".');if(!(r instanceof Function))throw TypeError("arg0.render should be a function");if([this.name,this.display]=[t,e],this.render=(t,e)=>{if(!(t instanceof h))throw TypeError("arg0 should be an instance of m42kup.renderer.Element");return r(t,e)},void 0!==n){if("string"==typeof n&&(n=[n]),!(n instanceof Array))throw TypeError("arg0.split should be either undefined, a string, or an array");if(!n.length)throw TypeError("arg0.split.length == 0");this.split=n}}function h({name:t,display:e,render:r,code:o,attributes:i,children:l,split:u,options:p}){if(!t)throw TypeError("You give arg0 a bad name");if(!["inline","leaf-block","container-block"].includes(e))throw TypeError('arg0.display should be one of "inline", "leaf-block", or "container-block".');if(!(r instanceof Function))throw TypeError("arg0.render should be a function");if("string"!=typeof o)throw TypeError("You give arg0 a bad code");if(!(i instanceof Array))throw TypeError("attributes should be an array");if((()=>{var t=e=>e instanceof h||e instanceof a||e instanceof c||e instanceof Array&&e.every(t);if(!l.every(t))throw TypeError("All arg0.children should either be an Element, a TextNode, or an ErrorNode")})(),void 0!==u){if("string"==typeof u&&(u=[u]),!(u instanceof Array))throw TypeError("arg0.split should be either undefined, a string, or an array");if(!u.length)throw TypeError("arg0.split.length == 0");this.split=u}var f,d;[this.name,this.display,this.code,this.attributes,this.children]=[t,e,o,i,l],this.innerIsText=(f=u?u.length:0,(d=(t,e)=>e>0?t.map(t=>d(t,e-1)):t.map(t=>t instanceof a||!(t instanceof c)&&t.outerIsText).every(t=>t))(l,f)),this.innerText=(()=>{var t=u?u.length:0,e=(t,r,n)=>r>0?t.map((t,o)=>e(t,r-1,n[o])):n?t.map(t=>t instanceof a?t.text:t.outerText).join(""):null;return e(l,t,this.innerIsText)})(),this.innerHtml=(()=>{var t=u?u.length:0,e=(t,r,o,i)=>{if(r>0)return t.map((t,n)=>e(t,r-1,o[n],i[n]));if(o)return i.trim()&&"container-block"==this.display?i.split(/(?:\r\n[ \t]*){2,}|(?:\r[ \t]*){2,}|(?:\n[ \t]*){2,}/).filter(t=>!!t.trim()).map(n).map(t=>`<p>${t}</p>`).join(""):n(i);if("container-block"!=this.display)return t.map(t=>t instanceof a?n(t.text):t instanceof c?t.toHtml():t.outerHtml).join("");var s=[],l=[],h=()=>{l.length&&(s.push(l),l=[])},u=t=>l.push(t);return t.forEach(t=>{if(t instanceof a){var e=t.text.split(/(?:\r\n[ \t]*){2,}|(?:\r[ \t]*){2,}|(?:\n[ \t]*){2,}/);if(e.length<2)return u(t);e.forEach((t,r)=>{t.trim()&&u(this.text(t)),r<e.length-1&&h()})}else t instanceof c?u(t):"inline"!=t.display?(h(),s.push(t),h()):u(t)}),h(),s.map(t=>t instanceof Array?"<p>"+t.map(t=>t instanceof a?n(t.text):t instanceof c?t.toHtml():t.outerHtml).join("")+"</p>":t.outerHtml).join("")};return e(l,t,this.innerIsText,this.innerText)})();var m=r(this,p);if(this.outerIsText=m instanceof a,this.outerText=this.outerIsText?m.text:null,this.isError=m instanceof c,this.errorMessage=m instanceof c?m.message:null,this.outerIsText)this.outerHtml=n(this.outerText);else if(m instanceof s)this.outerHtml=m.html;else{if(!(m instanceof c))throw TypeError("Render output should be one of TextNode, HtmlNode, or ErrorNode");this.outerHtml=m.toHtml()}}i(a),a.prototype.toString=function(){return this.toIndentedString(0)},a.prototype.toIndentedString=function(t){return"\t".repeat(t)+`Text {${JSON.stringify(this.text)}}`},i(s),s.prototype.toString=function(){return this.toIndentedString(0)},s.prototype.toIndentedString=function(t){var e=["display"].map(t=>t+"="+JSON.stringify(this[t])).join(" ");return"\t".repeat(t)+`Html(${e}) {${JSON.stringify(this.html)}}`},i(c),c.prototype.toHtml=function(){return`<code class="m42kup-error" title="Error: ${n(this.message)}">${n(this.code)}</code>`},c.prototype.toString=function(){return this.toIndentedString(0)},c.prototype.toIndentedString=function(t){var e=["message","code"].map(t=>t+"="+JSON.stringify(this[t])).join(" ");return"\t".repeat(t)+`Error(${e})`},l.prototype.instantiate=function({code:t,attributes:e,children:r,options:n}){if(!(this instanceof l))throw Error("ElementClass.prototype.instantiate should be called as a method of an ElementClass instance");return new h({name:this.name,display:this.display,render:this.render,code:t,attributes:e,children:r,split:this.split,options:n})},i(h),h.prototype.text=function(t){return new a(t)},h.prototype.html=function(t){return new s({html:t,display:this.display})},h.prototype.error=function(t){return new c({message:`[${this.name}]: ${t}`,code:this.code})},h.prototype.getAttribute=function(t){for(var e=0;e<this.attributes.length;e++)if(this.attributes[e].name==t)return this.attributes[e].value;return null},h.prototype.toString=function(){return this.toIndentedString(0)},h.prototype.toIndentedString=function(t){var e=["display","code","attributes","split","isError","errorMessage","innerIsText","innerText","innerHtml","outerIsText","outerText","outerHtml"].map(t=>t+"="+("string"==typeof this[t]||this[t]instanceof Array?JSON.stringify(this[t]):this[t]+"")).join("\n"+"\t".repeat(t+1)),r=this.children.map(e=>e.toIndentedString(t+1)).join(",\n");return"\t".repeat(t)+`Element[${JSON.stringify(this.name)}](\n`+`${"\t".repeat(t+1)}${e}\n`+`${"\t".repeat(t)}) {\n`+`${r}\n`+`${"\t".repeat(t)}}`},h.prototype.escapeHtml=n,t.exports={Node:o,TextNode:a,HtmlNode:s,ErrorNode:c,ElementClass:l,Element:h}},function(t,e){function r(t){var e={};for(var r in t)e[r]=t[r];return e}function n(t){var e={};return t.tags&&(e.tags=r(t.tags)),t.hljs&&(e.hljs=t.hljs),t.katex&&(e.katex=t.katex),e}function o(t,e){for(var n in t=r(t),e)t[n]=e[n];return t}t.exports={copyOptions:n,tags:o,options:function(t,e){if("object"!=typeof t||"object"!=typeof e)throw TypeError("One of the options provided is not an object");return t=n(t),e.tags&&(t.tags||(t.tags={}),t.tags=o(t.tags,e.tags)),e.hljs&&(t.hljs=e.hljs),e.katex&&(t.katex=e.katex),t}}},function(t,e,r){var n=r(3),o=r(5),i=r(7),a=r(1),s={};var c={parser:n,renderer:o,highlighter:i,ast2nt:function(t,e){return e||(e={}),e.tags||(e.tags={}),e=a.options(s,e),o.ast2nt(t,e)},render:function(t,e){t+="",e||(e={}),e.tags||(e.tags={}),e=a.options(s,e);var r=n.input2pt(t),i=n.pt2ast(r);return o.ast2nt(i,e).outerHtml},highlight:function(t){t+="";var e=n.input2pt(t);return i.pt2hl(e)},cascade:function(t){if("object"!=typeof t)throw TypeError("typeof options != 'object'");s=a.options(s,t)},set:function(t){if("object"!=typeof t)throw TypeError("typeof options != 'object'");s=t}};t.exports=c},function(t,e,r){var n=r(4);t.exports={input2pt:function(t){var e=n.parse(t);return e.input=t,e},pt2ast:function(t){var e=t.input,r=function t(r){var n=r.map(r=>{switch(r.type){case"text":return{type:"text",text:r.text};case"verbatim":return{type:"text",text:r.child.text};case"element":var n="parenthesis"!=r.attributes._type?[]:r.attributes.content.filter(({_type:t})=>"attribute"==t).map(({attribute:t})=>({name:t[0],value:t[3]}));return{type:"element",name:r.name,attributes:n,code:e.substring(r.location.start.offset,r.location.end.offset),children:t(r.children)};default:throw new TypeError(`Unknown type: ${r.type}`)}});return n=n.reduce((t,e)=>{if("text"==e.type){if(!e.text)return t;if(t.length&&"text"==t[t.length-1].type)return t[t.length-1].text+=e.text,t}return t.push(e),t},[])}(t.root.children);return{input:t.input,root:{type:"root",children:r,code:e}}}}},function(t,e,r){"use strict";function n(t,e,r,o){this.message=t,this.expected=e,this.found=r,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,n)}!function(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}(n,Error),n.buildMessage=function(t,e){var r={literal:function(t){return'"'+o(t.text)+'"'},class:function(t){var e,r="";for(e=0;e<t.parts.length;e++)r+=t.parts[e]instanceof Array?i(t.parts[e][0])+"-"+i(t.parts[e][1]):i(t.parts[e]);return"["+(t.inverted?"^":"")+r+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function o(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}function i(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}return"Expected "+function(t){var e,n,o,i=new Array(t.length);for(e=0;e<t.length;e++)i[e]=(o=t[e],r[o.type](o));if(i.sort(),i.length>0){for(e=1,n=1;e<i.length;e++)i[e-1]!==i[e]&&(i[n]=i[e],n++);i.length=n}switch(i.length){case 1:return i[0];case 2:return i[0]+" or "+i[1];default:return i.slice(0,-1).join(", ")+", or "+i[i.length-1]}}(t)+" but "+function(t){return t?'"'+o(t)+'"':"end of input"}(e)+" found."},t.exports={SyntaxError:n,parse:function(t,e){e=void 0!==e?e:{};var r,o={},i={start:me},a=me,s=function(t){return{root:{type:"root",children:t,location:ce()}}},c=function(t,e,r,n,o){return{type:"element",lbm:t,name:e,attributes:r,children:n,rbm:o,location:ce()}},l="[",h=le("[",!1),u="<",p=le("<",!1),f=function(t,e){return(Ee[Ee.length-1]||0)<=e.length+1},d=function(t,e){return t+e.join("")},m=function(t){return Ee.push(t.length),t},g="!",y=le("!",!1),A='"',x=le('"',!1),b="#",v=le("#",!1),C="$",w=le("$",!1),E="%",T=le("%",!1),k="&",$=le("&",!1),j="'",H=le("'",!1),S=")",N=le(")",!1),I="*",q=le("*",!1),O="+",_=le("+",!1),z=",",F=le(",",!1),M="-",U=le("-",!1),R="/",P=le("/",!1),J=";",L=le(";",!1),Y="=",B=le("=",!1),D=">",G=le(">",!1),K="?",Q=le("?",!1),V="@",W=le("@",!1),X="\\",Z=le("\\",!1),tt="^",et=le("^",!1),rt="_",nt=le("_",!1),ot="{",it=le("{",!1),at="|",st=le("|",!1),ct="}",lt=le("}",!1),ht="~",ut=le("~",!1),pt=function(t){return t.join("")},ft=/^[a-z]/,dt=he([["a","z"]],!1,!1),mt=/^[a-z0-9]/,gt=he([["a","z"],["0","9"]],!1,!1),yt=":",At=le(":",!1),xt=function(t,e,r,n){return":"+r+n.join("")},bt=function(t,e,r){return t+e.join("")+r.join("")},vt="",Ct="(",wt=le("(",!1),Et=/^[a-z0-9\-]/,Tt=he([["a","z"],["0","9"],"-"],!1,!1),kt={type:"any"},$t=function(t,e,r){return["=",'"',r.map(t=>t[1]).join(""),'"']},jt=function(t,e,r){return["=","'",r.map(t=>t[1]).join(""),"'"]},Ht=/^['") \t\n\r]/,St=he(["'",'"',")"," ","\t","\n","\r"],!1,!1),Nt=function(t,e,r){return["=","",r.map(t=>t[1]).join(""),""]},It=function(t,e){return["","","",""]},qt=function(t,e,r){return{_type:"attribute",attribute:[e.join("")].concat(r)}},Ot=function(t,e){return{_type:"whitespace",whitespace:e}},_t=function(t,e,r){return{_type:"parenthesis",left:t,content:e,right:r}},zt=".",Ft=le(".",!1),Mt=function(t){return{_type:"separator",separator:t}},Ut="]",Rt=le("]",!1),Pt=function(t,e){return(Ee[Ee.length-1]||0)==t.length+1},Jt=function(t,e){return t.join("")+e},Lt=function(){return""},Yt=function(t){return Ee.pop(),t},Bt="`",Dt=le("`",!1),Gt=function(t){return t},Kt=function(t){return{type:"text",text:t.join(""),location:ce()}},Qt=function(t,e,r,n){return{type:"verbatim",lvm:t,separator:e,child:r,rvm:n,location:ce()}},Vt=function(t,e){return we=e.length+1,t+e.join("")},Wt=function(t,e){return we==t.length+1},Xt=function(t){return{type:"text",text:t.join(""),location:ce()}},Zt=/^[ \t\n\r]/,te=he([" ","\t","\n","\r"],!1,!1),ee=function(t){return t.join("")},re=0,ne=0,oe=[{line:1,column:1}],ie=0,ae=[],se=0;if("startRule"in e){if(!(e.startRule in i))throw new Error("Can't start parsing from rule \""+e.startRule+'".');a=i[e.startRule]}function ce(){return pe(ne,re)}function le(t,e){return{type:"literal",text:t,ignoreCase:e}}function he(t,e,r){return{type:"class",parts:t,inverted:e,ignoreCase:r}}function ue(e){var r,n=oe[e];if(n)return n;for(r=e-1;!oe[r];)r--;for(n={line:(n=oe[r]).line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return oe[e]=n,n}function pe(t,e){var r=ue(t),n=ue(e);return{start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function fe(t){re<ie||(re>ie&&(ie=re,ae=[]),ae.push(t))}function de(t,e,r){return new n(n.buildMessage(t,e),t,e,r)}function me(){var t,e;return t=re,(e=ge())!==o&&(ne=t,e=s(e)),t=e}function ge(){var t,e;for(t=[],e=ye();e!==o;)t.push(e),e=ye();return t}function ye(){var e;return(e=function(){var e,r,n,i,a,s;e=re,(r=function(){var t,e;t=re,(e=Ae())!==o&&(ne=t,e=m(e));return t=e}())!==o&&(n=function(){var e,r,n,i,a,s,c,l,h;e=re,r=[],33===t.charCodeAt(re)?(n=g,re++):(n=o,0===se&&fe(y));if(n!==o)for(;n!==o;)r.push(n),33===t.charCodeAt(re)?(n=g,re++):(n=o,0===se&&fe(y));else r=o;if(r===o){if(r=[],34===t.charCodeAt(re)?(n=A,re++):(n=o,0===se&&fe(x)),n!==o)for(;n!==o;)r.push(n),34===t.charCodeAt(re)?(n=A,re++):(n=o,0===se&&fe(x));else r=o;if(r===o){if(r=[],35===t.charCodeAt(re)?(n=b,re++):(n=o,0===se&&fe(v)),n!==o)for(;n!==o;)r.push(n),35===t.charCodeAt(re)?(n=b,re++):(n=o,0===se&&fe(v));else r=o;if(r===o){if(r=[],36===t.charCodeAt(re)?(n=C,re++):(n=o,0===se&&fe(w)),n!==o)for(;n!==o;)r.push(n),36===t.charCodeAt(re)?(n=C,re++):(n=o,0===se&&fe(w));else r=o;if(r===o){if(r=[],37===t.charCodeAt(re)?(n=E,re++):(n=o,0===se&&fe(T)),n!==o)for(;n!==o;)r.push(n),37===t.charCodeAt(re)?(n=E,re++):(n=o,0===se&&fe(T));else r=o;if(r===o){if(r=[],38===t.charCodeAt(re)?(n=k,re++):(n=o,0===se&&fe($)),n!==o)for(;n!==o;)r.push(n),38===t.charCodeAt(re)?(n=k,re++):(n=o,0===se&&fe($));else r=o;if(r===o){if(r=[],39===t.charCodeAt(re)?(n=j,re++):(n=o,0===se&&fe(H)),n!==o)for(;n!==o;)r.push(n),39===t.charCodeAt(re)?(n=j,re++):(n=o,0===se&&fe(H));else r=o;if(r===o){if(r=[],41===t.charCodeAt(re)?(n=S,re++):(n=o,0===se&&fe(N)),n!==o)for(;n!==o;)r.push(n),41===t.charCodeAt(re)?(n=S,re++):(n=o,0===se&&fe(N));else r=o;if(r===o){if(r=[],42===t.charCodeAt(re)?(n=I,re++):(n=o,0===se&&fe(q)),n!==o)for(;n!==o;)r.push(n),42===t.charCodeAt(re)?(n=I,re++):(n=o,0===se&&fe(q));else r=o;if(r===o){if(r=[],43===t.charCodeAt(re)?(n=O,re++):(n=o,0===se&&fe(_)),n!==o)for(;n!==o;)r.push(n),43===t.charCodeAt(re)?(n=O,re++):(n=o,0===se&&fe(_));else r=o;if(r===o){if(r=[],44===t.charCodeAt(re)?(n=z,re++):(n=o,0===se&&fe(F)),n!==o)for(;n!==o;)r.push(n),44===t.charCodeAt(re)?(n=z,re++):(n=o,0===se&&fe(F));else r=o;if(r===o){if(r=[],45===t.charCodeAt(re)?(n=M,re++):(n=o,0===se&&fe(U)),n!==o)for(;n!==o;)r.push(n),45===t.charCodeAt(re)?(n=M,re++):(n=o,0===se&&fe(U));else r=o;if(r===o){if(r=[],47===t.charCodeAt(re)?(n=R,re++):(n=o,0===se&&fe(P)),n!==o)for(;n!==o;)r.push(n),47===t.charCodeAt(re)?(n=R,re++):(n=o,0===se&&fe(P));else r=o;if(r===o){if(r=[],59===t.charCodeAt(re)?(n=J,re++):(n=o,0===se&&fe(L)),n!==o)for(;n!==o;)r.push(n),59===t.charCodeAt(re)?(n=J,re++):(n=o,0===se&&fe(L));else r=o;if(r===o){if(r=[],61===t.charCodeAt(re)?(n=Y,re++):(n=o,0===se&&fe(B)),n!==o)for(;n!==o;)r.push(n),61===t.charCodeAt(re)?(n=Y,re++):(n=o,0===se&&fe(B));else r=o;if(r===o){if(r=[],62===t.charCodeAt(re)?(n=D,re++):(n=o,0===se&&fe(G)),n!==o)for(;n!==o;)r.push(n),62===t.charCodeAt(re)?(n=D,re++):(n=o,0===se&&fe(G));else r=o;if(r===o){if(r=[],63===t.charCodeAt(re)?(n=K,re++):(n=o,0===se&&fe(Q)),n!==o)for(;n!==o;)r.push(n),63===t.charCodeAt(re)?(n=K,re++):(n=o,0===se&&fe(Q));else r=o;if(r===o){if(r=[],64===t.charCodeAt(re)?(n=V,re++):(n=o,0===se&&fe(W)),n!==o)for(;n!==o;)r.push(n),64===t.charCodeAt(re)?(n=V,re++):(n=o,0===se&&fe(W));else r=o;if(r===o){if(r=[],92===t.charCodeAt(re)?(n=X,re++):(n=o,0===se&&fe(Z)),n!==o)for(;n!==o;)r.push(n),92===t.charCodeAt(re)?(n=X,re++):(n=o,0===se&&fe(Z));else r=o;if(r===o){if(r=[],94===t.charCodeAt(re)?(n=tt,re++):(n=o,0===se&&fe(et)),n!==o)for(;n!==o;)r.push(n),94===t.charCodeAt(re)?(n=tt,re++):(n=o,0===se&&fe(et));else r=o;if(r===o){if(r=[],95===t.charCodeAt(re)?(n=rt,re++):(n=o,0===se&&fe(nt)),n!==o)for(;n!==o;)r.push(n),95===t.charCodeAt(re)?(n=rt,re++):(n=o,0===se&&fe(nt));else r=o;if(r===o){if(r=[],123===t.charCodeAt(re)?(n=ot,re++):(n=o,0===se&&fe(it)),n!==o)for(;n!==o;)r.push(n),123===t.charCodeAt(re)?(n=ot,re++):(n=o,0===se&&fe(it));else r=o;if(r===o){if(r=[],124===t.charCodeAt(re)?(n=at,re++):(n=o,0===se&&fe(st)),n!==o)for(;n!==o;)r.push(n),124===t.charCodeAt(re)?(n=at,re++):(n=o,0===se&&fe(st));else r=o;if(r===o){if(r=[],125===t.charCodeAt(re)?(n=ct,re++):(n=o,0===se&&fe(lt)),n!==o)for(;n!==o;)r.push(n),125===t.charCodeAt(re)?(n=ct,re++):(n=o,0===se&&fe(lt));else r=o;if(r===o)if(r=[],126===t.charCodeAt(re)?(n=ht,re++):(n=o,0===se&&fe(ut)),n!==o)for(;n!==o;)r.push(n),126===t.charCodeAt(re)?(n=ht,re++):(n=o,0===se&&fe(ut));else r=o}}}}}}}}}}}}}}}}}}}}}}}r!==o&&(ne=e,r=pt(r));if((e=r)===o){if(e=re,ft.test(t.charAt(re))?(r=t.charAt(re),re++):(r=o,0===se&&fe(dt)),r!==o){for(n=[],mt.test(t.charAt(re))?(i=t.charAt(re),re++):(i=o,0===se&&fe(gt));i!==o;)n.push(i),mt.test(t.charAt(re))?(i=t.charAt(re),re++):(i=o,0===se&&fe(gt));if(n!==o){if(i=[],a=re,58===t.charCodeAt(re)?(s=yt,re++):(s=o,0===se&&fe(At)),s!==o)if(ft.test(t.charAt(re))?(c=t.charAt(re),re++):(c=o,0===se&&fe(dt)),c!==o){for(l=[],mt.test(t.charAt(re))?(h=t.charAt(re),re++):(h=o,0===se&&fe(gt));h!==o;)l.push(h),mt.test(t.charAt(re))?(h=t.charAt(re),re++):(h=o,0===se&&fe(gt));l!==o?(ne=a,s=xt(r,n,c,l),a=s):(re=a,a=o)}else re=a,a=o;else re=a,a=o;for(;a!==o;)if(i.push(a),a=re,58===t.charCodeAt(re)?(s=yt,re++):(s=o,0===se&&fe(At)),s!==o)if(ft.test(t.charAt(re))?(c=t.charAt(re),re++):(c=o,0===se&&fe(dt)),c!==o){for(l=[],mt.test(t.charAt(re))?(h=t.charAt(re),re++):(h=o,0===se&&fe(gt));h!==o;)l.push(h),mt.test(t.charAt(re))?(h=t.charAt(re),re++):(h=o,0===se&&fe(gt));l!==o?(ne=a,s=xt(r,n,c,l),a=s):(re=a,a=o)}else re=a,a=o;else re=a,a=o;i!==o?(ne=e,r=bt(r,n,i),e=r):(re=e,e=o)}else re=e,e=o}else re=e,e=o;e===o&&(e=vt)}return e}())!==o&&(i=function(){var e,r,n,i,a,s,c,l,h,u,p,f;e=re,40===t.charCodeAt(re)?(r=Ct,re++):(r=o,0===se&&fe(wt));if(r!==o){if(n=[],i=re,a=[],Et.test(t.charAt(re))?(s=t.charAt(re),re++):(s=o,0===se&&fe(Tt)),s!==o)for(;s!==o;)a.push(s),Et.test(t.charAt(re))?(s=t.charAt(re),re++):(s=o,0===se&&fe(Tt));else a=o;if(a!==o){if(s=re,61===t.charCodeAt(re)?(c=Y,re++):(c=o,0===se&&fe(B)),c!==o)if(34===t.charCodeAt(re)?(l=A,re++):(l=o,0===se&&fe(x)),l!==o){for(h=[],u=re,p=re,se++,34===t.charCodeAt(re)?(f=A,re++):(f=o,0===se&&fe(x)),se--,f===o?p=void 0:(re=p,p=o),p!==o?(t.length>re?(f=t.charAt(re),re++):(f=o,0===se&&fe(kt)),f!==o?u=p=[p,f]:(re=u,u=o)):(re=u,u=o);u!==o;)h.push(u),u=re,p=re,se++,34===t.charCodeAt(re)?(f=A,re++):(f=o,0===se&&fe(x)),se--,f===o?p=void 0:(re=p,p=o),p!==o?(t.length>re?(f=t.charAt(re),re++):(f=o,0===se&&fe(kt)),f!==o?u=p=[p,f]:(re=u,u=o)):(re=u,u=o);h!==o?(34===t.charCodeAt(re)?(u=A,re++):(u=o,0===se&&fe(x)),u!==o?(ne=s,c=$t(r,a,h),s=c):(re=s,s=o)):(re=s,s=o)}else re=s,s=o;else re=s,s=o;if(s===o){if(s=re,61===t.charCodeAt(re)?(c=Y,re++):(c=o,0===se&&fe(B)),c!==o)if(39===t.charCodeAt(re)?(l=j,re++):(l=o,0===se&&fe(H)),l!==o){for(h=[],u=re,p=re,se++,39===t.charCodeAt(re)?(f=j,re++):(f=o,0===se&&fe(H)),se--,f===o?p=void 0:(re=p,p=o),p!==o?(t.length>re?(f=t.charAt(re),re++):(f=o,0===se&&fe(kt)),f!==o?u=p=[p,f]:(re=u,u=o)):(re=u,u=o);u!==o;)h.push(u),u=re,p=re,se++,39===t.charCodeAt(re)?(f=j,re++):(f=o,0===se&&fe(H)),se--,f===o?p=void 0:(re=p,p=o),p!==o?(t.length>re?(f=t.charAt(re),re++):(f=o,0===se&&fe(kt)),f!==o?u=p=[p,f]:(re=u,u=o)):(re=u,u=o);h!==o?(39===t.charCodeAt(re)?(u=j,re++):(u=o,0===se&&fe(H)),u!==o?(ne=s,c=jt(r,a,h),s=c):(re=s,s=o)):(re=s,s=o)}else re=s,s=o;else re=s,s=o;if(s===o){if(s=re,61===t.charCodeAt(re)?(c=Y,re++):(c=o,0===se&&fe(B)),c!==o){for(l=[],h=re,u=re,se++,Ht.test(t.charAt(re))?(p=t.charAt(re),re++):(p=o,0===se&&fe(St)),se--,p===o?u=void 0:(re=u,u=o),u!==o?(t.length>re?(p=t.charAt(re),re++):(p=o,0===se&&fe(kt)),p!==o?h=u=[u,p]:(re=h,h=o)):(re=h,h=o);h!==o;)l.push(h),h=re,u=re,se++,Ht.test(t.charAt(re))?(p=t.charAt(re),re++):(p=o,0===se&&fe(St)),se--,p===o?u=void 0:(re=u,u=o),u!==o?(t.length>re?(p=t.charAt(re),re++):(p=o,0===se&&fe(kt)),p!==o?h=u=[u,p]:(re=h,h=o)):(re=h,h=o);l!==o?(ne=s,c=Nt(r,a,l),s=c):(re=s,s=o)}else re=s,s=o;s===o&&(s=re,(c=vt)!==o&&(ne=s,c=It(r,a)),s=c)}}s!==o?(ne=i,a=qt(r,a,s),i=a):(re=i,i=o)}else re=i,i=o;for(i===o&&(i=re,(a=Ce())!==o&&(ne=i,a=Ot(r,a)),i=a);i!==o;){if(n.push(i),i=re,a=[],Et.test(t.charAt(re))?(s=t.charAt(re),re++):(s=o,0===se&&fe(Tt)),s!==o)for(;s!==o;)a.push(s),Et.test(t.charAt(re))?(s=t.charAt(re),re++):(s=o,0===se&&fe(Tt));else a=o;if(a!==o){if(s=re,61===t.charCodeAt(re)?(c=Y,re++):(c=o,0===se&&fe(B)),c!==o)if(34===t.charCodeAt(re)?(l=A,re++):(l=o,0===se&&fe(x)),l!==o){for(h=[],u=re,p=re,se++,34===t.charCodeAt(re)?(f=A,re++):(f=o,0===se&&fe(x)),se--,f===o?p=void 0:(re=p,p=o),p!==o?(t.length>re?(f=t.charAt(re),re++):(f=o,0===se&&fe(kt)),f!==o?u=p=[p,f]:(re=u,u=o)):(re=u,u=o);u!==o;)h.push(u),u=re,p=re,se++,34===t.charCodeAt(re)?(f=A,re++):(f=o,0===se&&fe(x)),se--,f===o?p=void 0:(re=p,p=o),p!==o?(t.length>re?(f=t.charAt(re),re++):(f=o,0===se&&fe(kt)),f!==o?u=p=[p,f]:(re=u,u=o)):(re=u,u=o);h!==o?(34===t.charCodeAt(re)?(u=A,re++):(u=o,0===se&&fe(x)),u!==o?(ne=s,c=$t(r,a,h),s=c):(re=s,s=o)):(re=s,s=o)}else re=s,s=o;else re=s,s=o;if(s===o){if(s=re,61===t.charCodeAt(re)?(c=Y,re++):(c=o,0===se&&fe(B)),c!==o)if(39===t.charCodeAt(re)?(l=j,re++):(l=o,0===se&&fe(H)),l!==o){for(h=[],u=re,p=re,se++,39===t.charCodeAt(re)?(f=j,re++):(f=o,0===se&&fe(H)),se--,f===o?p=void 0:(re=p,p=o),p!==o?(t.length>re?(f=t.charAt(re),re++):(f=o,0===se&&fe(kt)),f!==o?u=p=[p,f]:(re=u,u=o)):(re=u,u=o);u!==o;)h.push(u),u=re,p=re,se++,39===t.charCodeAt(re)?(f=j,re++):(f=o,0===se&&fe(H)),se--,f===o?p=void 0:(re=p,p=o),p!==o?(t.length>re?(f=t.charAt(re),re++):(f=o,0===se&&fe(kt)),f!==o?u=p=[p,f]:(re=u,u=o)):(re=u,u=o);h!==o?(39===t.charCodeAt(re)?(u=j,re++):(u=o,0===se&&fe(H)),u!==o?(ne=s,c=jt(r,a,h),s=c):(re=s,s=o)):(re=s,s=o)}else re=s,s=o;else re=s,s=o;if(s===o){if(s=re,61===t.charCodeAt(re)?(c=Y,re++):(c=o,0===se&&fe(B)),c!==o){for(l=[],h=re,u=re,se++,Ht.test(t.charAt(re))?(p=t.charAt(re),re++):(p=o,0===se&&fe(St)),se--,p===o?u=void 0:(re=u,u=o),u!==o?(t.length>re?(p=t.charAt(re),re++):(p=o,0===se&&fe(kt)),p!==o?h=u=[u,p]:(re=h,h=o)):(re=h,h=o);h!==o;)l.push(h),h=re,u=re,se++,Ht.test(t.charAt(re))?(p=t.charAt(re),re++):(p=o,0===se&&fe(St)),se--,p===o?u=void 0:(re=u,u=o),u!==o?(t.length>re?(p=t.charAt(re),re++):(p=o,0===se&&fe(kt)),p!==o?h=u=[u,p]:(re=h,h=o)):(re=h,h=o);l!==o?(ne=s,c=Nt(r,a,l),s=c):(re=s,s=o)}else re=s,s=o;s===o&&(s=re,(c=vt)!==o&&(ne=s,c=It(r,a)),s=c)}}s!==o?(ne=i,a=qt(r,a,s),i=a):(re=i,i=o)}else re=i,i=o;i===o&&(i=re,(a=Ce())!==o&&(ne=i,a=Ot(r,a)),i=a)}n!==o?(41===t.charCodeAt(re)?(i=S,re++):(i=o,0===se&&fe(N)),i!==o?(ne=e,r=_t(r,n,i),e=r):(re=e,e=o)):(re=e,e=o)}else re=e,e=o;e===o&&(e=re,46===t.charCodeAt(re)?(r=zt,re++):(r=o,0===se&&fe(Ft)),r===o&&(r=vt),r!==o&&(ne=e,r=Mt(r)),e=r);return e}())!==o&&(a=ge())!==o&&(s=function(){var t,e;t=re,(e=xe())!==o&&(ne=t,e=Yt(e));return t=e}())!==o?(ne=e,r=c(r,n,i,a,s),e=r):(re=e,e=o);return e}())===o&&(e=function(){var e,r,n,i,a;e=re,(r=function(){var e,r,n,i;e=re,96===t.charCodeAt(re)?(r=Bt,re++):(r=o,0===se&&fe(Dt));if(r!==o){for(n=[],60===t.charCodeAt(re)?(i=u,re++):(i=o,0===se&&fe(p));i!==o;)n.push(i),60===t.charCodeAt(re)?(i=u,re++):(i=o,0===se&&fe(p));n!==o?(ne=e,r=Vt(r,n),e=r):(re=e,e=o)}else re=e,e=o;return e}())!==o&&(n=function(){var e;46===t.charCodeAt(re)?(e=zt,re++):(e=o,0===se&&fe(Ft));e===o&&(e=vt);return e}())!==o&&(i=function(){var e,r,n,i,a;e=re,r=[],n=re,i=re,se++,a=ve(),se--,a===o?i=void 0:(re=i,i=o);i!==o?(t.length>re?(a=t.charAt(re),re++):(a=o,0===se&&fe(kt)),a!==o?(ne=n,i=Gt(a),n=i):(re=n,n=o)):(re=n,n=o);for(;n!==o;)r.push(n),n=re,i=re,se++,a=ve(),se--,a===o?i=void 0:(re=i,i=o),i!==o?(t.length>re?(a=t.charAt(re),re++):(a=o,0===se&&fe(kt)),a!==o?(ne=n,i=Gt(a),n=i):(re=n,n=o)):(re=n,n=o);r!==o&&(ne=e,r=Xt(r));return e=r}())!==o&&(a=ve())!==o?(ne=e,r=Qt(r,n,i,a),e=r):(re=e,e=o);return e}())===o&&(e=function(){var e,r,n,i,a,s,c;e=re,r=[],n=re,i=re,se++,a=Ae(),se--,a===o?i=void 0:(re=i,i=o);i!==o?(a=re,se++,s=xe(),se--,s===o?a=void 0:(re=a,a=o),a!==o?(s=re,se++,96===t.charCodeAt(re)?(c=Bt,re++):(c=o,0===se&&fe(Dt)),se--,c===o?s=void 0:(re=s,s=o),s!==o?(t.length>re?(c=t.charAt(re),re++):(c=o,0===se&&fe(kt)),c!==o?(ne=n,i=Gt(c),n=i):(re=n,n=o)):(re=n,n=o)):(re=n,n=o)):(re=n,n=o);if(n!==o)for(;n!==o;)r.push(n),n=re,i=re,se++,a=Ae(),se--,a===o?i=void 0:(re=i,i=o),i!==o?(a=re,se++,s=xe(),se--,s===o?a=void 0:(re=a,a=o),a!==o?(s=re,se++,96===t.charCodeAt(re)?(c=Bt,re++):(c=o,0===se&&fe(Dt)),se--,c===o?s=void 0:(re=s,s=o),s!==o?(t.length>re?(c=t.charAt(re),re++):(c=o,0===se&&fe(kt)),c!==o?(ne=n,i=Gt(c),n=i):(re=n,n=o)):(re=n,n=o)):(re=n,n=o)):(re=n,n=o);else r=o;r!==o&&(ne=e,r=Kt(r));return e=r}()),e}function Ae(){var e,r,n,i;if(e=re,91===t.charCodeAt(re)?(r=l,re++):(r=o,0===se&&fe(h)),r!==o){for(n=[],60===t.charCodeAt(re)?(i=u,re++):(i=o,0===se&&fe(p));i!==o;)n.push(i),60===t.charCodeAt(re)?(i=u,re++):(i=o,0===se&&fe(p));n!==o?(ne=re,(i=(i=f(r,n))?void 0:o)!==o?(ne=e,e=r=d(r,n)):(re=e,e=o)):(re=e,e=o)}else re=e,e=o;return e}function xe(){var e,r,n;for(e=re,r=[],62===t.charCodeAt(re)?(n=D,re++):(n=o,0===se&&fe(G));n!==o;)r.push(n),62===t.charCodeAt(re)?(n=D,re++):(n=o,0===se&&fe(G));return r!==o?(93===t.charCodeAt(re)?(n=Ut,re++):(n=o,0===se&&fe(Rt)),n!==o?(ne=re,(Pt(r,n)?void 0:o)!==o?(ne=e,e=r=Jt(r,n)):(re=e,e=o)):(re=e,e=o)):(re=e,e=o),e===o&&(e=re,(r=be())!==o&&(ne=e,r=Lt()),e=r),e}function be(){var e,r;return e=re,se++,t.length>re?(r=t.charAt(re),re++):(r=o,0===se&&fe(kt)),se--,r===o?e=void 0:(re=e,e=o),e}function ve(){var e,r,n;for(e=re,r=[],62===t.charCodeAt(re)?(n=D,re++):(n=o,0===se&&fe(G));n!==o;)r.push(n),62===t.charCodeAt(re)?(n=D,re++):(n=o,0===se&&fe(G));return r!==o?(96===t.charCodeAt(re)?(n=Bt,re++):(n=o,0===se&&fe(Dt)),n!==o?(ne=re,(Wt(r,n)?void 0:o)!==o?(ne=e,e=r=Jt(r,n)):(re=e,e=o)):(re=e,e=o)):(re=e,e=o),e===o&&(e=re,(r=be())!==o&&(ne=e,r=Lt()),e=r),e}function Ce(){var e,r,n;if(e=re,r=[],Zt.test(t.charAt(re))?(n=t.charAt(re),re++):(n=o,0===se&&fe(te)),n!==o)for(;n!==o;)r.push(n),Zt.test(t.charAt(re))?(n=t.charAt(re),re++):(n=o,0===se&&fe(te));else r=o;return r!==o&&(ne=e,r=ee(r)),e=r}var we,Ee=[];if((r=a())!==o&&re===t.length)return r;throw r!==o&&re<t.length&&fe({type:"end"}),de(ae,ie<t.length?t.charAt(ie):null,ie<t.length?pe(ie,ie+1):pe(ie,ie))}}},function(t,e,r){var{Node:n,TextNode:o,HtmlNode:i,ErrorNode:a,ElementClass:s,Element:c}=r(0),l=r(6),h=r(1),u=new s({name:"[root]",display:"container-block",render:t=>t.html(t.innerHtml)});t.exports={ast2nt:function(t,e){e||(e={}),e.tags||(e.tags={});var r=h.tags(l,e.tags);return function t(n){if("root"==n.type)return u.instantiate({code:n.code,attributes:[],children:n.children.map(t),options:e});if("text"==n.type)return new o(n.text);if("error"==n.type)return new a({message:"Parser error",code:n.text});if("element"==n.type){if(n.name in r&&r[n.name]){if(r[n.name].split){var i=(e,r)=>{if(0==r.length)return e.map(t);var n,o=r[r.length-1],a=[];(e=e.map(t=>"element"!=t.type||t.name!=o||t.children.length?t:{type:"delimiter"})).length&&"text"==e[0].type&&!e[0].text.trim()&&(e=e.slice(1)),e.length&&"delimiter"==e[0].type||e.unshift({type:"delimiter"});for(var s=0;s<e.length;s++)"delimiter"==e[s].type?(n&&a.push(n),n=[]):n.push(e[s]);return a.push(n),a.map(t=>i(t,r.slice(0,-1)))};return r[n.name].instantiate({code:n.code,attributes:n.attributes,children:i(n.children,r[n.name].split),options:e})}return r[n.name].instantiate({code:n.code,attributes:n.attributes,children:n.children.map(t),options:e})}return new a({message:n.name?`Undefined tag name [${n.name}]`:"No tag name",code:n.code})}throw TypeError(n.type)}(t.root)},Node:n,TextNode:o,HtmlNode:i,ErrorNode:a,ElementClass:s,Element:c}},function(t,e,r){var{ElementClass:n}=r(0),o={};function i(t){return t=t.trim(),/^#/.test(t)?!!/^#[^\s]*$/.test(t)&&t:/^(\/|\.\/|\.\.\/)/.test(t)?!!/^(\/|\.\/|\.\.\/)[^\s]*$/.test(t)&&t:(/^(http:\/\/|https:\/\/|ftp:\/\/)/.test(t)||(t="http://"+t),!!/^(http:\/\/|https:\/\/|ftp:\/\/)[a-z0-9]+(-+[a-z0-9]+)*(\.[a-z0-9]+(-+[a-z0-9]+)*)+\.?(:[0-9]{1,5})?(\/[^\s]*)?$/.test(t)&&t)}o.comment=new n({name:"comment",display:"inline",render:t=>t.text("")}),o.entity=new n({name:"entity",display:"inline",render:t=>t.innerIsText?/^([a-z]{1,50}|#[0-9]{1,10}|#x[0-9a-f]{1,10})$/i.test(t.innerText)?t.html(`&${t.innerText};`):t.error("Invalid value"):t.error("Non-text input")}),["b","code","i","u","sup","sub"].forEach(t=>o[t]=new n({name:t,display:"inline",render:e=>e.html(`<${t}>${e.innerHtml}</${t}>`)})),["h1","h2","h3","h4","h5","h6","p"].forEach(t=>o[t]=new n({name:t,display:"leaf-block",render:e=>e.html(`<${t}>${e.innerHtml}</${t}>`)})),o.blockquote=new n({name:"blockquote",display:"container-block",render:t=>{var e=t.getAttribute("type");return["info","warn"].includes(e)?t.html(`<blockquote class="m42kup-bq-${e}">${t.innerHtml}</blockquote>`):t.html(`<blockquote>${t.innerHtml}</blockquote>`)}}),["br"].forEach(t=>o[t]=new n({name:t,display:"inline",render:e=>e.html(`<${t}>${e.innerHtml}`)})),["hr"].forEach(t=>o[t]=new n({name:t,display:"leaf-block",render:e=>e.html(`<${t}>${e.innerHtml}`)})),["ul","ol"].forEach(t=>{o[t]=new n({name:t,display:"container-block",split:"*",render:e=>e.html(`<${t}>`+e.innerHtml.map(t=>`<li>${t}</li>`).join("")+`</${t}>`)})}),o.table=new n({name:"table",display:"container-block",split:["*","**"],render:t=>{var e=t.innerHtml.map(t=>t.length).reduce((t,e)=>t<e?e:t);return t.html("<table>"+t.innerHtml.map(t=>`<tr>${t.concat(Array(e-t.length).fill("")).map(t=>`<td>${t}</td>`).join("")}</tr>`).join("")+"</table>")}}),o.blockcode=new n({name:"blockcode",display:"leaf-block",render:t=>{var e=t.innerHtml.replace(/(^[ \t]*(\r\n|\r|\n))|((\r\n|\r|\n)[ \t]*$)/g,"");return t.html(`<pre><code>${e}\n</code></pre>`)}}),o.bi=new n({name:"bi",display:"inline",render:t=>t.html(`<i><b>${t.innerHtml}</b></i>`)}),o.link=new n({name:"link",display:"inline",render:t=>{var e=t.getAttribute("href");if(null==e){if(!t.innerIsText)return t.error("Non-text input");let e=i(t.innerText);if(!e)return t.error("Invalid URL");let r=t.escapeHtml(e);return t.html(`<a href="${r}" title="${r}">${r}</a>`)}{let r=i(e);if(!r)return t.error("Invalid URL");let n=t.escapeHtml(r);return t.html(`<a href="${n}" title="${n}">${t.innerHtml}</a>`)}}}),o.img=new n({name:"img",display:"leaf-block",render:t=>{if(!t.innerIsText)return t.error("Non-text input");var e=i(t.innerText);if(!e)return t.error("Invalid URL");var r=t.escapeHtml(e);return t.html(`<img src="${r}">`)}}),["squote","dquote"].forEach(t=>o[t]=new n({name:t,display:"inline",render:e=>{var r={squote:{normal:["‘","’"],angle:["〈","〉"],corner:["「","」"]},dquote:{normal:["“","”"],angle:["《","》"],corner:["『","』"]}},n=e.getAttribute("type");return["angle","corner"].includes(n)||(n="normal"),e.html(`${r[t][n][0]}${e.innerHtml}${r[t][n][1]}`)}})),o.highlight=new n({name:"highlight",display:"leaf-block",render:(t,e)=>{if(!e.hljs)return t.error("Element not implemented (options.highlight not given)");if(!t.innerIsText)return t.error("Non-text input");var r,n=["apache","bash","coffeescript","cpp","cs","css","diff","http","ini","java","javascript","json","makefile","xml","markdown","nginx","objectivec","perl","php","python","ruby","sql"],o=t.innerText.replace(/(^[ \t]*(\r\n|\r|\n))|((\r\n|\r|\n)[ \t]*$)/g,"");if(n.includes(t.getAttribute("lang"))){var i=t.getAttribute("lang");r=e.hljs.highlight(i,o).value}else r=e.hljs.highlightAuto(o,n).value;return t.html(`<pre class="hljs"><code>${r}\n</code></pre>`)}}),o.math=new n({name:"math",display:"inline",render:(t,e)=>{if(!e.katex)return t.error("Element not implemented (options.katex not given)");if(!t.innerIsText)return t.error("Non-text input");var r=e.katex.renderToString(t.innerText,{throwOnError:!1,displayMode:!1,strict:"error"});return t.html(r)}}),o.displaymath=new n({name:"displaymath",display:"leaf-block",render:(t,e)=>{if(!e.katex)return t.error("Element not implemented (options.katex not given)");if(!t.innerIsText)return t.error("Non-text input");var r=e.katex.renderToString(t.innerText,{throwOnError:!1,displayMode:!0,strict:"error"});return t.html(r)}});var a={'"':"dquote",$:"math",$$:"displaymath","%":"comment","&":"entity","'":"squote","*":"i","**":"b","***":"bi",";":"code",";;":"blockcode",";;;":"highlight","=":"h1","==":"h2","===":"h3","====":"h4","=====":"h5","======":"h6",">":"blockquote","\\":"br","^":"sup",_:"sub","~":"link","~~":"img"};for(var s in a){if(!o[a[s]])throw TypeError("aliasing failed");o[s]=o[a[s]]}t.exports=o},function(t,e){var r=t=>(t+"").replace(/[&<>"']/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[t]);function n(t){return`<span class="m42hl-${t.type}">${t.html||r(t.text)}</span>`}t.exports={pt2hl:function(t){return function t(e){for(var r="",o=0;o<e.length;o++)switch(e[o].type){case"text":r+=n({type:"tx",text:e[o].text});break;case"element":var i=n({type:"lbm",text:e[o].lbm})+n({type:"tn",text:e[o].name})+(t=>{switch(t._type){case"parenthesis":return n({type:"lpm",text:t.left})+t.content.map(t=>{switch(t._type){case"attribute":return n({type:"pk",text:t.attribute[0]})+n({type:"eq",text:t.attribute[1]})+n({type:"lqm",text:t.attribute[2]})+n({type:"pv",text:t.attribute[3]})+n({type:"rqm",text:t.attribute[4]});case"whitespace":return n({type:"tx",text:t.whitespace});default:throw Error("Unknown type")}}).join("")+n({type:"rpm",text:t.right});case"separator":return n({type:"sp",text:t.separator});default:throw Error("Unknown type")}})(e[o].attributes)+t(e[o].children)+n({type:"rbm",text:e[o].rbm});r+=n({type:"elem",html:i});break;case"verbatim":var a=n({type:"lvm",text:e[o].lvm+e[o].separator})+n({type:"tx",text:e[o].child.text})+n({type:"rvm",text:e[o].rvm});r+=n({type:"verb",html:a});break;default:throw new TypeError(`Unknown type: ${e[o].type}`)}return r}(t.root.children)}}}]);